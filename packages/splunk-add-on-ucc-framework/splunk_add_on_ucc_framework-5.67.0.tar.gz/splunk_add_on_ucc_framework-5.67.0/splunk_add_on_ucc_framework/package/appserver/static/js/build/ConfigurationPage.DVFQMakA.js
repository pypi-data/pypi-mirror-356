import{l as a,C as P,m as w,p as e,q as x,_ as B,o as v,x as N,y as L,z as j,U as q,W as I,t as h,k as M,B as F,n as $,R as z}from"./entry_page.js";import{P as V,B as W,l as G,k as H,T as Q,E as Y,h as J,j as K,b as S,M as X,m as Z,u as ee,s as ne,a as te,d as oe,C as y,e as se,S as ae,f as re,g as _,i as ie}from"./usePlatform.CJwfChLy.js";import{P as T,L as le,E as ce}from"./SearchJob.CcDcMnhZ.js";import{r as ue}from"./ArrowBroadUnderbarDown.BTKrfCzN.js";const de=({tab:n})=>{const d=a.useContext(P),[o,p]=a.useState(!0),l=a.useRef(null),c=w().meta.name,m=()=>new Promise(r=>{const u=d?.[n?.customTab?.src];if(u?.type==="tab"){const s=u.component;r(s)}else n.customTab?.type==="external"?B(()=>import(`${v()}/custom/${n.customTab.src}.js`),[],import.meta.url).then(s=>{const i=s.default;r(i)}):require([`app/${c}/js/build/custom/${n.customTab.src}`],s=>{r(s)})});return a.useEffect(()=>{m().then(r=>{l.current&&(new r(n,l.current).render(),p(!1))})},[]),e.jsxs(e.Fragment,{children:[o&&x._("Loading..."),e.jsx("div",{ref:l,style:{visibility:o?"hidden":"visible"}})]})},pe=h.div`
    margin-left: 270px !important;
    width: 150px;
`;function D({serviceName:n}){const d=a.useRef(),[o,p]=a.useState(null),[l,g]=a.useState(!1),[c,m]=a.useState({});a.useEffect(()=>{const s=new AbortController;return N({endpointUrl:L(`settings/${encodeURIComponent(n)}`),handleError:!0,signal:s.signal,callbackOnError:i=>{s.signal.aborted||p(i)}}).catch(i=>{if(s.signal.aborted)return null;throw i}).then(i=>{i&&m(i.entry[0].content)}),()=>{s.abort()}},[n]);const r=s=>{d.current.handleSubmit(s)},u=s=>{g(s)};if(o)throw o;return Object.keys(c).length?e.jsxs(e.Fragment,{children:[e.jsx(P.Consumer,{children:s=>e.jsx(V.Consumer,{children:i=>e.jsx(W,{ref:d,page:j,stanzaName:n,serviceName:"settings",mode:G,currentServiceState:c,handleFormSubmit:u,pageContext:i,customComponentContext:s})})}),e.jsx(pe,{children:e.jsx(q,{className:"saveBtn",label:x._("Save"),onClick:r,loading:l})})]}):e.jsx(I,{size:"medium"})}D.propTypes={serviceName:T.string.isRequired};function A({selectedTab:n,updateIsPageOpen:d}){const[o,p]=a.useState({open:!1}),l=n.style===H;a.useEffect(()=>{l&&d(!!o.open)},[d,l,o]);const g=()=>{p({...o,open:!0,mode:S,formLabel:n.formTitle?`Add ${n.formTitle}`:`Add ${n.title}`})},c=()=>{p({...o,open:!1})},m=()=>e.jsx(K,{page:j,open:o.open,handleRequestClose:c,returnFocus:()=>{},serviceName:n.name,mode:S,formLabel:o.formLabel}),r=(b,E)=>{const f=n?.formTitle||n.title;p({...o,open:!0,stanzaName:b.name,formLabel:E===X?`Clone ${f}`:`Update ${f}`,mode:E})},u=()=>{p({...o,open:!1})},s=()=>e.jsx(Y,{open:o.open,handleRequestClose:u,serviceName:n.name,stanzaName:o.stanzaName,mode:o.mode,formLabel:o.formLabel,page:j}),i=()=>e.jsx("div",{style:l&&o.open?{display:"none"}:{display:"block"},children:e.jsx(J,{page:j,serviceName:n.name,handleRequestModalOpen:()=>g(),handleOpenPageStyleDialog:r})});return e.jsxs(Q,{value:null,children:[l&&o.open&&s(),i(),!l&&o.open&&m()]})}A.propTypes={selectedTab:T.object,updateIsPageOpen:T.func};const me=a.memo(A);var fe=ue();const ge=M(fe);function Ce(n){return e.jsx(F,{target:"_blank",to:n.fileUrl,download:n.fileNameAfterDownload,"data-test":"downloadButton",icon:e.jsx(ge,{}),children:n.children})}const xe=v().replace("js/build","openapi.json");function he(){return e.jsx(Ce,{fileUrl:xe,fileNameAfterDownload:"openapi.json",children:"OpenAPI.json"})}const be=h(Z.Typography)`
    font-size: 0.8em;
`,je=()=>{const n=w();if(n?.meta?.hideUCCVersion)return null;const d=n?.meta?._uccVersion??null;return e.jsxs(be,{as:"span",title:"Splunk Add-On UCC framework is a framework to generate UI-based Splunk add-ons. It includes UI, REST handlers, Modular inputs, OAuth and Alert action templates.","data-test":"ucc-credit",children:["Made with"," ",e.jsx(le,{to:"https://splunk.github.io/addonfactory-ucc-generator/",openInNewContext:!0,children:"UCC"})," ",d]})},ye=h.div`
    display: inline-flex;
    align-items: center;
    justify-content: end;
    flex-wrap: wrap;
    gap: 0.4rem;
`,Ee=h(y.Row)`
    padding: 5px 0px;

    .dropdown {
        text-align: right;
    }

    .input_button {
        text-align: right;
        margin-right: 0px;
    }
`,Te=h(_)`
    flex-wrap: wrap;
`;function _e(){const n=w();$(n.pages.configuration,"Configuration page not found in global config");const{title:d,description:o,subDescription:p,tabs:l}=n.pages.configuration,g=ee(n,"configuration"),c=l.filter(t=>!ne(t.hideForPlatform,g)),m=a.useMemo(()=>c.map(t=>t.name),[c]),r=a.useRef(!1),[u,s]=a.useState(c[0].name),[i,b]=a.useState(!1),f=te()?.get("tab");a.useEffect(()=>{f&&m.includes(f)&&f!==u&&s(f)},[f,m,u]),a.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]);const O=a.useCallback((t,{selectedTabId:C})=>{r.current&&C&&(s(C),b(!1))},[]),R=t=>{r.current&&b(t)},k=t=>z.createElement(de,{tab:t}),U=t=>{let C;return t?.customTab?C=k(t):C=t?.table?e.jsx(me,{selectedTab:t,updateIsPageOpen:R},t.name):e.jsx(D,{serviceName:t.name},t.name),e.jsx("div",{style:t.name!==u?{display:"none"}:{display:"block"},id:`${t.name}Tab`,children:C},t.name)};return e.jsx(ce,{children:e.jsxs(oe,{platform:g,children:[e.jsxs("div",{style:i?{display:"none"}:{display:"block"},children:[e.jsx(y,{gutter:8,children:e.jsxs(Ee,{children:[e.jsxs(y.Column,{span:9,children:[e.jsx(se,{children:x._(d)}),e.jsx(ae,{children:x._(o||"")}),e.jsx(re,{text:p?.text||"",links:p?.links})]}),e.jsx(y.Column,{span:3,style:{textAlignLast:"right"},children:e.jsxs(ye,{children:[e.jsx(je,{}),e.jsx(he,{})]})})]})}),e.jsx(Te,{activeTabId:u,onChange:O,children:c.map(t=>e.jsx(_.Tab,{label:x._(t.title),tabId:t.name},t.name))})]}),c.map(t=>U(t)),e.jsx(ie,{position:"top-right"})]})})}export{_e as default};
//# sourceMappingURL=ConfigurationPage.DVFQMakA.js.map
