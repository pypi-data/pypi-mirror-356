Metadata-Version: 2.4
Name: s4b-data-processing
Version: 0.3.0
Summary: Utilities for geocoding and preprocessing real estate data
Author: Unknown
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: pandas==2.2.3
Requires-Dist: numpy==2.2.6
Requires-Dist: plotly==6.1.2
Requires-Dist: tqdm==4.67.1
Requires-Dist: shapely==2.1.1
Requires-Dist: geopy==2.4.1
Requires-Dist: requests==2.32.3
Requires-Dist: geopandas==1.1.0
Requires-Dist: transliterate==1.10.2
Requires-Dist: openpyxl==3.1.5
Requires-Dist: pyarrow==20.0.0
Requires-Dist: fastparquet==2024.11.0

# Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ data-processing

Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ³ĞµĞ¾ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚ BNMAP.

## 1. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ
```
ğŸ“¦ s4b-data-processing
 â”£ ğŸ“‚ geocoding
 â”ƒ â”£ ğŸ“‚ core
 â”ƒ â”ƒ â”£ ğŸ“œ dubious_marker.py
 â”ƒ â”ƒ â”£ ğŸ“œ exceptions.py
 â”ƒ â”ƒ â”£ ğŸ“œ geocoder.py
 â”ƒ â”ƒ â”£ ğŸ“œ utils.py
 â”ƒ â”ƒ â”£ ğŸ“œ yandex_modified.py
 â”ƒ â”ƒ â”— ğŸ“œ __init__.py
 â”ƒ â”£ ğŸ“‚ scripts
 â”ƒ â”ƒ â”£ ğŸ“œ correct_dubious_geo.py
 â”ƒ â”ƒ â”£ ğŸ“œ geocode.py
 â”ƒ â”ƒ â”£ ğŸ“œ update_market_deals.py
 â”ƒ â”ƒ â”£ ğŸ“œ ya_api_keys.csv
 â”ƒ â”ƒ â”— ğŸ“œ __init__.py
 â”ƒ â”— ğŸ“œ __init__.py
 â”£ ğŸ“‚ preprocessing
 â”ƒ â”£ ğŸ“œ preprocessing.py
 â”ƒ â”£ ğŸ“œ features.py
 â”ƒ â”£ ğŸ“œ utils.py
 â”ƒ â”— ğŸ“œ __init__.py
 â”£ ğŸ“œ preprocessing_example.ipynb
 â”£ ğŸ“œ requirements.txt
 â”£ ğŸ“œ README.md
 â”— ğŸ“œ __init__.py
```

## 2. ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ÑĞ±Ğ¾Ñ€ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ´Ğ¾Ğ¼Ğ¾Ğ² Ğ² Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğµ
ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ `data` Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ¼ Ğ¸ ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹:
```
ğŸ“‚data
 â”£ ğŸ“‚regions
 â”ƒ â”£ ğŸ“‚ekb
 â”ƒ â”£ ğŸ“‚msk
 â”ƒ â”ƒ â”£ ğŸ“‚market_deals
 â”ƒ â”ƒ â”ƒ â”£ Ñ„Ğ°Ğ¹Ğ»_ÑĞ¾_ÑĞ´ĞµĞ»ĞºĞ°Ğ¼Ğ¸.parquet
 â”ƒ â”ƒ â”ƒ â”— Ğ¸Ğ»Ğ¸ Ñ„Ğ°Ğ¹Ğ»_ÑĞ¾_ÑĞ´ĞµĞ»ĞºĞ°Ğ¼Ğ¸.xlsx
 â”ƒ â”ƒ â”— ğŸ“‚project_declarations
 â”ƒ â”ƒ   â”£ Ñ„Ğ°Ğ¹Ğ»_Ñ_Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ½Ñ‹Ğ¼Ğ¸_Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.parquet
 â”ƒ â”ƒ   â”— Ğ¸Ğ»Ğ¸ Ñ„Ğ°Ğ¹Ğ»_Ñ_Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ½Ñ‹Ğ¼Ğ¸_Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.xlsx
 â”ƒ â”— ğŸ“‚nsk
 â”— ğŸ“œ__init__.py
```

Ğ”Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞ±Ğ¾Ñ€Ğ° Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ `geocode.py`:
```shell
python -m scripts.geocode
```
Ğ’Ğ°Ğ¼ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ¾Ğ½Ğ°Ğ´Ğ¾Ğ±Ğ¸Ñ‚ÑŒÑÑ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚:
```
United MSK: 35.203810,54.167977~40.624199,56.982672
United NSK: 74.312415,57.654077~86.551184,52.812563
EKB: 60.326783, 56.985508~60.942358, 56.634953
```

**Ğ’ĞµĞ·Ğ´Ğµ Ğ´Ğ°Ğ»ĞµĞµ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ `data` Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ¼ Ğ¸ ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹:**
```
ğŸ“‚data
 â”£ ğŸ“‚preprocessing
 â”£ ğŸ“‚regions
 â”ƒ â”£ ğŸ“‚ekb
 â”ƒ â”£ ğŸ“‚msk
 â”ƒ â”ƒ â”£ ğŸ“‚geolocations  
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œbbox.txt
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œcoordinates.pkl 
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œnear_nspd.pkl   
 â”ƒ â”ƒ â”£ ğŸ“‚market_deals
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œÑĞ´ĞµĞ»ĞºĞ¸.parquet
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œÑĞ´ĞµĞ»ĞºĞ¸.xlsx
 â”ƒ â”ƒ â”— ğŸ“‚project_declarations
 â”ƒ â”ƒ   â”£ ğŸ“œĞ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ½Ñ‹Ğµ Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ†Ğ¸Ğ¸.parquet
 â”ƒ â”ƒ   â”— ğŸ“œĞ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ½Ñ‹Ğµ Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ†Ğ¸Ğ¸.xlsx
 â”ƒ â”— ğŸ“‚nsk
 â”— ğŸ“œ__init__.py
```
Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ `geolocations` c Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğ¼Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ Ğ±ÑƒĞ´ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞ±Ğ¾Ñ€Ğ° Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚.

## 3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ´Ğ¾Ğ¼Ğ¾Ğ² Ğ² Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğµ
Ğ”Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ `geocode.py`:
```shell
python -m scripts.geocode
```
## 4. Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¼Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚ Ğ´Ğ¾Ğ¼Ğ¾Ğ² Ğ² Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğµ
Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¼Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ `correct_dubious_geo.py`:
```shell
python -m scripts.correct_dubious_geo
```
## 5. Ğ¡Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½ĞµĞ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ´ĞµĞ»Ğ¾Ğº Ñ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼Ğ¸
Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ´ĞµĞ»ĞºĞ¸ Ñ Ğ³ĞµĞ¾-ĞºĞ¾Ğ¾Ñ€Ğ¸Ğ´Ğ½Ğ°Ñ‚Ğ°Ğ¼Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ `update_market_deals.py`:
```shell
python -m scripts.update_market_deals
```

## 6. ĞŸÑ€ĞµĞ´Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿Ñ€ĞµĞ´Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´Ñ‘Ğ½ Ğ² Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞºĞµ `preprocessing_example.ipynb`.
