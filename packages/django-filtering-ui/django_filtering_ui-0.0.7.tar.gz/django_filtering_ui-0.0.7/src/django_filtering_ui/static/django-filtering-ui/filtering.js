(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(`.df-ui-lozenge[data-v-f6531cc4]{--lozenge-color: #000;--lozenge-border-color: var(--django-filtering-ui-tertiary);--lozenge-background-color: var(--django-filtering-ui-tertiary-shaded);display:flex;align-items:center;gap:.25em;padding:2px .75em;border-radius:10px;color:var(--lozenge-color);border:1px solid var(--lozenge-border-color);background-color:var(--lozenge-background-color)}.df-ui-lozenge-value[data-v-f6531cc4]{font-weight:700}.df-ui-lozenge-clear[data-v-f6531cc4]{text-decoration:none;color:var(--lozenge-border-color)}.df-ui-lozenge-clear[data-v-f6531cc4]:before{content:"|";margin-left:.25em}.df-ui-lozenge-clear[data-v-f6531cc4]:after{content:"×";margin-left:.5em}.df-ui-lozenges-form[data-v-b5a6cf70]{display:none}.df-ui-lozenges[data-v-b5a6cf70]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:20px 0;gap:5px}.df-ui-lozenges-preamble[data-v-b5a6cf70]{margin-right:5px}
.df-ui-debug-data[data-v-03e54b24]{margin:20px 0}.df-ui-debug-data-header[data-v-03e54b24]{display:flex}.df-ui-debug-data-header h4[data-v-03e54b24]{margin:0;flex:1}.df-ui-filtering[data-v-2b2d361b]{margin:30px 0}.df-ui-row.df-ui-match-type[data-v-2b2d361b]{margin:20px 0}.df-ui-row.df-ui-condition[data-v-2b2d361b]{display:flex;margin:10px 0;align-items:center;gap:10px}[data-v-2b2d361b] .df-ui-row.df-ui-condition .df-ui-col{flex:1}[data-v-2b2d361b] .df-ui-row.df-ui-condition input[type=text],[data-v-2b2d361b] .df-ui-row.df-ui-condition select{width:100%}[data-v-2b2d361b] .df-ui-row.df-ui-condition .df-ui-row-actions{display:flex;gap:5px;justify-content:right}.df-ui-form-actions[data-v-2b2d361b]{display:flex;gap:10px;margin:30px 0}
:root{--django-filtering-ui-primary-light: #fff;--django-filtering-ui-primary-dark: #000;--django-filtering-ui-primary: var(--django-filtering-ui-primary-light);--django-filtering-ui-primary-inverse: var( --django-filtering-ui-primary-dark );--django-filtering-ui-secondary: #ffc20e;--django-filtering-ui-secondary-shaded: rgba(255, 194, 14, .4);--django-filtering-ui-tertiary: #e07e26;--django-filtering-ui-tertiary-shaded: rgba(224, 126, 39, .2);--django-filtering-ui-shaded: #494948;--django-filtering-ui-shaded-more: #acacac}`)),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
import{o as a,a as u,j as H,d as m,m as Q,k as z,w as y,v as L,e as N,F as C,r as O,t as h,l as P,c as $,b as t,p as r,q as g,s as G,x as M,y as S,z as R,i as w,u as s,g as U,h as K,D as W}from"./assets/vendor-Bid8UQhM.js";import{_ as x,u as X,a as Y,C as A}from"./assets/useQueryFilters-BikKtQ_8.js";const Z={},_={type:"button",class:"btn"};function ee(e,o){return a(),u("button",_,[H(e.$slots,"default",{},()=>[o[0]||(o[0]=m("button"))])])}const V=x(Z,[["render",ee]]),ie={key:0,value:""},ne=["value","disabled"],k={__name:"Select",props:Q({options:{},includeBlank:{default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=z(e,"modelValue");return(b,f)=>y((a(),u("select",{"onUpdate:modelValue":f[0]||(f[0]=d=>o.value=d)},[e.includeBlank?(a(),u("option",ie)):N("",!0),(a(!0),u(C,null,O(e.options,d=>(a(),u("option",{key:d.value,value:d.value,disabled:d.disabled},h(d.label),9,ne))),128))],512)),[[L,o.value]])}},te={class:"df-ui-debug-data"},oe={class:"df-ui-debug-data-header"},le={__name:"DebugDataDisplay",props:["name","data","expanded"],setup(e){const o=P(!!e.expanded),b=$(()=>JSON.stringify(e.data,null,2)),f=()=>{o.value=!o.value};return(d,l)=>(a(),u("div",te,[t("div",oe,[t("h4",null,h(e.name),1),r(V,{class:"btn-tiny",onClick:f},{default:g(()=>[m(h(o.value?"hide":"show"),1)]),_:1})]),y(t("pre",null,h(b.value),513),[[G,o.value]])]))}},p=x(le,[["__scopeId","data-v-03e54b24"]]),de={class:"df-ui-row df-ui-condition"},ae={class:"df-ui-col"},se={class:"df-ui-col"},ue={class:"df-ui-col"},ce={key:0},re={key:1},ve={key:2},fe=["id","value","name"],me=["for"],be=["id","value","name"],$e=["for"],ye={class:"df-ui-col df-ui-row-actions"},he={__name:"ConditionRow",props:["condition","schema"],setup(e){const o=$(()=>e.schema.filters[e.condition.identifier]),b=$(()=>Object.entries(e.schema.filters).map(([l,i])=>({value:l,label:i.label,description:i.description,disabled:i.disabled||!1})));M(()=>e.condition.identifier,l=>{(!e.condition.relative||o.value&&!(e.condition.relative in o.value.lookups))&&(e.condition.relative=o.value.default_lookup,e.condition.value=null)});const f=$(()=>o.value?Object.entries(o.value.lookups).map(([l,i])=>({value:l,label:i.label})):[]),d=$(()=>{const l={...o.value.lookups[e.condition.relative]};return l.type==="choice"&&(l.choices=l.choices.map(([i,n])=>({value:i.toString(),label:n}))),l});return(l,i)=>(a(),u("div",de,[t("div",ae,[r(k,{options:b.value,modelValue:e.condition.identifier,"onUpdate:modelValue":i[0]||(i[0]=n=>e.condition.identifier=n)},null,8,["options","modelValue"])]),t("div",se,[r(k,{options:f.value,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.relative,"onUpdate:modelValue":i[1]||(i[1]=n=>e.condition.relative=n)},null,8,["options","disabled","modelValue"])]),t("div",ue,[e.condition.identifier?d.value.type==="choice"?(a(),u("span",re,[r(k,{options:d.value.choices,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.value,"onUpdate:modelValue":i[2]||(i[2]=n=>e.condition.value=n)},null,8,["options","disabled","modelValue"])])):d.value.type==="toggle"?(a(),u("span",ve,[y(t("input",{type:"radio",id:`true-value-${e.condition.id}`,value:d.value.true_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[3]||(i[3]=n=>e.condition.value=n)},null,8,fe),[[S,e.condition.value]]),t("label",{for:`true-value-${e.condition.id}`},h(d.value.true_choice[1]),9,me),y(t("input",{type:"radio",id:`false-value-${e.condition.id}`,value:d.value.false_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[4]||(i[4]=n=>e.condition.value=n)},null,8,be),[[S,e.condition.value]]),t("label",{for:`false-value-${e.condition.id}`},h(d.value.false_choice[1]),9,$e)])):y((a(),u("input",{key:3,type:"text","onUpdate:modelValue":i[5]||(i[5]=n=>e.condition.value=n)},null,512)),[[R,e.condition.value]]):(a(),u("span",ce,i[8]||(i[8]=[t("input",{type:"text",disabled:""},null,-1)])))]),t("div",ye,[r(V,{id:"remove-condition",class:"btn-tiny",onClick:i[6]||(i[6]=n=>l.$emit("remove"))},{default:g(()=>i[9]||(i[9]=[m("－")])),_:1}),r(V,{id:"add-condition",class:"btn-tiny",onClick:i[7]||(i[7]=n=>l.$emit("add"))},{default:g(()=>i[10]||(i[10]=[m("＋")])),_:1})])]))}},ke={class:"df-ui-row df-ui-condition df-ui-condition-sticky"},ge={class:"df-ui-col"},Ve={class:"df-ui-col"},we={class:"df-ui-col"},Ce={key:0},Se={key:1},pe={key:2},Oe=["id","value","name"],Ue=["for"],xe=["id","value","name"],Be=["for"],De={class:"df-ui-col df-ui-row-actions"},Fe={__name:"StickyConditionRow",props:["condition","schema"],setup(e){const o=$(()=>e.schema.filters[e.condition.identifier]),b=$(()=>Object.entries(e.schema.filters).map(([l,i])=>({value:l,label:i.label,description:i.description,disabled:i.disabled||!1})));M(()=>e.condition.identifier,l=>{(!e.condition.relative||o.value&&!(e.condition.relative in o.value.lookups))&&(e.condition.relative=o.value.default_lookup,e.condition.value=null)});const f=$(()=>o.value?Object.entries(o.value.lookups).map(([l,i])=>({value:l,label:i.label})):[]),d=$(()=>{const l={...o.value.lookups[e.condition.relative]};return l.type==="choice"&&(l.choices=l.choices.map(([i,n])=>({value:i.toString(),label:n}))),l});return(l,i)=>(a(),u("div",ke,[t("div",ge,[r(k,{options:b.value,modelValue:e.condition.identifier,"onUpdate:modelValue":i[0]||(i[0]=n=>e.condition.identifier=n),disabled:""},null,8,["options","modelValue"])]),t("div",Ve,[r(k,{options:f.value,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.relative,"onUpdate:modelValue":i[1]||(i[1]=n=>e.condition.relative=n)},null,8,["options","disabled","modelValue"])]),t("div",we,[e.condition.identifier?d.value.type==="choice"?(a(),u("span",Se,[r(k,{options:d.value.choices,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.value,"onUpdate:modelValue":i[2]||(i[2]=n=>e.condition.value=n)},null,8,["options","disabled","modelValue"])])):d.value.type==="toggle"?(a(),u("span",pe,[y(t("input",{type:"radio",id:`true-value-${e.condition.id}`,value:d.value.true_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[3]||(i[3]=n=>e.condition.value=n)},null,8,Oe),[[S,e.condition.value]]),t("label",{for:`true-value-${e.condition.id}`},h(d.value.true_choice[1]),9,Ue),y(t("input",{type:"radio",id:`false-value-${e.condition.id}`,value:d.value.false_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[4]||(i[4]=n=>e.condition.value=n)},null,8,xe),[[S,e.condition.value]]),t("label",{for:`false-value-${e.condition.id}`},h(d.value.false_choice[1]),9,Be)])):y((a(),u("input",{key:3,type:"text","onUpdate:modelValue":i[5]||(i[5]=n=>e.condition.value=n)},null,512)),[[R,e.condition.value]]):(a(),u("span",Ce,i[7]||(i[7]=[t("input",{type:"text",disabled:""},null,-1)])))]),t("div",De,[r(V,{id:"remove-condition",class:"btn-tiny btn-disabled"},{default:g(()=>i[8]||(i[8]=[m("－")])),_:1}),r(V,{id:"add-condition",class:"btn-tiny",onClick:i[6]||(i[6]=n=>l.$emit("add"))},{default:g(()=>i[9]||(i[9]=[m("＋")])),_:1})])]))}},je={class:"df-ui-filtering"},Ae=["value"],Ne=["value"],Me={class:"df-ui-row df-ui-match-type"},Re={class:"df-ui-col"},Ee={class:"df-ui-row df-ui-form-actions"},Je={key:0,class:"df-ui-debug"},qe={__name:"ComposableFilters",setup(e){const o=X(),b=w("model-listing-url"),f=w("filtering-options-schema"),d=w("filtering-json-schema"),l=w("debug-enabled"),{grouping:i,stickies:n,changedStickies:q,original:He,rendered:B}=Y({createDefault:!0,optionsSchema:f}),I=[{value:"and",label:"all"},{value:"or",label:"any"}],D=()=>{window.location.assign(b)},T=async F=>{const v=[];for(const c of i.conditions)(c.identifier==null&&c.relative==null&&c.value==null||!c.value||!c.identifier)&&v.push(c);i.removeConditions(...v),i.conditions.length==0&&q.value.length==0&&(F.preventDefault(),D())};return(F,v)=>(a(),u(C,null,[t("div",je,[t("form",{method:"post",onSubmit:T},[t("input",{type:"hidden",name:"csrfmiddlewaretoken",value:s(o)},null,8,Ae),t("input",{type:"hidden",name:"q",value:s(B)},null,8,Ne),t("div",Me,[t("div",Re,[v[1]||(v[1]=m(" Match ")),r(k,{id:"top-level-operator",modelValue:s(i).operation,"onUpdate:modelValue":v[0]||(v[0]=c=>s(i).operation=c),options:I,includeBlank:!1},null,8,["modelValue"]),v[2]||(v[2]=m(" of the following criteria: "))])]),(a(!0),u(C,null,O(s(n),c=>(a(),U(s(Fe),{key:c.id,condition:c,schema:s(f),onAdd:j=>s(i).addConditionsAfter(c,new(s(A)))},null,8,["condition","schema","onAdd"]))),128)),(a(!0),u(C,null,O(s(i).conditions,c=>(a(),U(s(he),{key:c.id,condition:c,schema:s(f),onAdd:j=>s(i).addConditionsAfter(c,new(s(A))),onRemove:j=>s(i).removeConditions(c)},null,8,["condition","schema","onAdd","onRemove"]))),128)),t("div",Ee,[r(V,{class:"btn-action",type:"submit"},{default:g(()=>v[3]||(v[3]=[m("Filter")])),_:1}),r(V,{class:"cancel btn-secondary",onClick:D},{default:g(()=>v[4]||(v[4]=[m("Cancel")])),_:1})])],32)]),s(l)?(a(),u("div",Je,[v[5]||(v[5]=t("h3",null,"Debug",-1)),r(p,{name:"Query filters data",data:JSON.parse(s(B)),expanded:!0},null,8,["data"]),r(p,{name:"Options schema",data:s(f)},null,8,["data"]),r(p,{name:"JSON schema",data:s(d)},null,8,["data"])])):N("",!0)],64))}},Ie=x(qe,[["__scopeId","data-v-2b2d361b"]]),Te={__name:"Filtering",setup(e){return(o,b)=>(a(),U(s(Ie)))}},E=document.getElementById("vue-app"),J=K(Te);J.use(W,{rootElement:E});J.mount(E);
