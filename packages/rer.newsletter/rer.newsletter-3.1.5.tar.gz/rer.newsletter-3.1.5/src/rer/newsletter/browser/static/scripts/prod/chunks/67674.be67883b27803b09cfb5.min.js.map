{"version":3,"file":"chunks/67674.be67883b27803b09cfb5.min.js","mappings":"0JAGAA,IAAEC,UAAUC,OAAM,WAChBF,IAAE,+BAA+BG,GAAG,SAAS,WACtCC,EAAMC,IAAI,aAAaC,OAU1BN,IAAAA,KAAO,CACLO,IAAK,2BACLC,KAAM,OACNF,KAAM,CACJG,gBAAiBL,EAAMC,IAAI,aAAaC,OAAOI,OAEhDC,MAAK,SAAUL,GACZM,KAAKC,MAAMP,GAAMQ,IACnBV,EAAMC,IAAI,aAAaU,SAASC,MAAK,GACrChB,IAAE,kBACCiB,YAAY,gBACZC,SAAS,SACTA,SAAS,cACTC,KAAK,OAAQ,UACbC,IAAI,UAAW,IACfC,KACC,wEAGJrB,IAAE,kBACCiB,YAAY,cACZC,SAAS,SACTA,SAAS,gBACTC,KAAK,OAAQ,SACbC,IAAI,UAAW,IACfC,KACC,oFAGR,IArCArB,IAAE,kBACCiB,YAAY,cACZC,SAAS,SACTA,SAAS,gBACTC,KAAK,OAAQ,SACbC,IAAI,UAAW,IACfC,KAAK,4DAiCZ,IAGA,IAAIjB,EAAQJ,IAAE,kBAAkBsB,UAAU,CACxCC,SAAU,CACRhB,IAAK,iEAEPiB,KAAM,CACJjB,IAAK,wBACLkB,QAAS,IAEXC,UAAU,EACVC,QAAS,CACP,CAAErB,KAAM,OACR,CAAEA,KAAM,WACR,CAAEA,KAAM,eACR,CAAEA,KAAM,mBACR,CAAEA,KAAM,iBACR,CACEA,KAAM,YACNsB,OAAQ,SAAUtB,EAAME,EAAMH,GAC5B,OAAIA,EAAIwB,QACC,WAEFxB,EAAIyB,UAAY,UAAY,QACrC,IAGJC,WAAY,CACV,CACEC,QAAS,CAAC,GACVC,SAAS,EACTC,YAAY,MAKlBlC,IAAE,wBAAwBG,GAAG,QAAS,MAAM,WACtCH,IAAEmC,MAAMC,SAAS,YACnBpC,IAAEmC,MAAMlB,YAAY,aAEpBb,EAAMJ,EAAE,eAAeiB,YAAY,YACnCjB,IAAEmC,MAAMjB,SAAS,YAErB,GACF,G","sources":["webpack://rer.newsletter/./src/rer/newsletter/browser/static/scripts/channelhistory.js"],"sourcesContent":["import $ from 'jquery';\nimport './datatables';\n\n$(document).ready(function () {\n  $('#delete-message-sent > span').on('click', function () {\n    if (!table.row('.selected').data()) {\n      // render error user deleted\n      $('.portalMessage')\n        .removeClass('alert-info')\n        .addClass('alert')\n        .addClass('alert-danger')\n        .attr('role', 'alert')\n        .css('display', '')\n        .html('<strong>Error</strong> Prima va selezionato un messaggio.');\n    } else {\n      $.ajax({\n        url: 'deleteMessageFromHistory',\n        type: 'post',\n        data: {\n          message_history: table.row('.selected').data().uid,\n        },\n      }).done(function (data) {\n        if (JSON.parse(data).ok) {\n          table.row('.selected').remove().draw(false);\n          $('.portalMessage')\n            .removeClass('alert-danger')\n            .addClass('alert')\n            .addClass('alert-info')\n            .attr('role', 'status')\n            .css('display', '')\n            .html(\n              '<strong>Info</strong> Storico del messaggio eliminato con successo.',\n            );\n        } else {\n          $('.portalMessage')\n            .removeClass('alert-info')\n            .addClass('alert')\n            .addClass('alert-danger')\n            .attr('role', 'alert')\n            .css('display', '')\n            .html(\n              '<strong>Error</strong> Problemi con la cancellazione dello storico del messaggio.',\n            );\n        }\n      });\n    }\n  });\n\n  // inizializzazione datatables\n  var table = $('#message-table').DataTable({\n    language: {\n      url: 'https://cdn.datatables.net/plug-ins/1.10.16/i18n/Italian.json',\n    },\n    ajax: {\n      url: 'getMessageSentDetails',\n      dataSrc: '',\n    },\n    ordering: false,\n    columns: [\n      { data: 'uid' },\n      { data: 'message' },\n      { data: 'subscribers' },\n      { data: 'send_date_start' },\n      { data: 'send_date_end' },\n      {\n        data: 'completed',\n        render: function (data, type, row) {\n          if (row.running) {\n            return 'In corso';\n          }\n          return row.completed ? 'Inviata' : 'Errore';\n        },\n      },\n    ],\n    columnDefs: [\n      {\n        targets: [0],\n        visible: false,\n        searchable: false,\n      },\n    ],\n  });\n\n  $('#message-table tbody').on('click', 'tr', function () {\n    if ($(this).hasClass('selected')) {\n      $(this).removeClass('selected');\n    } else {\n      table.$('tr.selected').removeClass('selected');\n      $(this).addClass('selected');\n    }\n  });\n});\n"],"names":["$","document","ready","on","table","row","data","url","type","message_history","uid","done","JSON","parse","ok","remove","draw","removeClass","addClass","attr","css","html","DataTable","language","ajax","dataSrc","ordering","columns","render","running","completed","columnDefs","targets","visible","searchable","this","hasClass"],"sourceRoot":""}
