#name: "Publish"
#
#permissions:
#  attestations: write
#  contents: read
#  id-token: write
#
#env:
#  PIP_CACHE_DIR: "~/.cache/pip"
#  PIP_DEFAULT_TIMEOUT: "60"
#  PIP_DISABLE_PIP_VERSION_CHECK: "on"
#  PIP_ROOT_USER_ACTION: "ignore"
#  POETRY_CACHE_DIR: "~/.cache/poetry"
#  POETRY_VIRTUALENVS_CREATE: "false"
#
#on:
#  push:
#    branches:
#      - "**"
#
#jobs:
#  ruff:
#    name: "Ruff"
#    runs-on: "ubuntu-latest"
#    steps:
#      - uses: actions/checkout@v4
#      - uses: ./.github/actions/setup-python
#        with:
#          python: "3.9"
#      - name: Run Ruff checker
#        run: ruff check --output-format=github ./
#      - name: Run Ruff formatter
#        run: ruff format --check ./
#
#  mypy:
#    name: "Mypy"
#    runs-on: "ubuntu-latest"
#    steps:
#      - uses: actions/checkout@v4
#      - uses: ./.github/actions/setup-python
#        with:
#          python: "3.9"
#      - name: Run Mypy
#        run: mypy ./
#
#  pytest:
#    name: "Pytest"
#    runs-on: "ubuntu-latest"
#    strategy:
#      matrix:
#        python-version: ["3.9", "3.10", "3.11", "3.12", "3.13"]
#    steps:
#      - uses: actions/checkout@v4
#      - uses: ./.github/actions/setup-python
#        with:
#          python: ${{ matrix.python-version }}
#      - name: Run Pytest
#        run: pytest ./
#
#  publish:
#    name: "Publish"
#    runs-on: "ubuntu-latest"
#    needs:
#      - ruff
#      - mypy
#      - pytest
#    steps:
#      - uses: actions/checkout@v4
#      - uses: ./.github/actions/setup-python
#        with:
#          python: "3.9"
#      - name: Update version for non-main branches
#        if: github.ref_name != 'main'
#        run: poetry version "$(poetry version -s).dev$((RANDOM % 9999999))"
#      - name: Build package
#        run: poetry build --no-interaction
#      - name: Publish package
#        uses: pypa/gh-action-pypi-publish@release/v1
#        with:
#          attestations: true
#          skip-existing: true
#          repository-url: ${{ github.ref_name == 'main' && 'https://upload.pypi.org/legacy/' || 'https://test.pypi.org/legacy/' }}
