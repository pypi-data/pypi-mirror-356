Metadata-Version: 2.4
Name: face-detection-sdk
Version: 1.0.0
Summary: ä¸€ä¸ªåŸºäºMediaPipeå’ŒYOLOçš„é¢éƒ¨æ£€æµ‹å’Œåˆ†æSDK
Home-page: https://github.com/yourusername/face-detection-sdk
Author: Your Name
Author-email: Your Name <your.email@example.com>
Maintainer-email: Your Name <your.email@example.com>
License: MIT
Project-URL: Homepage, https://github.com/yourusername/face-detection-sdk
Project-URL: Documentation, https://github.com/yourusername/face-detection-sdk/blob/main/README.md
Project-URL: Repository, https://github.com/yourusername/face-detection-sdk
Project-URL: Bug Tracker, https://github.com/yourusername/face-detection-sdk/issues
Keywords: face detection,computer vision,mediapipe,yolo,pose estimation
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: opencv-python>=4.5.0
Requires-Dist: numpy>=1.19.0
Requires-Dist: mediapipe>=0.8.0
Requires-Dist: ultralytics>=8.0.0
Requires-Dist: scipy>=1.7.0
Requires-Dist: matplotlib>=3.3.0
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.0; extra == "dev"
Requires-Dist: black>=21.0; extra == "dev"
Requires-Dist: flake8>=3.8; extra == "dev"
Requires-Dist: mypy>=0.800; extra == "dev"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# Face Detection SDK

ä¸€ä¸ªåŸºäºMediaPipeå’ŒYOLOçš„é¢éƒ¨æ£€æµ‹å’Œåˆ†æSDKï¼Œæä¾›é¢éƒ¨æ£€æµ‹ã€å§¿æ€ä¼°è®¡ã€è´¨é‡è¯„ä¼°ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **é¢éƒ¨æ£€æµ‹**: åŸºäºMediaPipeçš„é«˜ç²¾åº¦é¢éƒ¨æ£€æµ‹
- ğŸ“ **å§¿æ€ä¼°è®¡**: å®æ—¶å¤´éƒ¨å§¿æ€ï¼ˆåèˆªã€ä¿¯ä»°ã€æ»šè½¬ï¼‰ä¼°è®¡
- ğŸ­ **å£ç½©æ£€æµ‹**: åŸºäºYOLOçš„å£ç½©ä½©æˆ´æ£€æµ‹
- ğŸ“Š **è´¨é‡è¯„ä¼°**: å›¾åƒæ¸…æ™°åº¦ã€äº®åº¦ã€å¯¹æ¯”åº¦è¯„åˆ†
- ğŸ“ **è·ç¦»ä¼°è®¡**: åŸºäºç³è·çš„å•ç›®æµ‹è·
- ğŸ”„ **ç¨³å®šæ€§æ£€æµ‹**: é¢éƒ¨è¿åŠ¨ç¨³å®šæ€§åˆ†æ
- ğŸŒŸ **å›¾åƒå¢å¼º**: è‡ªåŠ¨äººè„¸äº®åº¦å¢å¼ºå’ŒèƒŒæ™¯å¤„ç†

## å®‰è£…

```bash
pip install face-detection-sdk
```

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
import cv2
from face_detection_sdk import FaceAnalyzer

# åˆå§‹åŒ–åˆ†æå™¨
analyzer = FaceAnalyzer(
    mask_model_path="path/to/your/mask_model.pt",  # å¯é€‰
    min_detection_confidence=0.7
)

# è¯»å–å›¾åƒ
cap = cv2.VideoCapture(0)

while True:
    ret, frame = cap.read()
    if not ret:
        break
    
    # åˆ†æå¸§
    results = analyzer.analyze_frame(frame)
    
    # å¤„ç†ç»“æœ
    for result in results:
        print(f"æ£€æµ‹åˆ°äººè„¸: {result.bbox}")
        print(f"å§¿æ€: Yaw={result.pose.yaw:.1f}Â°, Pitch={result.pose.pitch:.1f}Â°, Roll={result.pose.roll:.1f}Â°")
        print(f"å£ç½©: {'æ˜¯' if result.metrics.has_mask else 'å¦'}")
        print(f"ç¨³å®šæ€§: {'ç¨³å®š' if result.is_stable else 'ä¸ç¨³å®š'}")
        print(f"è·ç¦»: {result.distance}cm")
        
        # è·å–è´¨é‡è¯„åˆ†
        scores = analyzer.get_quality_scores(result.metrics)
        print(f"è´¨é‡è¯„åˆ†: æ¸…æ™°åº¦={scores['sharpness_score']}, äº®åº¦={scores['brightness_score']}, å¯¹æ¯”åº¦={scores['contrast_score']}")
    
    # æ˜¾ç¤ºç»“æœ
    cv2.imshow('Face Detection', frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
analyzer.release()
```

### é«˜çº§ä½¿ç”¨

```python
from face_detection_sdk import FaceAnalyzer, DetectionResult
import cv2
import numpy as np

# è‡ªå®šä¹‰å‚æ•°åˆå§‹åŒ–
analyzer = FaceAnalyzer(
    mask_model_path="best.pt",
    min_detection_confidence=0.8,
    min_tracking_confidence=0.8,
    stable_frames_threshold=5,
    motion_blur_threshold=80
)

def process_image(image_path: str):
    """å¤„ç†å•å¼ å›¾åƒ"""
    frame = cv2.imread(image_path)
    results = analyzer.analyze_frame(frame)
    
    for result in results:
        # ç»˜åˆ¶è¾¹ç•Œæ¡†
        x1, y1, x2, y2 = result.bbox
        cv2.rectangle(frame, (x1, y1), (x2, y2), (0, 255, 0), 2)
        
        # æ˜¾ç¤ºä¿¡æ¯
        info = f"Mask: {'Yes' if result.metrics.has_mask else 'No'}"
        cv2.putText(frame, info, (x1, y1-10), cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 255, 0), 2)
        
        # æ˜¾ç¤ºå§¿æ€ä¿¡æ¯
        pose_info = f"Y:{result.pose.yaw:.1f} P:{result.pose.pitch:.1f} R:{result.pose.roll:.1f}"
        cv2.putText(frame, pose_info, (x1, y2+20), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 255, 255), 1)
    
    return frame, results

# ä½¿ç”¨ç¤ºä¾‹
image_path = "test_image.jpg"
processed_frame, detection_results = process_image(image_path)
cv2.imshow("Processed Image", processed_frame)
cv2.waitKey(0)
```

## API æ–‡æ¡£

### FaceAnalyzer

ä¸»è¦çš„åˆ†æå™¨ç±»ï¼Œæä¾›é¢éƒ¨æ£€æµ‹å’Œåˆ†æåŠŸèƒ½ã€‚

#### åˆå§‹åŒ–å‚æ•°

- `mask_model_path` (str, optional): YOLOå£ç½©æ£€æµ‹æ¨¡å‹è·¯å¾„
- `min_detection_confidence` (float): æœ€å°æ£€æµ‹ç½®ä¿¡åº¦ï¼Œé»˜è®¤0.7
- `min_tracking_confidence` (float): æœ€å°è·Ÿè¸ªç½®ä¿¡åº¦ï¼Œé»˜è®¤0.7
- `stable_frames_threshold` (int): ç¨³å®šå¸§æ•°é˜ˆå€¼ï¼Œé»˜è®¤3
- `motion_blur_threshold` (float): è¿åŠ¨æ¨¡ç³Šé˜ˆå€¼ï¼Œé»˜è®¤100

#### ä¸»è¦æ–¹æ³•

- `analyze_frame(frame)`: åˆ†æå•å¸§å›¾åƒï¼Œè¿”å›æ£€æµ‹ç»“æœåˆ—è¡¨
- `get_quality_scores(metrics)`: è·å–è´¨é‡è¯„åˆ†
- `release()`: é‡Šæ”¾èµ„æº

### DetectionResult

æ£€æµ‹ç»“æœæ•°æ®ç±»ï¼ŒåŒ…å«æ‰€æœ‰æ£€æµ‹ä¿¡æ¯ã€‚

#### å±æ€§

- `bbox`: è¾¹ç•Œæ¡†åæ ‡ (x1, y1, x2, y2)
- `pose`: å§¿æ€ä¼°è®¡ç»“æœ (PoseEstimate)
- `metrics`: é¢éƒ¨æŒ‡æ ‡ (FaceMetrics)
- `is_stable`: æ˜¯å¦ç¨³å®š
- `distance`: ä¼°è®¡è·ç¦» (cm)
- `landmarks`: é¢éƒ¨å…³é”®ç‚¹åˆ—è¡¨

### FaceMetrics

é¢éƒ¨æŒ‡æ ‡æ•°æ®ç±»ã€‚

#### å±æ€§

- `sharpness`: æ¸…æ™°åº¦å€¼
- `brightness`: äº®åº¦å€¼
- `contrast`: å¯¹æ¯”åº¦å€¼
- `has_mask`: æ˜¯å¦æˆ´å£ç½©
- `motion_blur`: è¿åŠ¨æ¨¡ç³Šå€¼

## ä¾èµ–è¦æ±‚

- Python >= 3.7
- OpenCV >= 4.5.0
- NumPy >= 1.19.0
- MediaPipe >= 0.8.0
- Ultralytics >= 8.0.0
- SciPy >= 1.7.0
- Matplotlib >= 3.3.0

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒé¢éƒ¨æ£€æµ‹å’Œå§¿æ€ä¼°è®¡
- æ”¯æŒå£ç½©æ£€æµ‹
- æ”¯æŒå›¾åƒè´¨é‡è¯„ä¼°
- æ”¯æŒè·ç¦»ä¼°è®¡å’Œç¨³å®šæ€§æ£€æµ‹ 
