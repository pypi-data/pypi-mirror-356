(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(5155),s=a(2115),l=a(792),n=a(9509);let d=()=>"Company code:company_code:".split(";").filter(Boolean).map(e=>{let[r,a]=e.split(":"),[t,s]=a.split("=");return{displayName:r,paramName:t,value:s}});function o(){let[e,r]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),[i,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)([]),[u,y]=(0,s.useState)(""),[b,p]=(0,s.useState)(!0),[f,k]=(0,s.useState)(""),[v,w]=(0,s.useState)(d()),[j,N]=(0,s.useState)(!1),C=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=new URLSearchParams(window.location.search),r=e.get("key");r&&k(r);let a=e.get("model");a&&y(a)},[]);let P=()=>{var e;null==(e=C.current)||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{P()},[e]);let A=(0,s.useCallback)(async()=>{try{let e=await fetch("/v1/models");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();if(g(r.data||[]),r.data&&r.data.length>0){let e=r.data.map(e=>e.id);u&&e.includes(u)||y(r.data[0].id)}}catch(e){console.error("Error fetching models:",e)}finally{p(!1)}},[u]);(0,s.useEffect)(()=>{A()},[A]);let L=async()=>{if(!a.trim()||i||m)return;let t={role:"user",content:a};r(e=>[...e,t]),o(""),c(!0);{x(!0);let e={role:"assistant",content:""};r(r=>[...r,e])}try{var s,l,d;let a={"Content-Type":"application/json"};f.trim()&&(a.Authorization="Bearer ".concat(f.trim()));let o=v.reduce((e,r)=>({...e,[r.paramName]:r.value}),{}),i=await fetch("".concat(n.env.NEXT_PUBLIC_API_BASE||"","/v1/chat/completions"),{method:"POST",headers:a,body:JSON.stringify({model:u,messages:[...e,t],stream:!0,...o})});if(!i.ok){let e="Sorry, I encountered an error while processing your request. Please try again.",a=(await i.json()).error||"";e=401===i.status?a.includes("Authorization header required")?"\uD83D\uDD11 API key required. Please enter your API key in the header above.":a.includes("Invalid API key")?"\uD83D\uDD11 Invalid API key. Please check your API key and try again.":a.includes("Invalid authorization format")?"\uD83D\uDD11 API key format error. This shouldn't happen - please refresh the page.":"\uD83D\uDD11 Authentication failed: ".concat(a):400===i.status&&a.includes("Authorization")?"\uD83D\uDD11 API key error: ".concat(a):a?"Error: ".concat(a):"HTTP error! status: ".concat(i.status),r(r=>{let a=[...r];return a[a.length-1]={role:"assistant",content:e},a});return}{let e=null==(s=i.body)?void 0:s.getReader(),a=new TextDecoder,t="",n="";if(e)try{for(;;){let{done:s,value:o}=await e.read();if(s)break;for(let e of a.decode(o).split("\n"))if(e.startsWith("data: ")){let a=e.slice(6);if("[DONE]"===a)break;try{let e=null==(d=JSON.parse(a).choices)||null==(l=d[0])?void 0:l.delta;e&&(e.content&&(t+=e.content),e.reasoning&&(n+=e.reasoning),r(e=>{let r=[...e];return r[r.length-1]={role:"assistant",content:t,reasoning:n||void 0},r}))}catch(e){console.warn("Failed to parse streaming data:",e)}}}}finally{e.releaseLock()}}}catch(a){console.error("Error calling chat API:",a);let e={role:"assistant",content:"Sorry, I encountered a network error while processing your request. Please check your connection and try again."};r(r=>{let a=[...r];return a[a.length-1]=e,a})}finally{c(!1),x(!1)}};return(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Chat Assistant"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"model-select",className:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:inline",children:"Model:"}),b?(0,t.jsx)("div",{className:"w-24 h-7 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):(0,t.jsx)("select",{id:"model-select",value:u,onChange:e=>y(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent w-24 sm:w-32",disabled:i||m,children:h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.id},e.id))}),(0,t.jsx)("button",{onClick:A,disabled:b||i||m,className:"p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50",title:"Refresh models",children:(0,t.jsx)("svg",{className:"w-4 h-4 ".concat(b?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"api-key",className:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:inline",children:"API Key:"}),(0,t.jsx)("input",{id:"api-key",type:"password",value:f,onChange:e=>k(e.target.value),placeholder:"API key",className:"px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent w-32 sm:w-40",disabled:i||m})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>N(!j),className:"px-2 py-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 border border-gray-300 dark:border-gray-600 rounded-md hover:border-blue-300 dark:hover:border-blue-600 transition-colors duration-200 disabled:opacity-50",title:"Extra Parameters",disabled:i||m,children:[(0,t.jsxs)("svg",{className:"w-4 h-4 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,t.jsx)("span",{className:"hidden sm:inline ml-1",children:"Parameters"})]}),j&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-72 sm:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 sm:p-5 z-50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-5",children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Extra Parameters"}),(0,t.jsx)("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"space-y-4 sm:space-y-5",children:v.map((e,r)=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[(0,t.jsxs)("label",{className:"w-full sm:w-28 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.displayName,":"]}),(0,t.jsx)("input",{type:"text",value:e.value,onChange:a=>{let t=[...v];t[r]={...e,value:a.target.value},w(t)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter ".concat(e.displayName),disabled:i||m})]},r))})]})]}),(0,t.jsxs)("button",{onClick:()=>{r([])},disabled:i||m||0===e.length,className:"px-2 py-1 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 border border-gray-300 dark:border-gray-600 rounded-md hover:border-red-300 dark:hover:border-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",title:"Clear all messages",children:[(0,t.jsx)("svg",{className:"w-4 h-4 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,t.jsx)("span",{className:"hidden sm:inline ml-1",children:"Clear Chat"})]})]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[0===e.length&&(0,t.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-20",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCAC"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"How can I help you today?"}),(0,t.jsx)("p",{children:"Start a conversation by typing a message below."}),u&&(0,t.jsxs)("p",{className:"text-sm mt-2",children:["Using model: ",(0,t.jsx)("span",{className:"font-mono font-semibold",children:u})]})]}),e.map((r,a)=>(0,t.jsx)("div",{className:"flex ".concat("user"===r.role?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:"max-w-xs lg:max-w-md xl:max-w-lg px-4 py-2 rounded-lg ".concat("user"===r.role?"bg-blue-500 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-white border border-gray-200 dark:border-gray-700"),children:"user"===r.role?(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:r.content}):(0,t.jsxs)("div",{className:"prose dark:prose-invert max-w-none",children:[r.reasoning&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg border-l-4 border-blue-500",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"\uD83E\uDD14 Thinking:"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono",children:(0,t.jsx)(l.oz,{children:r.reasoning})})]}),m&&a===e.length-1&&(0,t.jsx)("span",{className:"inline-block w-2 h-4 bg-blue-500 ml-1 animate-pulse"}),r.content&&(0,t.jsx)(l.oz,{children:r.content})]})})},a)),i&&!m&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 text-gray-800 dark:text-white border border-gray-200 dark:border-gray-700 px-4 py-2 rounded-lg max-w-xs lg:max-w-md xl:max-w-lg",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,t.jsx)("div",{ref:C})]})}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-4 py-4",children:(0,t.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)("textarea",{value:a,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),L())},placeholder:m?"AI is responding...":"Type your message here...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",rows:1,style:{minHeight:"44px",maxHeight:"120px"},disabled:i||m})}),(0,t.jsxs)("button",{onClick:L,disabled:!a.trim()||i||m,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[i||m?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M14.4376 15.3703L12.3042 19.5292C11.9326 20.2537 10.8971 20.254 10.525 19.5297L4.24059 7.2971C3.81571 6.47007 4.65077 5.56156 5.51061 5.91537L18.5216 11.2692C19.2984 11.5889 19.3588 12.6658 18.6227 13.0704L14.4376 15.3703ZM14.4376 15.3703L5.09594 6.90886",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:m?"Streaming...":"Send"})]})]})})})]})}},9707:(e,r,a)=>{Promise.resolve().then(a.bind(a,1057))}},e=>{var r=r=>e(e.s=r);e.O(0,[411,441,684,358],()=>r(9707)),_N_E=e.O()}]);