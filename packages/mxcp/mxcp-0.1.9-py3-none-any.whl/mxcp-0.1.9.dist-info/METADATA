Metadata-Version: 2.4
Name: mxcp
Version: 0.1.9
Summary: MXCP: Model eXecution + Context Protocol
Author-email: RAW Labs SA <mxcp@raw-labs.com>
License-Expression: BUSL-1.1
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: mcp>=1.9.0
Requires-Dist: click>=8.1.7
Requires-Dist: pyyaml>=6.0.1
Requires-Dist: jsonschema
Requires-Dist: duckdb>=0.9.2
Requires-Dist: jinja2>=3.1.3
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: starlette>=0.27.0
Requires-Dist: makefun
Requires-Dist: pandas>=2.0.0
Requires-Dist: posthog>=3.0.0
Requires-Dist: dbt-core>=1.6.0
Requires-Dist: dbt-duckdb>=1.6.0
Requires-Dist: cel-python>=0.2.0
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: pytest-asyncio; extra == "dev"
Requires-Dist: pytest-cov; extra == "dev"
Requires-Dist: pytest-mock; extra == "dev"
Requires-Dist: pytest-timeout; extra == "dev"
Requires-Dist: aioresponses; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: isort; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Requires-Dist: hvac>=2.0.0; extra == "dev"
Requires-Dist: build; extra == "dev"
Requires-Dist: twine; extra == "dev"
Provides-Extra: vault
Requires-Dist: hvac>=2.0.0; extra == "vault"
Dynamic: license-file

# MXCP: Enterprise-Grade Data-to-AI Infrastructure

<div align="center">
  <a href="https://mxcp.dev"><img src="docs/mxcp-logo.png" alt="MXCP Logo" width="350"></a>
</div>

<div align="center">

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-BSL-green.svg)](https://github.com/raw-labs/mxcp/blob/main/LICENSE)

**The MCP server built for production: Transform your data into AI-ready interfaces with enterprise security, audit trails, and policy enforcement**

</div>

## üöÄ What Makes MXCP Different?

While other MCP servers focus on simple data access, MXCP is built for **production environments** where security, governance, and scalability matter:

- üîí **Enterprise Security**: Policy enforcement, audit logging, OAuth authentication
- ‚ö° **Developer Experience**: Go from SQL to AI interface in under 60 seconds
- üéØ **dbt Native**: Cache data locally with dbt, serve instantly via MCP
- üõ°Ô∏è **Production Ready**: Type safety, drift detection, comprehensive validation
- üìä **Data Governance**: Track every query, enforce access controls, mask sensitive data

## üéØ 60-Second Quickstart

Experience the power of MXCP in under a minute:

```bash
# 1. Install and create project (15 seconds)
pip install mxcp
mkdir my-data-api && cd my-data-api
mxcp init --bootstrap

# 2. Start serving your data (5 seconds)
mxcp serve

# 3. Connect to Claude Desktop (40 seconds)
# Add this to your Claude config:
{
  "mcpServers": {
    "my-data": {
      "command": "mxcp",
      "args": ["serve", "--transport", "stdio"],
      "cwd": "/path/to/my-data-api"
    }
  }
}
```

**Result**: You now have a type-safe, validated data API that Claude can use to query your data with full audit trails and policy enforcement.

## üí° Real-World Example: dbt + Data Caching

See how MXCP transforms data workflows with our COVID-19 example:

```bash
# Clone and run the COVID example
git clone https://github.com/raw-labs/mxcp.git
cd mxcp/examples/covid_owid

# Cache data locally with dbt (this is the magic!)
dbt run  # Transforms and caches OWID data locally

# Serve cached data via MCP
mxcp serve
```

**What just happened?**
1. **dbt models** fetch and transform COVID data from Our World in Data into DuckDB tables
2. **DuckDB** stores the transformed data locally for lightning-fast queries  
3. **MCP endpoints** query the DuckDB tables directly (no dbt syntax needed)
4. **Audit logs** track every query for compliance
5. **Policies** can enforce who sees what data

Ask Claude: *"Show me COVID vaccination rates in Germany vs France"* - and it queries the `covid_data` table instantly, with full audit trails.

## üõ°Ô∏è Enterprise Features That Set Us Apart

### Policy Enforcement
```yaml
# Control who can access what data
policies:
  input:
    - condition: "!('hr.read' in user.permissions)"
      action: deny
      reason: "Missing HR read permission"
  output:
    - condition: "user.role != 'admin'"
      action: filter_fields
      fields: ["salary", "ssn"]
```

### Audit Logging
```bash
# Track every query with enterprise-grade logging
mxcp log --since 1h --status error
mxcp log --tool employee_data --export-duckdb audit.db
```

### Authentication & Authorization
- OAuth integration (GitHub, Atlassian, custom)
- Role-based access control
- Fine-grained permissions
- Session management

## üèóÔ∏è Architecture: Built for Production

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   LLM Client    ‚îÇ    ‚îÇ      MXCP        ‚îÇ    ‚îÇ   Data Sources  ‚îÇ
‚îÇ  (Claude, etc)  ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Security      ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  (DB, APIs,     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ    Audit         ‚îÇ    ‚îÇ   Files, dbt)   ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ    Policies)     ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ Audit Logs   ‚îÇ
                       ‚îÇ (JSONL/DB)   ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

Unlike simple data connectors, MXCP provides:
- **Security layer** between LLMs and your data
- **Audit trail** for every query and result
- **Policy engine** for fine-grained access control
- **Type system** for LLM safety and validation
- **Development workflow** with testing and drift detection

## üöÄ Quick Start

```bash
# Install globally
pip install mxcp

# Install with Vault support (optional)
pip install "mxcp[vault]"

# Or develop locally
git clone https://github.com/raw-labs/mxcp.git && cd mxcp
python -m venv .venv && source .venv/bin/activate
pip install -e .
```

Try the included examples:
```bash
# Simple data queries
cd examples/earthquakes && mxcp serve

# Enterprise features (policies, audit, dbt)
cd examples/covid_owid && dbt run && mxcp serve
```

## üí° Key Features

### 1. Declarative Interface Definition
```yaml
# tools/analyze_sales.yml
mxcp: "1.0.0"
tool:
  name: analyze_sales
  description: "Analyze sales data with automatic caching"
  parameters:
    - name: region
      type: string
      description: "Sales region to analyze"
  return:
    type: object
    properties:
      total_sales: { type: number }
      top_products: { type: array }
  source:
    code: |
      -- This queries the table created by dbt
      SELECT 
        SUM(amount) as total_sales,
        array_agg(product) as top_products
      FROM sales_summary  -- Table created by dbt model
      WHERE region = $region
```

### 2. dbt Integration
```sql
-- models/sales_summary.sql (dbt model)
{{ config(materialized='table') }}

SELECT 
  region,
  product,
  SUM(amount) as amount,
  created_at::date as sale_date
FROM {{ source('raw', 'sales_data') }}
WHERE created_at >= current_date - interval '90 days'
GROUP BY region, product, sale_date
```

**Why this matters**: dbt creates optimized tables in DuckDB, MXCP endpoints query them directly - perfect separation of concerns with caching, transformations, and governance built-in.

### 3. Production-Ready Security
- **Authentication**: OAuth, API keys, session management
- **Authorization**: Role-based access, permission checking
- **Audit**: Every query logged with user context
- **Policies**: Dynamic data filtering and access control
- **Drift Detection**: Monitor schema changes across environments

## üõ†Ô∏è Core Concepts

### Tools, Resources, Prompts
Define your AI interface using MCP (Model Context Protocol) specs:
- **Tools** ‚Äî Functions that process data and return results
- **Resources** ‚Äî Data sources and caches  
- **Prompts** ‚Äî Templates for LLM interactions

### Project Structure
```
your-project/
‚îú‚îÄ‚îÄ mxcp-site.yml    # Project configuration
‚îú‚îÄ‚îÄ tools/           # Tool definitions
‚îú‚îÄ‚îÄ resources/       # Data sources
‚îú‚îÄ‚îÄ prompts/         # LLM templates
‚îî‚îÄ‚îÄ models/          # dbt transformations & caches
```

### CLI Commands
```bash
mxcp serve           # Start production MCP server
mxcp init            # Initialize new project
mxcp list            # List all endpoints
mxcp validate        # Check types, SQL, and references
mxcp test            # Run endpoint tests
mxcp dbt run         # Run dbt transformations
mxcp log             # Query audit logs
mxcp drift-check     # Check for schema changes
```

## üîå LLM Integration

MXCP implements the Model Context Protocol (MCP), making it compatible with:

- **Claude Desktop** ‚Äî Native MCP support
- **OpenAI-compatible tools** ‚Äî Via MCP adapters  
- **Custom integrations** ‚Äî Using the MCP specification

For specific setup instructions, see:
- [Earthquakes Example](https://github.com/raw-labs/mxcp/blob/main/examples/earthquakes/README.md) ‚Äî Complete Claude Desktop setup
- [COVID + dbt Example](https://github.com/raw-labs/mxcp/blob/main/examples/covid_owid/README.md) ‚Äî Advanced dbt integration

## üìö Documentation

### üìö Getting Started
- **[Overview](https://github.com/raw-labs/mxcp/blob/main/docs/getting-started/overview.md)** - Introduction to MXCP and its core architecture
- **[Quickstart Guide](https://github.com/raw-labs/mxcp/blob/main/docs/getting-started/quickstart.md)** - Get up and running quickly with examples

### üìñ Guides
- **[Configuration Guide](https://github.com/raw-labs/mxcp/blob/main/docs/guides/configuration.md)** - Complete configuration reference
- **[Authentication](https://github.com/raw-labs/mxcp/blob/main/docs/guides/authentication.md)** - OAuth setup and security
- **[Integrations](https://github.com/raw-labs/mxcp/blob/main/docs/guides/integrations.md)** - LLM platforms, dbt, and data sources
- **[Quality & Testing](https://github.com/raw-labs/mxcp/blob/main/docs/guides/quality.md)** - Validation, testing, and linting best practices

### ‚ö° Features
- **[Policy Enforcement](https://github.com/raw-labs/mxcp/blob/main/docs/features/policies.md)** - Access control and data filtering
- **[Drift Detection](https://github.com/raw-labs/mxcp/blob/main/docs/features/drift-detection.md)** - Monitor schema and endpoint changes
- **[Audit Logging](https://github.com/raw-labs/mxcp/blob/main/docs/features/auditing.md)** - Enterprise-grade logging and compliance

### üìã Reference
- **[CLI Reference](https://github.com/raw-labs/mxcp/blob/main/docs/reference/cli.md)** - Complete command-line interface documentation
- **[Type System](https://github.com/raw-labs/mxcp/blob/main/docs/reference/type-system.md)** - Data validation and type definitions
- **[Plugins](https://github.com/raw-labs/mxcp/blob/main/docs/reference/plugins.md)** - Custom Python extensions and UDFs

## ü§ù Contributing

We welcome contributions! See our [development guide](https://github.com/raw-labs/mxcp/blob/main/docs/contributors/dev-guide.md) to get started.

## üè¢ Enterprise Support

MXCP is developed by RAW Labs for production data-to-AI workflows. For enterprise support, custom integrations, or consulting:

- üìß Contact: [hello@raw-labs.com](mailto:hello@raw-labs.com)
- üåê Website: [www.raw-labs.com](https://www.raw-labs.com)

---

**Built for the modern data stack**: Combines dbt's modeling power, DuckDB's performance, and enterprise-grade security into a single AI-ready platform.
