(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9242],{2511:(e,t,n)=>{"use strict";var a,l;n.d(t,{A:()=>a,v:()=>l}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(a||(a={})),function(e){e.Having="HAVING",e.Where="WHERE"}(l||(l={}))},5815:(e,t,n)=>{"use strict";n.d(t,{SO:()=>o,Sg:()=>s,pA:()=>i});var a=n(87903),l=n(15151),r=n(2511);const i=(e,t,n=!1,a=!1)=>{const l={};return n?l.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(l.filters=[{col:e,op:a?"NOT IN":"IN",val:t}]),l},o=(e,t,n)=>{const a=[];return null!=t&&t!==n&&a.push({col:e,op:">=",val:t}),null!=n&&n!==t&&a.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&a.push({col:e,op:"==",val:n}),a.length?{filters:a}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(n,r)=>{if(null==n)return l.mu;if("boolean"==typeof n)return n?l.PU:l.qC;if(r===a.s.Boolean)try{return JSON.parse(String(n).toLowerCase())?l.PU:l.qC}catch{return l.qC}return"string"==typeof n?n:"bigint"==typeof n?String(n):e&&r===a.s.Temporal?e(n):t&&"number"==typeof n&&r===a.s.Numeric?t(n):String(n)}}},40570:(e,t,n)=>{"use strict";n.d(t,{e:()=>f,A:()=>m});var a=n(58168),l=n(64467),r=n(5544),i=n(96540),o=n(46942),s=n.n(o),u=n(82546),c=n(77540);function d(e){var t=e.className,n=e.direction,r=e.index,o=e.marginDirection,s=e.children,u=e.split,c=e.wrap,d=i.useContext(f),p=d.horizontalSize,m=d.verticalSize,v=d.latestIndex,h={};return"vertical"===n?r<v&&(h={marginBottom:p/(u?2:1)}):h=(0,a.A)((0,a.A)({},r<v&&(0,l.A)({},o,p/(u?2:1))),c&&{paddingBottom:m}),null==s?null:i.createElement(i.Fragment,null,i.createElement("div",{className:t,style:h},s),r<v&&u&&i.createElement("span",{className:"".concat(t,"-split"),style:h},u))}var f=i.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),p={small:8,middle:16,large:24};const m=function(e){var t,n=i.useContext(c.QO),o=n.getPrefixCls,m=n.space,v=n.direction,h=e.size,g=void 0===h?(null==m?void 0:m.size)||"small":h,S=e.align,y=e.className,w=e.children,F=e.direction,b=void 0===F?"horizontal":F,x=e.prefixCls,A=e.split,M=e.style,C=e.wrap,N=void 0!==C&&C,O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),E=i.useMemo((function(){return(Array.isArray(g)?g:[g,g]).map((function(e){return function(e){return"string"==typeof e?p[e]:e||0}(e)}))}),[g]),I=(0,r.A)(E,2),z=I[0],D=I[1],k=(0,u.A)(w,{keepEmpty:!0});if(0===k.length)return null;var Y=void 0===S&&"horizontal"===b?"center":S,H=o("space",x),$=s()(H,"".concat(H,"-").concat(b),(t={},(0,l.A)(t,"".concat(H,"-rtl"),"rtl"===v),(0,l.A)(t,"".concat(H,"-align-").concat(Y),Y),t),y),j="".concat(H,"-item"),J="rtl"===v?"marginLeft":"marginRight",L=0,P=k.map((function(e,t){return null!=e&&(L=t),i.createElement(d,{className:j,key:"".concat(j,"-").concat(t),direction:b,index:t,marginDirection:J,split:A,wrap:N},e)}));return i.createElement("div",(0,a.A)({className:$,style:(0,a.A)((0,a.A)({},N&&{flexWrap:"wrap",marginBottom:-D}),M)},O),i.createElement(f.Provider,{value:{horizontalSize:z,verticalSize:D,latestIndex:L}},P))}},62216:e=>{e.exports=function(e){return void 0===e}},64687:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,e:()=>r});var a=n(1932),l=n(96540);function r(e){var t=(0,l.useState)((function(){return(0,a.CN)("function"==typeof e?e():e,!0)})),n=t[1];return[t[0],(0,l.useCallback)((function(e){n("function"==typeof e?(0,a.jM)(e):(0,a.CN)(e))}),[])]}function i(e,t,n){var r=(0,l.useMemo)((function(){return(0,a.jM)(e)}),[e]);return(0,l.useReducer)(r,t,n)}},66861:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var a=n(62216),l=n.n(a),r=n(38221),i=n.n(r),o=n(96540),s=n(96453),u=n(58863),c=n(62952),d=n(86444),f=n(94465),p=n(78518),m=n(64687),v=n(15595),h=n(40570),g=n(27023),S=n(3175),y=n(10504),w=n(5815),F=n(67874),b=n(2445);function x(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return JSON.stringify(e.extraFormData)!==JSON.stringify(t.extraFormData)&&(e.extraFormData=t.extraFormData),JSON.stringify(e.filterState)!==JSON.stringify(t.filterState)&&(e.filterState={...e.filterState,...t.filterState}),e;default:return e}}const A=(0,s.I4)(h.A)`
  display: flex;
  align-items: center;
  width: 100%;

  .exclude-select {
    width: 80px;
    flex-shrink: 0;
  }

  &.ant-space {
    .ant-space-item {
      width: ${({inverseSelection:e,appSection:t})=>e&&t!==u.$s.FilterConfigModal?"auto":"100%"};
    }
  }
`,M=new Map;function C(e){const{coltypeMap:t,data:n,filterState:a,formData:r,height:s,isRefreshing:h,width:C,setDataMask:N,setHoveredFilter:O,unsetHoveredFilter:E,setFocusedFilter:I,unsetFocusedFilter:z,setFilterActive:D,appSection:k,showOverflow:Y,parentRef:H,inputRef:$,filterBarOrientation:j}=e,{enableEmptyFilter:J,creatable:L,multiSelect:P,showSearch:V,inverseSelection:R,defaultToFirstItem:q,searchAllOptions:T}=r,B=(0,o.useMemo)((()=>(0,c.A)(r.groupby).map(d.A)),[r.groupby]),[Q]=B,[W]=(0,o.useState)(t),[U,_]=(0,o.useState)(""),[G,K]=(0,m.A)(x,{extraFormData:{},filterState:a}),X=t[Q],Z=(0,o.useMemo)((()=>(0,w.Sg)({timeFormatter:(0,f.A)(n.map((e=>e[Q])))})),[n,Q]),[ee,te]=(0,o.useState)(!!l()(null==a?void 0:a.excludeFilterValues)||(null==a?void 0:a.excludeFilterValues)),ne=(0,o.useRef)(ee),ae=(0,o.useRef)(!1);(0,o.useEffect)((()=>{const e=M.get(r.nativeFilterId);ae.current=void 0!==e&&e!==j,j&&M.set(r.nativeFilterId,j)}),[j]);const le=(0,o.useCallback)((e=>{const t=J&&!R&&!(null!=e&&e.length),n=R&&null!=e&&e.length?(0,p.t)(" (excluded)"):"";K({type:"filterState",extraFormData:(0,w.pA)(Q,e,t,ee&&R),filterState:{...a,label:null!=e&&e.length?`${(e||[]).map((e=>Z(e,X))).join(", ")}${n}`:void 0,value:k===u.$s.FilterConfigModal&&q?void 0:e,excludeFilterValues:ee}})}),[k,Q,X,q,K,J,R,ee,JSON.stringify(a),Z]),re=k===u.$s.FilterConfigModal&&q,ie=(0,o.useMemo)((()=>i()((e=>{_(e),T&&K({type:"ownState",ownState:{coltypeMap:W,search:e}})}),g.Qs)),[K,W,T]),oe=(0,o.useCallback)((()=>{z(),ie("")}),[ie,z]),se=(0,o.useCallback)((e=>{const t=null===e?[null]:(0,c.A)(e);0===t.length?le(null):le(t)}),[le]),ue=0===n.length?(0,p.t)("No data"):(0,p.tn)("%s option","%s options",n.length,n.length),ce=(0,o.useMemo)((()=>{if(a.validateMessage)return(0,b.Y)(F.Mo,{status:a.validateStatus,children:a.validateMessage})}),[a.validateMessage,a.validateStatus]),de=(0,o.useMemo)((()=>[...new Set([...n.map((e=>e[Q]))])].map((e=>({label:Z(e,X),value:e,isNewOption:!1})))),[n,X,Q,Z]),fe=(0,o.useMemo)((()=>(!U||P||(0,S.Kz)(U,de,!0)||de.unshift({label:U,value:U,isNewOption:!0}),de)),[P,U,de]),pe=(0,o.useCallback)(((e,t)=>{const n=(0,S.qw)("label");return r.sortAscending?n(e,t):n(t,e)}),[r.sortAscending]);return(0,o.useEffect)((()=>{if(!ae.current)if(re)le(null);else if(void 0===a.value)if(q){const e=n[0]?B.map((e=>n[0][e])):null;void 0!==(null==e?void 0:e[0])&&le(e)}else null!=r&&r.defaultValue&&le(r.defaultValue);else le(a.value)}),[re,J,q,null==r?void 0:r.defaultValue,n,B,Q,R]),(0,o.useEffect)((()=>{N(G)}),[JSON.stringify(G)]),(0,o.useEffect)((()=>{var e;ne.current!==ee&&(K({type:"filterState",extraFormData:(0,w.pA)(Q,a.value,!(null!=(e=a.value)&&e.length),ee&&R),filterState:{...a,excludeFilterValues:ee}}),ne.current=ee)}),[ee]),(0,b.Y)(F.j3,{height:s,width:C,children:(0,b.Y)(F.JF,{validateStatus:a.validateStatus,extra:ce,children:(0,b.FD)(A,{appSection:k,inverseSelection:R,children:[k!==u.$s.FilterConfigModal&&R&&(0,b.Y)(v.l6,{className:"exclude-select",value:`${ee}`,options:[{value:"true",label:(0,p.t)("is not")},{value:"false",label:(0,p.t)("is")}],onChange:e=>{te("true"===e)}}),(0,b.Y)(v.l6,{name:r.nativeFilterId,allowClear:!0,allowNewOptions:!T&&!1!==L,allowSelectAll:!T,value:a.value||[],disabled:re,getPopupContainer:Y?()=>(null==H?void 0:H.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body,showSearch:V,mode:P?"multiple":"single",placeholder:ue,onClear:()=>ie(""),onSearch:ie,onBlur:oe,onFocus:I,onMouseEnter:O,onMouseLeave:E,onChange:se,ref:$,loading:h,oneLine:j===y.QI.Horizontal,invertSelection:R&&ee,options:fe,sortComparator:pe,onDropdownVisibleChange:D,className:"select-container"})]})})})}},67874:(e,t,n)=>{"use strict";n.d(t,{JF:()=>o,Mo:()=>s,YH:()=>r,j3:()=>i});var a=n(96453),l=n(86523);const r=0,i=a.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,o=(0,a.I4)(l.A)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,s=a.I4.div`
  color: ${({theme:e,status:t="error"})=>{var n;return null==(n=e.colors[t])?void 0:n.base}};
`},94465:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(53705),l=n(94387),r=n(73091);function i(e,t=!1){const n=t?a.DC:a.aL,i=n("%Y-%m-%d %H:%M:%S.%L"),o=n("%Y-%m-%d %H:%M:%S"),s=n("%Y-%m-%d %H:%M"),u=n("%Y-%m-%d %H:%M"),c=n("%Y-%m-%d"),d=n("%Y-%m-%d"),f=n("%Y"),{hasMillisecond:p,hasSecond:m,hasMinute:v,hasHour:h,isNotFirstDayOfMonth:g,isNotFirstMonth:S}=t?l.m:l.w;let y=f;return e.forEach((e=>{"bigint"!=typeof e&&(y===f&&S(e)&&(y=d),y===d&&g(e)&&(y=c),y===c&&h(e)&&(y=u),y===u&&v(e)&&(y=s),y===s&&m(e)&&(y=o),y===o&&p(e)&&(y=i))})),new r.A({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:y,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}}}]);