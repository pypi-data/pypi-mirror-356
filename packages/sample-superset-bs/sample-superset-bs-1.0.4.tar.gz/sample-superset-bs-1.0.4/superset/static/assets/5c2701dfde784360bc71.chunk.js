"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1916],{61573:(n,r,t)=>{function e(n,r){let t,e;if(void 0===r)for(const r of n)null!=r&&(void 0===t?r>=r&&(t=e=r):(t>r&&(t=r),e<r&&(e=r)));else{let a=-1;for(let o of n)null!=(o=r(o,++a,n))&&(void 0===t?o>=o&&(t=e=o):(t>o&&(t=o),e<o&&(e=o)))}return[t,e]}t.d(r,{A:()=>e})},91916:(n,r,t)=>{t.r(r),t.d(r,{default:()=>K});var e=t(96540),a=t(5556),o=t.n(a),i=t(61573),s=t(96453),u=t(62952),c=t(97119),l=t(71363),f=t(46957);function h(n,r,t,e,a){var o=n*n,i=o*n;return((1-3*n+3*o-i)*r+(4-6*o+3*i)*t+(1+3*n+3*o-3*i)*e+i*a)/6}const d=n=>()=>n;function g(n,r){var t=r-n;return t?function(n,r){return function(t){return n+t*r}}(n,t):d(isNaN(n)?r:n)}const p=function n(r){var t=function(n){return 1===(n=+n)?g:function(r,t){return t-r?function(n,r,t){return n=Math.pow(n,t),r=Math.pow(r,t)-n,t=1/t,function(e){return Math.pow(n+e*r,t)}}(r,t,n):d(isNaN(r)?t:r)}}(r);function e(n,r){var e=t((n=(0,f.Qh)(n)).r,(r=(0,f.Qh)(r)).r),a=t(n.g,r.g),o=t(n.b,r.b),i=g(n.opacity,r.opacity);return function(r){return n.r=e(r),n.g=a(r),n.b=o(r),n.opacity=i(r),n+""}}return e.gamma=n,e}(1);function m(n){return function(r){var t,e,a=r.length,o=new Array(a),i=new Array(a),s=new Array(a);for(t=0;t<a;++t)e=(0,f.Qh)(r[t]),o[t]=e.r||0,i[t]=e.g||0,s[t]=e.b||0;return o=n(o),i=n(i),s=n(s),e.opacity=1,function(n){return e.r=o(n),e.g=i(n),e.b=s(n),e+""}}}function y(n,r){var t,e=r?r.length:0,a=n?Math.min(e,n.length):0,o=new Array(a),i=new Array(e);for(t=0;t<a;++t)o[t]=k(n[t],r[t]);for(;t<e;++t)i[t]=r[t];return function(n){for(t=0;t<a;++t)i[t]=o[t](n);return i}}function v(n,r){var t=new Date;return n=+n,r=+r,function(e){return t.setTime(n*(1-e)+r*e),t}}function b(n,r){return n=+n,r=+r,function(t){return n*(1-t)+r*t}}function w(n,r){var t,e={},a={};for(t in null!==n&&"object"==typeof n||(n={}),null!==r&&"object"==typeof r||(r={}),r)t in n?e[t]=k(n[t],r[t]):a[t]=r[t];return function(n){for(t in e)a[t]=e[t](n);return a}}m((function(n){var r=n.length-1;return function(t){var e=t<=0?t=0:t>=1?(t=1,r-1):Math.floor(t*r),a=n[e],o=n[e+1],i=e>0?n[e-1]:2*a-o,s=e<r-1?n[e+2]:2*o-a;return h((t-e/r)*r,i,a,o,s)}})),m((function(n){var r=n.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*r),a=n[(e+r-1)%r],o=n[e%r],i=n[(e+1)%r],s=n[(e+2)%r];return h((t-e/r)*r,a,o,i,s)}}));var M=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N=new RegExp(M.source,"g");function A(n,r){var t,e,a,o=M.lastIndex=N.lastIndex=0,i=-1,s=[],u=[];for(n+="",r+="";(t=M.exec(n))&&(e=N.exec(r));)(a=e.index)>o&&(a=r.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(t=t[0])===(e=e[0])?s[i]?s[i]+=e:s[++i]=e:(s[++i]=null,u.push({i,x:b(t,e)})),o=N.lastIndex;return o<r.length&&(a=r.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?u[0]?function(n){return function(r){return n(r)+""}}(u[0].x):function(n){return function(){return n}}(r):(r=u.length,function(n){for(var t,e=0;e<r;++e)s[(t=u[e]).i]=t.x(n);return s.join("")})}function x(n,r){r||(r=[]);var t,e=n?Math.min(r.length,n.length):0,a=r.slice();return function(o){for(t=0;t<e;++t)a[t]=n[t]*(1-o)+r[t]*o;return a}}function k(n,r){var t,e,a=typeof r;return null==r||"boolean"===a?d(r):("number"===a?b:"string"===a?(t=(0,f.Ay)(r))?(r=t,p):A:r instanceof f.Ay?p:r instanceof Date?v:(e=r,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(r)?y:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?w:b:x))(n,r)}function S(n,r){return n=+n,r=+r,function(t){return Math.round(n*(1-t)+r*t)}}function D(n){return+n}var z=[0,1];function C(n){return n}function O(n,r){return(r-=n=+n)?function(t){return(t-n)/r}:(t=isNaN(r)?NaN:.5,function(){return t});var t}function R(n,r,t){var e=n[0],a=n[1],o=r[0],i=r[1];return a<e?(e=O(a,e),o=t(i,o)):(e=O(e,a),o=t(o,i)),function(n){return o(e(n))}}function X(n,r,t){var e=Math.min(n.length,r.length)-1,a=new Array(e),o=new Array(e),i=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++i<e;)a[i]=O(n[i],n[i+1]),o[i]=t(r[i],r[i+1]);return function(r){var t=(0,l.Ay)(n,r,1,e)-1;return o[t](a[t](r))}}function T(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}var $=t(71688),P=t(86093),Y=t(24626),j=t(78209),I=t(93391);function q(){var n=function(){var n,r,t,e,a,o,i=z,s=z,u=k,c=C;function l(){var n,r,t,u=Math.min(i.length,s.length);return c!==C&&(n=i[0],r=i[u-1],n>r&&(t=n,n=r,r=t),c=function(t){return Math.max(n,Math.min(r,t))}),e=u>2?X:R,a=o=null,f}function f(r){return null==r||isNaN(r=+r)?t:(a||(a=e(i.map(n),s,u)))(n(c(r)))}return f.invert=function(t){return c(r((o||(o=e(s,i.map(n),b)))(t)))},f.domain=function(n){return arguments.length?(i=Array.from(n,D),l()):i.slice()},f.range=function(n){return arguments.length?(s=Array.from(n),l()):s.slice()},f.rangeRound=function(n){return s=Array.from(n),u=S,l()},f.clamp=function(n){return arguments.length?(c=!!n||C,l()):c!==C},f.interpolate=function(n){return arguments.length?(u=n,l()):u},f.unknown=function(n){return arguments.length?(t=n,f):t},function(t,e){return n=t,r=e,l()}}()(C,C);return n.copy=function(){return r=n,q().domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown());var r},T.apply(n,arguments),function(n){var r=n.domain;return n.ticks=function(n){var t=r();return(0,c.Ay)(t[0],t[t.length-1],null==n?10:n)},n.tickFormat=function(n,t){var e=r();return function(n,r,t,e){var a,o=(0,c.sG)(n,r,t);switch((e=(0,$.A)(null==e?",f":e)).type){case"s":var i=Math.max(Math.abs(n),Math.abs(r));return null!=e.precision||isNaN(a=(0,P.A)(o,i))||(e.precision=a),(0,Y.s)(e,i);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(a=(0,j.A)(o,Math.max(Math.abs(n),Math.abs(r))))||(e.precision=a-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(a=(0,I.A)(o))||(e.precision=a-2*("%"===e.type))}return(0,Y.GP)(e)}(e[0],e[e.length-1],null==n?10:n,t)},n.nice=function(t){null==t&&(t=10);var e,a,o=r(),i=0,s=o.length-1,u=o[i],l=o[s],f=10;for(l<u&&(a=u,u=l,l=a,a=i,i=s,s=a);f-- >0;){if((a=(0,c.lq)(u,l,t))===e)return o[i]=u,o[s]=l,r(o);if(a>0)u=Math.floor(u/a)*a,l=Math.ceil(l/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,l=Math.floor(l*a)/a}e=a}return n},n}(n)}var E=t(2445);const H=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],Q={className:o().string,width:o().number,height:o().number,data:o().arrayOf(o().shape({y:o().number})).isRequired,bands:o().number,colors:o().arrayOf(o().string),colorScale:o().string,mode:o().string,offsetX:o().number,title:o().string,yDomain:o().arrayOf(o().number)},F={className:"",width:800,height:20,bands:H.length>>1,colors:H,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0};class G extends e.PureComponent{componentDidMount(){this.drawChart()}componentDidUpdate(){this.drawChart()}componentWillUnmount(){this.canvas=null}drawChart(){if(this.canvas){const{data:n,yDomain:r,width:t,height:e,bands:a,colors:o,colorScale:s,offsetX:u,mode:c}=this.props,l="change"===s?n.map((r=>({...r,y:r.y-n[0].y}))):n,f=this.canvas.getContext("2d");f.imageSmoothingEnabled=!1,f.clearRect(0,0,t,e),f.setTransform(1,0,0,1,0,0),f.translate(.5,.5);const h=t/l.length,d=Math.floor(Math.max(0,-u/h)),g=Math.floor(Math.min(l.length,d+t/h));if(d>l.length)return;const[p,m]=r||(0,i.A)(l,(n=>n.y)),y=q().domain([0,Math.max(-p,m)]).range([0,e]);let v,b,w=!1;for(let n=0;n<a;n+=1){f.fillStyle=o[a+n],b=(n+1-a)*e,y.range([a*e+b,b]);for(let n=d;n<g;n+=1)v=l[n].y,v<=0?w=!0:void 0!==v&&f.fillRect(u+n*h,y(v),h+1,y(0)-y(v))}if(w){"offset"===c&&(f.translate(0,e),f.scale(1,-1));for(let n=0;n<a;n+=1){f.fillStyle=o[a-n-1],b=(n+1-a)*e,y.range([a*e+b,b]);for(let n=d;n<g;n+=1)v=l[n].y,v>=0||f.fillRect(u+n*h,y(-v),h+1,y(0)-y(-v))}}}}render(){const{className:n,title:r,width:t,height:e}=this.props;return(0,E.FD)("div",{className:`horizon-row ${n}`,children:[(0,E.Y)("span",{className:"title",children:r}),(0,E.Y)("canvas",{ref:n=>{this.canvas=n},width:t,height:e})]})}}G.propTypes=Q,G.defaultProps=F;const U=G,V={className:o().string,width:o().number,height:o().number,seriesHeight:o().number,data:o().arrayOf(o().shape({key:o().arrayOf(o().string),values:o().arrayOf(o().shape({y:o().number}))})).isRequired,bands:o().number,colors:o().arrayOf(o().string),colorScale:o().string,mode:o().string,offsetX:o().number},B={className:"",width:800,height:600,seriesHeight:20,bands:Math.floor(H.length/2),colors:H,colorScale:"series",mode:"offset",offsetX:0},W=s.I4.div`
  ${({theme:n})=>`\n    .superset-legacy-chart-horizon {\n      overflow: auto;\n      position: relative;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row {\n      border-bottom: solid 1px ${n.colors.grayscale.light2};\n      border-top: 0;\n      padding: 0;\n      margin: 0;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row span.title {\n      position: absolute;\n      color: ${n.colors.grayscale.dark1};\n      font-size: ${n.typography.sizes.s}px;\n      margin: 0;\n    }\n  `}
`;class J extends e.PureComponent{render(){const{className:n,width:r,height:t,data:e,seriesHeight:a,bands:o,colors:s,colorScale:c,mode:l,offsetX:f}=this.props;let h;if("overall"===c){const n=e.reduce(((n,r)=>n.concat(r.values)),[]);h=(0,i.A)(n,(n=>n.y))}return(0,E.Y)(W,{children:(0,E.Y)("div",{className:`superset-legacy-chart-horizon ${n}`,style:{height:t},children:e.map((n=>(0,E.Y)(U,{width:r,height:a,title:(0,u.A)(n.key).join(", "),data:n.values,bands:o,colors:s,colorScale:c,mode:l,offsetX:f,yDomain:h},n.key)))})})}}J.propTypes=V,J.defaultProps=B;const K=J}}]);