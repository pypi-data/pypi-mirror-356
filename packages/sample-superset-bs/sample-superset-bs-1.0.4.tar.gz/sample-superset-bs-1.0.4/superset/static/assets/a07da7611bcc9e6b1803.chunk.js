"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8334],{562:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(85861),i=t(46920),r=t(40563),s=t(96540),o=t(78518),l=t(2445);const d=function({show:e,onHide:a,title:t,onSave:d,children:u,initialValues:c={},formSubmitHandler:g,bodyStyle:p={},requiredFields:m=[]}){const[h]=r.lV.useForm(),[P,y]=(0,s.useState)(!1),b=(0,s.useCallback)((()=>{h.resetFields(),y(!1)}),[h]),[v,E]=(0,s.useState)(!0),S=(0,s.useCallback)((()=>{b(),a()}),[a,b]),f=(0,s.useCallback)((()=>{b(),d()}),[d,b]),A=(0,s.useCallback)((async e=>{try{y(!0),await g(e),f()}catch(e){console.error(e)}finally{y(!1)}}),[g,f]),_=()=>{const e=h.getFieldsError().some((({errors:e})=>e.length)),a=h.getFieldsValue(),t=m.some((e=>!a[e]));E(e||t)};return(0,l.Y)(n.Ay,{show:e,title:t,onHide:S,bodyStyle:p,footer:(0,l.FD)(l.FK,{children:[(0,l.Y)(i.A,{buttonStyle:"secondary","data-test":"modal-cancel-button",onClick:S,children:(0,o.t)("Cancel")}),(0,l.Y)(i.A,{buttonStyle:"primary",htmlType:"submit",onClick:()=>h.submit(),"data-test":"form-modal-save-button",disabled:P||v,children:P?(0,o.t)("Saving..."):(0,o.t)("Save")})]}),children:(0,l.Y)(r.lV,{form:h,layout:"vertical",onFinish:A,initialValues:c,onValuesChange:_,onFieldsChange:_,children:"function"==typeof u?u(h):u})})}},8960:(e,a,t)=>{var n=t(30327);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},11447:(e,a,t)=>{var n=t(17991),i=t(8960);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var r=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(r))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(r<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var s=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(s))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(s<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var o=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),d=Boolean(e.hideEllipsis),u=d?0:1,c=[],g=i.createPageFunctionFactory(e);if(l||c.push(i.createFirstPageLink(e)),o||c.push(i.createPreviousPageLink(e)),1+2*u+2*s+2*r>=a){var p=n.createRange(1,a).map(g);c.push.apply(c,p)}else{var m=r,h=n.createRange(1,m).map(g),P=a+1-r,y=a,b=n.createRange(P,y).map(g),v=Math.min(Math.max(t-s,m+u+1),P-u-2*s-1),E=v+2*s,S=n.createRange(v,E).map(g);if(c.push.apply(c,h),!d){var f=v-1,A=(f===m+1?g:i.createFirstEllipsis)(f);c.push(A)}if(c.push.apply(c,S),!d){var _=E+1,T=(_===P-1?g:i.createSecondEllipsis)(_);c.push(T)}c.push.apply(c,b)}return o||c.push(i.createNextPageLink(e)),l||c.push(i.createLastPageLink(e)),c};var r=t(30327);a.ITEM_TYPES=r.ITEM_TYPES,a.ITEM_KEYS=r.ITEM_KEYS},17991:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},18575:(e,a,t)=>{a.w$=a.uv=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i=o(t(96540)),r=o(t(5556)),s=t(11447);function o(e){return e&&e.__esModule?e:{default:e}}a.uv=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,o=void 0===t?"div":t,l=function(e){var t=e.currentPage,r=e.totalPages,l=e.boundaryPagesRange,d=e.siblingPagesRange,u=e.hideEllipsis,c=e.hidePreviousAndNextPageLinks,g=e.hideFirstAndLastPageLinks,p=e.onChange,m=e.disabled,h=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),P=(0,s.getPaginationModel)({currentPage:t,totalPages:r,boundaryPagesRange:l,siblingPagesRange:d,hideEllipsis:u,hidePreviousAndNextPageLinks:c,hideFirstAndLastPageLinks:g}),y=function(e,a,t){return function(r){var s,o,l,d=e[r.type],u=(o=(s=r).value,l=s.isDisabled,function(){!l&&t&&a!==o&&t(o)});return i.default.createElement(d,n({onClick:u},r))}}(a,t,p);return i.default.createElement(o,h,P.map((function(e){return y(n({},e,{isDisabled:!!m}))})))};return l.propTypes={currentPage:r.default.number.isRequired,totalPages:r.default.number.isRequired,boundaryPagesRange:r.default.number,siblingPagesRange:r.default.number,hideEllipsis:r.default.bool,hidePreviousAndNextPageLinks:r.default.bool,hideFirstAndLastPageLinks:r.default.bool,onChange:r.default.func,disabled:r.default.bool},l},a.w$=s.ITEM_TYPES},30327:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},38736:(e,a,t)=>{t.d(a,{I:()=>o});var n=t(35742),i=t(78518),r=t(58561),s=t.n(r);const o=async({endpoint:e,pageSize:a=100,setData:t,filters:r,setLoadingState:o,loadingKey:l,addDangerToast:d,errorMessage:u="Error while fetching data",mapResult:c=e=>e})=>{try{const i=async t=>{const i={page_size:a,page:t};r&&(i.filters=r);const o=s().encode(i),l=await n.A.get({endpoint:`${e}?q=${o}`});return{count:l.json.count,results:l.json.result.map(c)}},o=await i(0),l=o.count,d=o.results;if(a>=l)return void t(d);const u=Math.ceil(l/a),g=Array.from({length:u-1},((e,a)=>i(a+1))),p=await Promise.all(g);t([...d,...p.flatMap((e=>e.results))])}catch(e){d((0,i.t)(u))}finally{o((e=>"boolean"!=typeof e&&{...e,[l]:!1}))}}},50217:(e,a,t)=>{t.d(a,{A:()=>n.A,V:()=>n.V});var n=t(54016)},51383:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var n=t(96540),i=t(96453),r=t(78518),s=t(35742),o=t(17437),l=t(50500),d=t(5261),u=t(562);const c=async e=>s.A.post({endpoint:"/api/v1/security/roles/",jsonPayload:{name:e}}),g=async(e,a)=>s.A.post({endpoint:`/api/v1/security/roles/${e}/permissions`,jsonPayload:{permission_view_menu_ids:a}}),p=async(e,a)=>s.A.put({endpoint:`/api/v1/security/roles/${e}/users`,jsonPayload:{user_ids:a}}),m=async(e,a)=>s.A.put({endpoint:`/api/v1/security/roles/${e}/groups`,jsonPayload:{group_ids:a}}),h=async(e,a)=>s.A.put({endpoint:`/api/v1/security/roles/${e}`,jsonPayload:{name:a}});var P=t(40563),y=t(28990),b=t(90868),v=t(49756),E=t(97560),S=t(2445);const f=()=>(0,S.Y)(P.eI,{name:"roleName",label:(0,r.t)("Role Name"),rules:[{required:!0,message:(0,r.t)("Role name is required")}],children:(0,S.Y)(b.pd,{name:"roleName","data-test":"role-name-input"})}),A=({permissions:e})=>(0,S.Y)(P.eI,{name:"rolePermissions",label:(0,r.t)("Permissions"),children:(0,S.Y)(y.A,{mode:"multiple",name:"rolePermissions",options:e.map((e=>({label:e.label,value:e.id}))),getPopupContainer:e=>e.closest(".antd5-modal-content"),"data-test":"permissions-select"})}),_=({addDangerToast:e,loading:a})=>(0,S.Y)(P.eI,{name:"roleUsers",label:(0,r.t)("Users"),children:(0,S.Y)(v.A,{name:"roleUsers",mode:"multiple",placeholder:(0,r.t)("Select users"),options:(a,t,n)=>(0,E.cm)(a,t,n,e),loading:a,"data-test":"roles-select"})}),T=({groups:e})=>(0,S.Y)(P.eI,{name:"roleGroups",label:(0,r.t)("Groups"),children:(0,S.Y)(y.A,{mode:"multiple",name:"roleGroups",options:e.map((e=>({label:e.name,value:e.id}))),"data-test":"groups-select"})}),I=function({show:e,onHide:a,onSave:t,permissions:n}){const{addDangerToast:i,addSuccessToast:s}=(0,d.Yf)();return(0,S.Y)(u.A,{show:e,onHide:a,title:(0,r.t)("Add Role"),onSave:t,formSubmitHandler:async e=>{try{var a;const{json:t}=await c(e.roleName);(null==(a=e.rolePermissions)?void 0:a.length)>0&&await g(t.id,e.rolePermissions),s((0,r.t)("The role has been created successfully."))}catch(e){throw i((0,r.t)("There was an error creating the role. Please, try again.")),e}},requiredFields:["roleName"],initialValues:{},children:(0,S.FD)(S.FK,{children:[(0,S.Y)(f,{}),(0,S.Y)(A,{permissions:n})]})})};var w=t(48327),L=t(50217),Y=t(38736);const N={edit:{key:"edit",name:(0,r.t)("Edit Role")},users:{key:"users",name:(0,r.t)("Users")}},k=[{accessor:"first_name",Header:"First Name"},{accessor:"last_name",Header:"Last Name"},{accessor:"username",Header:"User Name"},{accessor:"email",Header:"Email"},{accessor:"active",Header:"Is Active?",Cell:({cell:e})=>e.value?"Yes":"No"}],D=function({show:e,onHide:a,role:t,onSave:i,permissions:s,groups:o}){const{id:l,name:c,permission_ids:P,user_ids:y,group_ids:b}=t,[v,E]=(0,n.useState)(N.edit.key),{addDangerToast:I,addSuccessToast:D}=(0,d.Yf)(),[R,C]=(0,n.useState)([]),[F,M]=(0,n.useState)(!0),K=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(!y.length)return C([]),void M(!1);const e=[{col:"id",opr:"in",value:y}];(0,Y.I)({endpoint:"/api/v1/security/users/",pageSize:100,setData:C,filters:e,setLoadingState:e=>M(e),loadingKey:"roleUsers",addDangerToast:I,errorMessage:(0,r.t)("There was an error loading users."),mapResult:e=>({id:e.id,username:e.username})})}),[y]),(0,n.useEffect)((()=>{if(!F&&K.current&&R.length>=0){const e=R.map((e=>({value:e.id,label:e.username})));K.current.setFieldsValue({roleUsers:e})}}),[F,R]);const x={roleName:c,rolePermissions:P,roleUsers:(null==R?void 0:R.map((e=>({value:e.id,label:e.username}))))||[],roleGroups:b};return(0,S.Y)(u.A,{show:e,onHide:a,title:(0,r.t)("Edit Role"),onSave:i,formSubmitHandler:async e=>{try{var a;const t=(null==(a=e.roleUsers)?void 0:a.map((e=>e.value)))||[];await Promise.all([h(l,e.roleName),g(l,e.rolePermissions),p(l,t),m(l,e.roleGroups)]),D((0,r.t)("The role has been updated successfully."))}catch(e){throw I((0,r.t)("There was an error updating the role. Please, try again.")),e}},initialValues:x,bodyStyle:{height:"400px"},requiredFields:["roleName"],children:e=>(K.current=e,(0,S.FD)(w.Ay,{activeKey:v,onChange:e=>E(e),children:[(0,S.Y)(w.Ay.TabPane,{tab:N.edit.name,forceRender:!0,children:(0,S.FD)(S.FK,{children:[(0,S.Y)(f,{}),(0,S.Y)(A,{permissions:s}),(0,S.Y)(_,{addDangerToast:I,loading:F}),(0,S.Y)(T,{groups:o})]})},N.edit.key),(0,S.Y)(w.Ay.TabPane,{tab:N.users.name,children:(0,S.Y)(L.A,{columns:k,data:R,emptyWrapperType:L.V.Small})},N.users.key)]}))})},R=function({role:e,show:a,onHide:t,onSave:n}){const{name:i,permission_ids:s}=e,{addDangerToast:o,addSuccessToast:l}=(0,d.Yf)();return(0,S.Y)(u.A,{show:a,onHide:t,title:(0,r.t)("Duplicate role %(name)s",{name:i}),onSave:n,formSubmitHandler:async e=>{try{const{json:a}=await c(e.roleName);s.length>0&&await g(a.id,s),l((0,r.t)("The role has been duplicated successfully."))}catch(e){throw o((0,r.t)("There was an error duplicating the role. Please, try again.")),e}},requiredFields:["roleName"],initialValues:{},children:(0,S.Y)(f,{})})};var C,F=t(51713),M=t(83691),K=t(43849),x=t(37020),$=t(63358),G=t(65256),H=t(67073);!function(e){e.ADD="add",e.EDIT="edit",e.DUPLICATE="duplicate"}(C||(C={}));const U=(0,d.Ay)((function({addDangerToast:e,addSuccessToast:a,user:t}){const d=(0,i.DP)(),{state:{loading:u,resourceCount:c,resourceCollection:g,bulkSelectEnabled:p},fetchData:m,refreshData:h,toggleBulkSelect:P}=(0,l.RU)("security/roles/search",(0,r.t)("Role"),e,!1),[y,b]=(0,n.useState)({edit:!1,add:!1,duplicate:!1}),v=e=>b((a=>({...a,[e]:!0}))),f=e=>b((a=>({...a,[e]:!1}))),[A,_]=(0,n.useState)(null),[T,w]=(0,n.useState)(null),[L,N]=(0,n.useState)([]),[k,U]=(0,n.useState)([]),[j,O]=(0,n.useState)({permissions:!0,groups:!0}),V=(0,n.useMemo)((()=>(0,G.N6)(t)),[t]),B=(0,n.useCallback)((()=>{(0,Y.I)({endpoint:"/api/v1/security/permissions-resources/",setData:N,setLoadingState:O,loadingKey:"permissions",addDangerToast:e,errorMessage:"Error while fetching permissions",mapResult:({permission:e,view_menu:a,id:t})=>({label:`${e.name.replace(/_/g," ")} ${a.name.replace(/_/g," ")}`,value:`${e.name}__${a.name}`,id:t})})}),[e]),z=(0,n.useCallback)((()=>{(0,Y.I)({endpoint:"/api/v1/security/groups/",setData:U,setLoadingState:O,loadingKey:"groups",addDangerToast:e,errorMessage:(0,r.t)("Error while fetching groups")})}),[e]);(0,n.useEffect)((()=>{B()}),[B]),(0,n.useEffect)((()=>{z()}),[z]);const q=[{id:"name",desc:!0}],W=(0,n.useMemo)((()=>[{accessor:"name",id:"name",Header:(0,r.t)("Name"),Cell:({row:{original:{name:e}}})=>(0,S.Y)("span",{children:e})},{accessor:"user_ids",id:"user_ids",Header:(0,r.t)("Users"),hidden:!0,Cell:({row:{original:e}})=>e.user_ids.join(", ")},{accessor:"group_ids",id:"group_ids",Header:(0,r.t)("Groups"),hidden:!0,Cell:({row:{original:e}})=>e.groups_ids.join(", ")},{accessor:"permission_ids",id:"permission_ids",Header:(0,r.t)("Permissions"),hidden:!0,Cell:({row:{original:e}})=>e.permission_ids.join(", ")},{Cell:({row:{original:e}})=>{const a=V?[{label:"role-list-edit-action",tooltip:(0,r.t)("Edit role"),placement:"bottom",icon:"EditOutlined",onClick:()=>{_(e),v(C.EDIT)}},{label:"role-list-duplicate-action",tooltip:(0,r.t)("Duplicate role"),placement:"bottom",icon:"CopyOutlined",onClick:()=>{_(e),v(C.DUPLICATE)}},{label:"role-list-delete-action",tooltip:(0,r.t)("Delete role"),placement:"bottom",icon:"DeleteOutlined",onClick:()=>w(e)}]:[];return(0,S.Y)(M.A,{actions:a})},Header:(0,r.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!V,size:"xl"}]),[V]),X=[];V&&X.push({name:(0,S.FD)(S.FK,{children:[(0,S.Y)(H.F.PlusOutlined,{iconColor:d.colors.primary.light5,iconSize:"m",css:o.AH`
                margin: auto ${2*d.gridUnit}px auto 0;
                vertical-align: text-top;
              `}),(0,r.t)("Role")]}),buttonStyle:"primary",onClick:()=>{v(C.ADD)},loading:j.permissions,"data-test":"add-role-button"},{name:(0,r.t)("Bulk select"),onClick:P,buttonStyle:"secondary"});const J=(0,n.useMemo)((()=>[{Header:(0,r.t)("Name"),key:"name",id:"name",input:"search",operator:K.t.Contains},{Header:(0,r.t)("Users"),key:"user_ids",id:"user_ids",input:"select",operator:K.t.RelationOneMany,unfilteredLabel:(0,r.t)("All"),fetchSelects:async(a,t,n)=>(0,E.cm)(a,t,n,e)},{Header:(0,r.t)("Permissions"),key:"permission_ids",id:"permission_ids",input:"select",operator:K.t.RelationOneMany,unfilteredLabel:(0,r.t)("All"),selects:null==L?void 0:L.map((e=>({label:e.label,value:e.id}))),loading:j.permissions},{Header:(0,r.t)("Groups"),key:"group_ids",id:"group_ids",input:"select",operator:K.t.RelationOneMany,unfilteredLabel:(0,r.t)("All"),selects:null==k?void 0:k.map((e=>({label:e.name,value:e.id}))),loading:j.groups}]),[L,k,j.groups,j.permissions]),Q={title:(0,r.t)("No roles yet"),image:"filter-results.svg",...V&&{buttonAction:()=>{v(C.ADD)},buttonText:(0,S.FD)(S.FK,{children:[(0,S.Y)(H.F.PlusOutlined,{iconColor:d.colors.primary.light5,iconSize:"m",css:o.AH`
              margin: auto ${2*d.gridUnit}px auto 0;
              vertical-align: text-top;
            `}),(0,r.t)("Role")]})}};return(0,S.FD)(S.FK,{children:[(0,S.Y)(F.A,{name:(0,r.t)("List Roles"),buttons:X}),(0,S.Y)(I,{onHide:()=>f(C.ADD),show:y.add,onSave:()=>{h(),f(C.ADD)},permissions:L}),y.edit&&A&&(0,S.Y)(D,{role:A,show:y.edit,onHide:()=>f(C.EDIT),onSave:()=>{h(),f(C.EDIT)},permissions:L,groups:k}),y.duplicate&&A&&(0,S.Y)(R,{role:A,show:y.duplicate,onHide:()=>f(C.DUPLICATE),onSave:()=>{h(),f(C.DUPLICATE)}}),T&&(0,S.Y)(x.A,{description:(0,r.t)("This action will permanently delete the role."),onConfirm:()=>{T&&(async({id:t,name:n})=>{try{await s.A.delete({endpoint:`/api/v1/security/roles/${t}`}),h(),w(null),a((0,r.t)("Deleted role: %s",n))}catch(a){e((0,r.t)("There was an issue deleting %s",n))}})(T)},onHide:()=>w(null),open:!0,title:(0,r.t)("Delete Role?")}),(0,S.Y)($.A,{title:(0,r.t)("Please confirm"),description:(0,r.t)("Are you sure you want to delete the selected roles?"),onConfirm:async t=>{const n=[];await Promise.all(t.map((async a=>{try{await s.A.delete({endpoint:`api/v1/security/roles/${a.id}`}),n.push(a.name)}catch(t){e((0,r.t)("Error deleting %s",a.name))}}))),n.length>0&&a((0,r.t)("Deleted roles: %s",n.join(", "))),h()},children:t=>{const n=V?[{key:"delete",name:(0,r.t)("Delete"),onSelect:t,type:"danger"}]:[];return(0,S.Y)(K.A,{className:"role-list-view",columns:W,count:c,data:g,fetchData:m,filters:J,initialSort:q,loading:u,pageSize:25,bulkActions:n,bulkSelectEnabled:p,disableBulkSelect:P,addDangerToast:e,addSuccessToast:a,emptyState:Q,refreshData:h})}})]})}))},54016:(e,a,t)=>{t.d(a,{A:()=>b,V:()=>n});var n,i=t(2404),r=t.n(i),s=t(96540),o=t(96453),l=t(78518),d=t(32885),u=t(641),c=t(47251),g=t(73204),p=t(2445);!function(e){e.Default="Default",e.Small="Small"}(n||(n={}));const m=o.I4.div`
  margin: ${({theme:e})=>40*e.gridUnit}px 0;
`,h=o.I4.div`
  ${({scrollTable:e,theme:a})=>e&&`\n    flex: 1 1 auto;\n    margin-bottom: ${4*a.gridUnit}px;\n    overflow: auto;\n  `}

  .table-row {
    ${({theme:e,small:a})=>!a&&`height: ${11*e.gridUnit-1}px;`}

    .table-cell {
      ${({theme:e,small:a})=>a&&`\n        padding-top: ${e.gridUnit+1}px;\n        padding-bottom: ${e.gridUnit+1}px;\n        line-height: 1.45;\n      `}
    }
  }

  th[role='columnheader'] {
    z-index: 1;
    border-bottom: ${({theme:e})=>`${e.gridUnit-2}px solid ${e.colors.grayscale.light2}`};
    ${({small:e})=>e&&"padding-bottom: 0;"}
  }
`,P=o.I4.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: ${({theme:e})=>e.colors.grayscale.light5};

  ${({isPaginationSticky:e})=>e&&"\n        position: sticky;\n        bottom: 0;\n        left: 0;\n    "};

  .row-count-container {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
`,y=({columns:e,data:a,pageSize:t,totalCount:i=a.length,initialPageIndex:o,initialSortBy:y=[],loading:b=!1,withPagination:v=!0,emptyWrapperType:E=n.Default,noDataText:S,showRowCount:f=!0,serverPagination:A=!1,columnsForWrapText:_,onServerPagination:T=()=>{},scrollTopOnPagination:I=!1,...w})=>{const L={pageSize:null!=t?t:10,pageIndex:null!=o?o:0,sortBy:y},{getTableProps:Y,getTableBodyProps:N,headerGroups:k,page:D,rows:R,prepareRow:C,pageCount:F,gotoPage:M,state:{pageIndex:K,pageSize:x,sortBy:$}}=(0,d.useTable)({columns:e,data:a,initialState:L,manualPagination:A,manualSortBy:A,pageCount:Math.ceil(i/L.pageSize)},d.useFilters,d.useSortBy,d.usePagination),G=v?D:R;let H;switch(E){case n.Small:H=({children:e})=>(0,p.Y)(p.FK,{children:e});break;case n.Default:default:H=({children:e})=>(0,p.Y)(m,{children:e})}const U=!b&&0===G.length,j=F>1&&v,O=(0,s.useRef)(null);return(0,s.useEffect)((()=>{A&&K!==L.pageIndex&&T({pageIndex:K})}),[K]),(0,s.useEffect)((()=>{A&&!r()($,L.sortBy)&&T({pageIndex:0,sortBy:$})}),[$]),(0,p.FD)(p.FK,{children:[(0,p.FD)(h,{...w,ref:O,children:[(0,p.Y)(g.A,{getTableProps:Y,getTableBodyProps:N,prepareRow:C,headerGroups:k,rows:G,columns:e,loading:b,columnsForWrapText:_}),U&&(0,p.Y)(H,{children:S?(0,p.Y)(u.S,{image:u.S.PRESENTED_IMAGE_SIMPLE,description:S}):(0,p.Y)(u.S,{image:u.S.PRESENTED_IMAGE_SIMPLE})})]}),j&&(0,p.FD)(P,{className:"pagination-container",isPaginationSticky:w.isPaginationSticky,children:[(0,p.Y)(c.A,{totalPages:F||0,currentPage:F?K+1:0,onChange:e=>(e=>{var a;I&&(null==O||null==(a=O.current)||a.scroll(0,0)),M(e)})(e-1),hideFirstAndLastPageLinks:!0}),f&&(0,p.Y)("div",{className:"row-count-container",children:!b&&(0,l.t)("%s-%s of %s",x*K+(D.length&&1),x*K+D.length,i)})]})]})},b=(0,s.memo)(y)},83691:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(96453),i=t(19129),r=t(67073),s=t(2445);const o=n.I4.span`
  white-space: nowrap;
  min-width: 100px;
  svg,
  i {
    margin-right: 8px;

    &:hover {
      path {
        fill: ${({theme:e})=>e.colors.primary.base};
      }
    }
  }
`,l=n.I4.span`
  color: ${({theme:e})=>e.colors.grayscale.base};
`;function d({actions:e}){return(0,s.Y)(o,{className:"actions",children:e.map(((e,a)=>{const t=r.F[e.icon];return e.tooltip?(0,s.Y)(i.m_,{id:`${e.label}-tooltip`,title:e.tooltip,placement:e.placement,children:(0,s.Y)(l,{role:"button",tabIndex:0,className:"action-button","data-test":e.label,onClick:e.onClick,children:(0,s.Y)(t,{iconSize:"l"})})},a):(0,s.Y)(l,{role:"button",tabIndex:0,className:"action-button",onClick:e.onClick,"data-test":e.label,children:(0,s.Y)(t,{})},a)}))})}},97560:(e,a,t)=>{t.d(a,{Ni:()=>d,cm:()=>u,vW:()=>l,wj:()=>o});var n=t(35742),i=t(78518),r=t(58561),s=t.n(r);const o=async e=>{await n.A.post({endpoint:"/api/v1/security/groups/",jsonPayload:{...e,users:e.users.map((e=>e.value))}})},l=async(e,a)=>{await n.A.put({endpoint:`/api/v1/security/groups/${e}`,jsonPayload:{...a,users:a.users.map((e=>e.value))}})},d=async e=>n.A.delete({endpoint:`/api/v1/security/groups/${e}`}),u=async(e,a,t,r)=>{const o=s().encode({filter:e,page:a,page_size:t,order_column:"username",order_direction:"asc"});try{var l,d,u;const e=await n.A.get({endpoint:`/api/v1/security/users/?q=${o}`});return{data:((null==(l=e.json)?void 0:l.result)||[]).map((e=>({value:e.id,label:e.username}))),totalCount:null!=(d=null==(u=e.json)?void 0:u.count)?d:0}}catch(e){return r((0,i.t)("There was an error while fetching users")),{data:[],totalCount:0}}}}}]);