"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3658],{17466:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(17437),l=n(96540),r=n(78518),i=n(15595),o=n(7089),s=n(2445);const c={name:"GMT Standard Time",value:"Africa/Abidjan"},d="400px",u={"-300-240":["Eastern Standard Time","Eastern Daylight Time"],"-360-300":["Central Standard Time","Central Daylight Time"],"-420-360":["Mountain Standard Time","Mountain Daylight Time"],"-420-420":["Mountain Standard Time - Phoenix","Mountain Standard Time - Phoenix"],"-480-420":["Pacific Standard Time","Pacific Daylight Time"],"-540-480":["Alaska Standard Time","Alaska Daylight Time"],"-600-600":["Hawaii Standard Time","Hawaii Daylight Time"],60120:["Central European Time","Central European Daylight Time"],"00":[c.name,c.name],"060":["GMT Standard Time - London","British Summer Time"]};function h({onTimezoneChange:e,timezone:t,minWidth:n=d,...h}){const{TIMEZONE_OPTIONS:p,TIMEZONE_OPTIONS_SORT_COMPARATOR:m,validTimezone:v}=(0,l.useMemo)((()=>{const e=(0,o.XV)(),n=o.XV.tz("2021-01-01"),a=o.XV.tz("2021-07-01"),l=e=>n.tz(e).utcOffset().toString()+a.tz(e).utcOffset().toString(),r=Intl.supportedValuesOf("timeZone"),i=new Set,s=r.map((t=>{const n=`GMT ${o.XV.tz(e,t).format("Z")} (${(t=>{var n,a;const r=l(t);return((0,o._q)(e.tz(t),t)?null==(n=u[r])?void 0:n[1]:null==(a=u[r])?void 0:a[0])||t})(t)})`;return i.has(n)?null:(i.add(n),{label:n,value:t,offsets:l(t),timezoneName:t})})).filter(Boolean),d=(t,n)=>o.XV.tz(e,t.timezoneName).utcOffset()-o.XV.tz(e,n.timezoneName).utcOffset();s.sort(d);const h=(e=>{const t=l(e);let n;for(const a of s){if(a.offsets===t&&a.timezoneName===e)return a.value;n||a.offsets!==t||(n=a.value)}return n||c.value})(t||o.XV.tz.guess());return{TIMEZONE_OPTIONS:s,TIMEZONE_OPTIONS_SORT_COMPARATOR:d,validTimezone:h}}),[t]);return(0,l.useEffect)((()=>{v&&t!==v&&e(v)}),[v,e,t]),(0,s.Y)(i.l6,{ariaLabel:(0,r.t)("Timezone selector"),css:(0,a.AH)({minWidth:n},"",""),onChange:t=>e(t),value:v,options:p,sortComparator:m,...h})}},19855:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(96540),l=n(5556),r=n.n(l),i=n(90868),o=n(8700),s=n(19129),c=n(78518),d=n(98837),u=n(46920),h=n(24976),p=n(18301),m=n(50317),v=n(2445);const g={name:r().string,onChange:r().func,initialValue:r().string,height:r().number,minLines:r().number,maxLines:r().number,offerEditInModal:r().bool,language:r().oneOf([null,"json","html","sql","markdown","javascript"]),aboveEditorSection:r().node,readOnly:r().bool,resize:r().oneOf([null,"block","both","horizontal","inline","none","vertical"]),textAreaStyles:r().object,tooltipOptions:r().oneOf([null,o.TooltipProps]),hotkeys:r().array};class b extends a.Component{onControlChange(e){const{value:t}=e.target;this.props.onChange(t)}onAreaEditorChange(e){this.props.onChange(e)}renderEditor(e=!1){const t=e?40:this.props.minLines||12;if(this.props.language){const n={border:`1px solid ${this.props.theme.colors.grayscale.light1}`,minHeight:`${t}em`,width:"auto",...this.props.textAreaStyles};this.props.resize&&(n.resize=this.props.resize),this.props.readOnly&&(n.backgroundColor="#f2f2f2");const a=e=>{this.props.hotkeys.forEach((t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})}))},l=(0,v.Y)("div",{children:(0,v.Y)(h.S9,{mode:this.props.language,style:n,minLines:t,maxLines:e?1e3:this.props.maxLines,editorProps:{$blockScrolling:!0},onLoad:a,defaultValue:this.props.initialValue,readOnly:this.props.readOnly,...this.props,onChange:this.onAreaEditorChange.bind(this)},this.props.name)});return this.props.tooltipOptions?(0,v.Y)(s.m_,{...this.props.tooltipOptions,children:l}):l}const n=(0,v.Y)("div",{children:(0,v.Y)(i.fs,{placeholder:(0,c.t)("textarea"),onChange:this.onControlChange.bind(this),defaultValue:this.props.initialValue,disabled:this.props.readOnly,style:{height:this.props.height},"aria-required":this.props["aria-required"]})});return this.props.tooltipOptions?(0,v.Y)(s.m_,{...this.props.tooltipOptions,children:n}):n}renderModalBody(){return(0,v.FD)(v.FK,{children:[(0,v.Y)("div",{children:this.props.aboveEditorSection}),this.renderEditor(!0)]})}render(){const e=(0,v.Y)(m.A,{...this.props});return(0,v.FD)("div",{children:[e,this.renderEditor(),this.props.offerEditInModal&&(0,v.Y)(p.A,{modalTitle:e,triggerNode:(0,v.FD)(u.A,{buttonSize:"small",className:"m-t-5",children:[(0,c.t)("Edit")," ",(0,v.Y)("strong",{children:this.props.language})," ",(0,c.t)("in modal")]}),modalBody:this.renderModalBody(!0),responsive:!0})]})}}b.propTypes=g,b.defaultProps={onChange:()=>{},initialValue:"",height:250,minLines:3,maxLines:10,offerEditInModal:!0,readOnly:!1,resize:null,textAreaStyles:{},tooltipOptions:{},hotkeys:[]};const f=(0,d.b)(b)},43658:(e,t,n)=>{n.d(t,{tu:()=>ee,b5:()=>ie,Ay:()=>se});var a=n(96540),l=n(93641),r=n(78518),i=n(17437),o=n(96453),s=n(27366),c=n(35742),d=n(58561),u=n.n(d),h=n(50500),p=n(90868),m=n(75488),v=n(85861),g=n(61693),b=n(17466),f=n(3175),_=n(5261),E=n(15595),T=n(19855),y=n(28292),S=n(66537),N=n(47815),C=n(61225),R=n(67073),O=n(2445);function A({timeUnit:e,min:t,name:n,value:l,placeholder:r,onChange:i,...o}){const[s,c]=(0,a.useState)(!1);return(0,O.Y)("input",{type:"text",min:t,name:n,value:l?`${l}${s?"":` ${e}`}`:"",placeholder:r,onFocus:()=>c(!0),onBlur:()=>c(!1),onChange:i,...o})}var x,D=n(51647);!function(e){e.Picker="picker",e.Input="input"}(x||(x={}));const Y=[{label:(0,r.t)("Recurring (every)"),value:x.Picker},{label:(0,r.t)("CRON Schedule"),value:x.Input}],I=({value:e,onChange:t})=>{const n=(0,o.DP)(),[l,i]=(0,a.useState)(x.Picker),s=(0,a.useCallback)((e=>{t(e)}),[t]),c=(0,a.useCallback)((e=>{t(e.target.value)}),[t]),d=(0,a.useCallback)((()=>{t(e||"")}),[t,e]),[u,h]=(0,a.useState)();return(0,O.FD)(O.FK,{children:[(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Schedule type"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Schedule type"),placeholder:(0,r.t)("Schedule type"),onChange:e=>{i(e)},value:l,options:Y})})]}),(0,O.FD)(ee,{"data-test":"input-content",className:"styled-input",children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Schedule"),(0,O.Y)("span",{className:"required",children:"*"})]}),l===x.Input&&(0,O.Y)(p.pd,{type:"text",name:"crontab",style:u?{borderColor:n.colors.error.base}:{},placeholder:(0,r.t)("CRON expression"),value:e,onBlur:c,onChange:e=>s(e.target.value),onPressEnter:d}),l===x.Picker&&(0,O.Y)(D.l5,{clearButton:!1,value:e,setValue:s,displayError:l===x.Picker,onError:h})]})]})};var k=n(83329);const F=o.I4.div`
  ${({theme:e})=>`\n    margin-bottom: ${3*e.gridUnit}px;\n\n    .input-container {\n      textarea {\n        height: auto;\n      }\n\n      &.error {\n        input {\n          border-color: ${e.colors.error.base};\n        }\n      }\n\n      .helper {\n        margin-top: ${2*e.gridUnit}px;\n        font-size: ${e.typography.sizes.s}px;\n        color: ${e.colors.grayscale.base};\n      }\n    }\n\n    .inline-container {\n      margin-bottom: ${2*e.gridUnit}px;\n\n      > div {\n        margin: 0px;\n      }\n\n      .delete-button {\n        margin-left: ${2*e.gridUnit}px;\n        padding-top: ${e.gridUnit}px;\n      }\n      .anticon {\n        margin-left: ${e.gridUnit}px;\n      }\n    }\n\n    .ghost-button {\n      color: ${e.colors.primary.dark1};\n      display: inline-flex;\n      align-items: center;\n      font-size: ${e.typography.sizes.s}px;\n      cursor: pointer;\n\n      .icon {\n        width: ${3*e.gridUnit}px;\n        height: ${3*e.gridUnit}px;\n        font-size: ${e.typography.sizes.s}px;\n        margin-right: ${e.gridUnit}px;\n      }\n    }\n\n    .ghost-button + .ghost-button {\n      margin-left: ${4*e.gridUnit}px;\n    }\n\n    .ghost-button:first-child[style*='none'] + .ghost-button {\n      margin-left: 0px; /* Remove margin when the first button is hidden */\n    }\n  `}
`,L={EMAIL_CC_NAME:(0,r.t)("CC recipients"),EMAIL_BCC_NAME:(0,r.t)("BCC recipients"),EMAIL_SUBJECT_NAME:(0,r.t)("Email subject name (optional)"),EMAIL_SUBJECT_ERROR_TEXT:(0,r.t)("Please enter valid text. Spaces alone are not permitted.")},w=({setting:e=null,index:t,onUpdate:n,onRemove:l,onInputChange:i,email_subject:d,defaultSubject:h,setErrorSubject:p})=>{const{method:m,recipients:v,cc:g,bcc:b,options:f}=e||{},[_,T]=(0,a.useState)(v||""),[y,S]=(0,a.useState)([]),[C,A]=(0,a.useState)(!1),[x,D]=(0,a.useState)(!!g),[Y,I]=(0,a.useState)(!!b),[w,M]=(0,a.useState)(g||""),[$,U]=(0,a.useState)(b||""),j=(0,o.DP)(),[P,V]=(0,a.useState)(!0),[z,q]=(0,a.useState)([{label:"",options:[]}]),[G,X]=(0,a.useState)(!1),[B,Z]=(0,a.useState)(!0),W=async({force:e}={})=>{Z(!0),(async({searchString:e="",types:t=[],exactMatch:n=!1,force:a=!1}={})=>{const l=`/api/v1/report/slack_channels/?q=${u().encode({searchString:e,types:t,exactMatch:n,force:a})}`;return c.A.get({endpoint:l})})({types:["public_channel","private_channel"],force:e}).then((({json:e})=>{const{result:t}=e,n=(e=>{const t=[],n=[];return e.forEach((e=>{e.is_private?n.push(e):t.push(e)})),[{label:"Public Channels",options:t.map((e=>({label:`${e.name} ${e.is_member?"":(0,r.t)("(Bot not in channel)")}`,value:e.id,key:e.id}))),key:"public"},{label:(0,r.t)("Private Channels (Bot in channel)"),options:n.map((e=>({label:e.name,value:e.id,key:e.id}))),key:"private"}]})(t);if(q(n),(0,s.G7)(s.TO.AlertReportSlackV2)){const[e,t]=n;m&&[N.yV.SlackV2,N.yV.Slack].includes(m)&&S((({method:e,recipientValue:t,slackOptions:n})=>{const a=e===N.yV.SlackV2?"value":"label";return t.split(",").map((e=>n.find((t=>t[a].trim().toLowerCase()===e.trim().toLowerCase())))).filter((e=>!!e))})({method:m,recipientValue:_,slackOptions:[...e.options,...t.options]}))}})).catch((e=>{X(!0)})).finally((()=>{V(!1),Z(!1)}))};(0,a.useEffect)((()=>{var e;!(null==f?void 0:f.some((e=>e===N.yV.Slack||e===N.yV.SlackV2)))||null!=(e=z[0])&&e.options.length||W()}),[]);const H=(0,a.useMemo)((()=>(f||[]).filter((e=>(0,s.G7)(s.TO.AlertReportSlackV2)&&!G&&e===N.yV.SlackV2||(!(0,s.G7)(s.TO.AlertReportSlackV2)||G)&&e===N.yV.Slack||e===N.yV.Email)).map((e=>({label:e===N.yV.SlackV2?N.yV.Slack:e,value:e})))),[f,G]);return e?(v&&_!==v&&T(v),g&&w!==g&&M(g),b&&$!==b&&U(b),(0,O.FD)(F,{children:[(0,O.Y)("div",{className:"inline-container",children:(0,O.FD)(ee,{children:[(0,O.Y)("div",{className:"control-label",children:(0,r.t)("Notification Method")}),(0,O.FD)("div",{className:"input-container",children:[(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Delivery method"),"data-test":"select-delivery-method",labelInValue:!0,onChange:a=>{if(T(""),M(""),U(""),n&&e){const l={...e,method:a.value,recipients:"",cc:"",bcc:""};n(t,l)}},placeholder:(0,r.t)("Select Delivery Method"),options:H,showSearch:!0,value:H.find((e=>e.value===m)),loading:P}),0!==t&&l?(0,O.Y)("span",{role:"button",tabIndex:0,className:"delete-button",onClick:()=>l(t),children:(0,O.Y)(R.F.DeleteOutlined,{iconSize:"l"})}):null]})]})}),void 0!==m?(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"inline-container",children:(0,O.Y)(ee,{children:m===N.yV.Email?(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"control-label",children:L.EMAIL_SUBJECT_NAME}),(0,O.Y)("div",{className:"input-container "+(C?"error":""),children:(0,O.Y)("input",{type:"text",name:"email_subject",value:d,placeholder:h,onChange:e=>{const{value:t}=e.target;i&&i(e);const n=t.length>0&&0===t.trim().length;A(n),p&&p(n)}})}),C&&(0,O.Y)("div",{style:{color:j.colors.error.base,fontSize:3*j.gridUnit},children:L.EMAIL_SUBJECT_ERROR_TEXT})]}):null})}),(0,O.Y)("div",{className:"inline-container",children:(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("%s recipients",m===N.yV.SlackV2?N.yV.Slack:m),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{children:[N.yV.Email,N.yV.Slack].includes(m)?(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("textarea",{name:"To","data-test":"recipients",value:_,onChange:a=>{const{target:l}=a;if(T(l.value),n){const a={...e,recipients:l.value};n(t,a)}}})}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("div",{className:"helper",children:(0,r.t)('Recipients are separated by "," or ";"')})})]}):(0,O.FD)("div",{className:"input-container",children:[(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Select channels"),mode:"multiple",name:"recipients",value:y,options:z,onChange:a=>{if(S(a),n){const l={...e,recipients:null==a?void 0:a.map((e=>e.value)).join(",")};n(t,l)}},allowClear:!0,"data-test":"recipients",loading:B,allowSelectAll:!1,labelInValue:!0}),(0,O.Y)(k.A,{onClick:()=>W({force:!0}),tooltipContent:(0,r.t)("Force refresh Slack channels list"),disabled:B})]})})]})}),m===N.yV.Email&&(0,O.FD)(ee,{children:[x&&(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"control-label",children:L.EMAIL_CC_NAME}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("textarea",{name:"CC","data-test":"cc",value:w,onChange:a=>{const{target:l}=a;if(M(l.value),n){const a={...e,cc:l.value};n(t,a)}}})}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("div",{className:"helper",children:(0,r.t)('Recipients are separated by "," or ";"')})})]}),Y&&(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"control-label",children:L.EMAIL_BCC_NAME}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("textarea",{name:"BCC","data-test":"bcc",value:$,onChange:a=>{const{target:l}=a;if(U(l.value),n){const a={...e,bcc:l.value};n(t,a)}}})}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("div",{className:"helper",children:(0,r.t)('Recipients are separated by "," or ";"')})})]}),(0,O.FD)("div",{className:"ghost-button",children:[(0,O.FD)("span",{className:"ghost-button",role:"button",tabIndex:0,onClick:()=>D(!0),style:{display:x?"none":"inline-flex"},children:[(0,O.Y)(R.F.MailOutlined,{iconSize:"xs",className:"icon"}),(0,r.t)("Add CC Recipients")]}),(0,O.FD)("span",{className:"ghost-button",role:"button",tabIndex:0,onClick:()=>I(!0),style:{display:Y?"none":"inline-flex"},children:[(0,O.Y)(R.F.MailOutlined,{iconSize:"xs",className:"icon"}),(0,r.t)("Add BCC Recipients")]})]})]})]}):null]})):null},M=({title:e,subtitle:t,validateCheckStatus:n,testId:a})=>{const l=(0,o.DP)(),i=(0,O.Y)(R.F.CheckCircleOutlined,{iconSize:"m",iconColor:l.colors.success.base});return(0,O.FD)("div",{className:"collapse-panel-header",children:[(0,O.FD)("div",{className:"collapse-panel-title","data-test":a,children:[(0,O.Y)("span",{children:(0,r.t)(e)}),n?(0,O.Y)("span",{className:"validation-checkmark",children:i}):(0,O.Y)("span",{className:"collapse-panel-asterisk",children:" *"})]}),(0,O.Y)("p",{className:"collapse-panel-subtitle",children:t?(0,r.t)(t):void 0})]})};var $=n(77839);const U=e=>(0,O.Y)($.A.Panel,{css:e=>(e=>i.AH`
  .ant-collapse-header {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    padding: 0px ${4*e.gridUnit}px;

    .anticon.anticon-right.ant-collapse-arrow {
      padding: 0;
      top: calc(50% - ${6}px);
    }

    .collapse-panel-title {
      font-size: ${4*e.gridUnit}px;
      font-weight: ${e.typography.weights.bold};
      line-height: 130%;
    }

    .collapse-panel-subtitle {
      color: ${e.colors.grayscale.base};
      font-size: ${e.typography.sizes.s}px;
      font-weight: ${e.typography.weights.normal};
      line-height: 150%;
      margin-bottom: 0;
      padding-top: ${e.gridUnit}px;
    }

    .collapse-panel-asterisk {
      color: var(--semantic-error-base, ${e.colors.warning.dark1});
    }
    .validation-checkmark {
      width: ${4*e.gridUnit}px;
      height: ${4*e.gridUnit}px;
      margin-left: ${e.gridUnit}px;
      color: ${e.colors.success.base};
    }
  }
`)(e),...e}),j=o.I4.ul`
  margin-left: ${({theme:e})=>2*e.gridUnit}px;
  padding-inline-start: ${({theme:e})=>3*e.gridUnit}px;
`,P=[l.Y.PivotTable,"table",l.Y.PairedTTest],V=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,z=[N.yV.Email],q="PNG",G={dashboard:{anchor:""}},X=[{label:(0,r.t)("< (Smaller than)"),value:"<"},{label:(0,r.t)("> (Larger than)"),value:">"},{label:(0,r.t)("<= (Smaller or equal)"),value:"<="},{label:(0,r.t)(">= (Larger or equal)"),value:">="},{label:(0,r.t)("== (Is equal)"),value:"=="},{label:(0,r.t)("!= (Is not equal)"),value:"!="},{label:(0,r.t)("Not null"),value:"not null"}],B=[{label:(0,r.t)("None"),value:0},{label:(0,r.t)("30 days"),value:30},{label:(0,r.t)("60 days"),value:60},{label:(0,r.t)("90 days"),value:90}],Z=[{label:(0,r.t)("Dashboard"),value:"dashboard"},{label:(0,r.t)("Chart"),value:"chart"}],W={pdf:{label:(0,r.t)("Send as PDF"),value:"PDF"},png:{label:(0,r.t)("Send as PNG"),value:"PNG"},csv:{label:(0,r.t)("Send as CSV"),value:"CSV"},txt:{label:(0,r.t)("Send as text"),value:"TEXT"}},H=i.AH`
  margin-bottom: 0;
`,K=(0,o.I4)(v.Ay)`
  .antd5-modal-body {
    height: 720px;
  }

  .control-label {
    margin-top: ${({theme:e})=>e.gridUnit}px;
  }

  .ant-collapse > .ant-collapse-item {
    border-bottom: none;
  }

  .inline-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    &.wrap {
      flex-wrap: wrap;
    }

    > div {
      flex: 1 1 auto;
    }
  }
`,J=(0,o.I4)(E.f7)`
  width: 100%;
`,Q=o.I4.div`
  display: flex;
  align-items: center;
  margin-top: 10px;

  .switch-label {
    margin-left: 10px;
  }
`,ee=o.I4.div`
  ${({theme:e})=>i.AH`
    flex: 1;
    margin-top: 0px;
    margin-bottom: ${4*e.gridUnit}px;

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .helper {
      display: block;
      color: ${e.colors.grayscale.base};
      font-size: ${e.typography.sizes.s}px;
      padding: ${e.gridUnit}px 0;
      text-align: left;
    }

    .required {
      margin-left: ${e.gridUnit/2}px;
      color: ${e.colors.error.base};
    }

    .input-container {
      display: flex;
      align-items: center;

      > div {
        width: 100%;
      }

      label {
        display: flex;
        margin-right: ${2*e.gridUnit}px;
      }

      i {
        margin: 0 ${e.gridUnit}px;
      }
    }

    input,
    textarea {
      flex: 1 1 auto;
    }

    input[disabled] {
      color: ${e.colors.grayscale.base};
    }

    textarea {
      height: 300px;
      resize: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: ${e.colors.grayscale.light1};
    }

    textarea,
    input[type='text'],
    input[type='number'] {
      padding: ${e.gridUnit}px ${2*e.gridUnit}px;
      border-style: none;
      border: 1px solid ${e.colors.grayscale.light2};
      border-radius: ${e.gridUnit}px;

      &[name='description'] {
        flex: 1 1 auto;
      }
    }

    .input-label {
      margin-left: 10px;
    }
  `}
`,te=(0,o.I4)(E.vo)`
  margin-top: ${({theme:e})=>0*e.gridUnit}px;
`,ne=(0,o.I4)(S.W)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
`,ae=o.I4.div`
  ${({theme:e})=>i.AH`
    color: ${e.colors.primary.dark1};
    cursor: pointer;

    i {
      margin-right: ${2*e.gridUnit}px;
    }

    &.disabled {
      color: ${e.colors.grayscale.light1};
      cursor: default;
    }
  `}
`,le=o.I4.div`
  .inline-container .input-container {
    margin-left: 0;
  }
`,re=e=>i.AH`
  margin-right: ${3*e.gridUnit}px;
`,ie={GENERAL_TITLE:(0,r.t)("General information"),ALERT_CONDITION_TITLE:(0,r.t)("Alert condition"),ALERT_CONTENTS_TITLE:(0,r.t)("Alert contents"),REPORT_CONTENTS_TITLE:(0,r.t)("Report contents"),SCHEDULE_TITLE:(0,r.t)("Schedule"),NOTIFICATION_TITLE:(0,r.t)("Notification method"),NAME_ERROR_TEXT:(0,r.t)("name"),OWNERS_ERROR_TEXT:(0,r.t)("owners"),CONTENT_ERROR_TEXT:(0,r.t)("content type"),DATABASE_ERROR_TEXT:(0,r.t)("database"),SQL_ERROR_TEXT:(0,r.t)("sql"),ALERT_CONDITION_ERROR_TEXT:(0,r.t)("alert condition"),CRONTAB_ERROR_TEXT:(0,r.t)("crontab"),WORKING_TIMEOUT_ERROR_TEXT:(0,r.t)("working timeout"),RECIPIENTS_ERROR_TEXT:(0,r.t)("recipients"),EMAIL_SUBJECT_ERROR_TEXT:(0,r.t)("email subject"),EMAIL_VALIDATION_ERROR_TEXT:(0,r.t)("invalid email"),ERROR_TOOLTIP_MESSAGE:(0,r.t)("Not all required fields are complete. Please provide the following:")},oe=({status:e="active",onClick:t})=>"hidden"===e?null:(0,O.FD)(ae,{className:e,onClick:()=>{"disabled"!==e&&t()},children:[(0,O.Y)(R.F.PlusOutlined,{iconSize:"m",css:e=>({margin:`auto ${2*e.gridUnit}px auto 0`,verticalAlign:"middle"})}),"active"===e?(0,r.t)("Add another notification method"):(0,r.t)("Add delivery method")]}),se=(0,_.Ay)((({addDangerToast:e,onAdd:t,onHide:n,show:l,alert:o=null,isReport:d=!1,addSuccessToast:v})=>{var _,S,R,x,D,Y,k,F,L,$;const ae=function(e){const t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{e&&(t.current=document.activeElement)}),[e]),t}(l),se=(0,C.d4)((e=>e.user)),ce=(0,y.B)(),de=(null==ce?void 0:ce.ALERT_REPORTS_NOTIFICATION_METHODS)||z,[ue,he]=(0,a.useState)(!0),[pe,me]=(0,a.useState)(),[ve,ge]=(0,a.useState)(!0),[be,fe]=(0,a.useState)("dashboard"),[_e,Ee]=(0,a.useState)(q),[Te,ye]=(0,a.useState)(!1),[Se,Ne]=(0,a.useState)(!1);(0,a.useEffect)((()=>{Ne("PNG"===_e)}),[_e]);const[Ce,Re]=(0,a.useState)(!1),[Oe,Ae]=(0,a.useState)([]),[xe,De]=(0,a.useState)([]),[Ye,Ie]=(0,a.useState)([]),[ke,Fe]=(0,a.useState)([]),[Le,we]=(0,a.useState)({[N.Z_.General]:{hasErrors:!1,name:ie.GENERAL_TITLE,errors:[]},[N.Z_.Content]:{hasErrors:!1,name:d?ie.REPORT_CONTENTS_TITLE:ie.ALERT_CONTENTS_TITLE,errors:[]},[N.Z_.Alert]:{hasErrors:!1,name:ie.ALERT_CONDITION_TITLE,errors:[]},[N.Z_.Schedule]:{hasErrors:!1,name:ie.SCHEDULE_TITLE,errors:[]},[N.Z_.Notification]:{hasErrors:!1,name:ie.NOTIFICATION_TITLE,errors:[]}}),[Me,$e]=(0,a.useState)(""),Ue=(e,t)=>{we((n=>({...n,[e]:{hasErrors:t.length>0,name:n[e].name,errors:t}})))},[je,Pe]=(0,a.useState)(""),Ve=d?"report":"alert",ze=null!==o,qe=(0,s.G7)(s.TO.AlertsAttachReports)||d,Ge=(0,s.G7)(s.TO.AlertReportTabs),[Xe,Be]=(0,a.useState)("active"),[Ze,We]=(0,a.useState)([]),[He,Ke]=(0,a.useState)(""),[Je,Qe]=(0,a.useState)(!1),{ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT:et,ALERT_REPORTS_DEFAULT_CRON_VALUE:tt,ALERT_REPORTS_DEFAULT_RETENTION:nt}=(0,C.d4)((e=>{var t,n,a,l;const r=null==(t=e.common)?void 0:t.conf;return{ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT:null!=(n=null==r?void 0:r.ALERT_REPORTS_DEFAULT_WORKING_TIMEOUT)?n:3600,ALERT_REPORTS_DEFAULT_CRON_VALUE:null!=(a=null==r?void 0:r.ALERT_REPORTS_DEFAULT_CRON_VALUE)?a:"0 0 * * *",ALERT_REPORTS_DEFAULT_RETENTION:null!=(l=null==r?void 0:r.ALERT_REPORTS_DEFAULT_RETENTION)?l:90}})),at={active:!0,creation_method:"alerts_reports",crontab:tt,extra:G,log_retention:nt,working_timeout:et,name:"",owners:[],recipients:[],sql:"",email_subject:"",validator_config_json:{},validator_type:"",force_screenshot:!1,grace_period:void 0},lt=(e,t)=>{const n=[...Ze];n[e]=t,Ze[e].method!==t.method?(Ze[e]=t,We(Ze.filter(((t,n)=>n<=e))),Ze.length-1>e&&Be("active"),void 0!==t.method&&"hidden"!==Xe&&Be("active")):We(n)},rt=e=>{const t=Ze.slice();t.splice(e,1),We(t),Be("active")},it=e=>{me((t=>{var n;const a={dashboard:{...null==t||null==(n=t.extra)?void 0:n.dashboard,anchor:e}};return{...t,extra:a}}))},{state:{loading:ot,resource:st,error:ct},fetchResource:dt,createResource:ut,updateResource:ht,clearError:pt}=(0,h.fn)("report",(0,r.t)("report"),e),mt=()=>{pt(),ge(!0),n(),We([]),me({...at}),Be("active")},vt=(0,a.useMemo)((()=>(e="",t,n)=>{const a=u().encode({filter:e,page:t,page_size:n});return c.A.get({endpoint:`/api/v1/report/related/created_by?q=${a}`}).then((e=>({data:e.json.result.map((e=>({value:e.value,label:e.text}))),totalCount:e.json.count})))}),[]),gt=(0,a.useCallback)((e=>{const t=e||(null==pe?void 0:pe.database);if(!t||t.label)return null;let n;return Oe.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n}),[null==pe?void 0:pe.database,Oe]),bt=(e,t)=>{me((n=>({...n,[e]:t})))},ft=(0,a.useMemo)((()=>(e="",t,n)=>{const a=u().encode({filter:e,page:t,page_size:n});return c.A.get({endpoint:`/api/v1/report/related/database?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return Ae(t),{data:t,totalCount:e.json.count}}))}),[]),_t=null==pe?void 0:pe.dashboard;(0,a.useEffect)((()=>{Ge&&null!=_t&&_t.value&&c.A.get({endpoint:`/api/v1/dashboard/${_t.value}/tabs`}).then((e=>{var t,n;const{tab_tree:a,all_tabs:l}=e.json.result,r=a.map((e=>e.value));r.length>1&&a.push({title:"All Tabs",value:JSON.stringify(r)}),Fe(a);const i=null==pe||null==(t=pe.extra)||null==(n=t.dashboard)?void 0:n.anchor;if(i)try{const e=JSON.parse(i);if(!Array.isArray(e))throw new Error("Parsed value is not an array");e.every((e=>e in l))||it(void 0)}catch(e){i in l||it(void 0)}})).catch((()=>{e((0,r.t)("There was an error retrieving dashboard tabs."))}))}),[_t,Ge,null==pe?void 0:pe.extra,e]);const Et=(null==pe?void 0:pe.database)&&!pe.database.label;(0,a.useEffect)((()=>{Et&&bt("database",gt())}),[Et,gt]);const Tt=(0,a.useMemo)((()=>(e="",t,n)=>{const a=u().encode_uri({filter:e,page:t,page_size:n});return c.A.get({endpoint:`/api/v1/report/related/dashboard?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return De(t),{data:t,totalCount:e.json.count}}))}),[]),yt=e=>{const t=e||(null==pe?void 0:pe.dashboard);if(!t||t.label)return null;let n;return xe.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n},St=(0,a.useCallback)((e=>{const t=e||(null==pe?void 0:pe.chart);if(!t||t.label)return null;let n;return Ye.forEach((e=>{e.value!==t.value&&e.value!==t.id||(n=e)})),n}),[Ye,null==pe?void 0:pe.chart]),Nt=(null==pe?void 0:pe.chart)&&!(null!=pe&&pe.chart.label);(0,a.useEffect)((()=>{Nt&&bt("chart",St())}),[St,Nt]);const Ct=(0,a.useMemo)((()=>(e="",t,n)=>{const a=u().encode_uri({filter:e,page:t,page_size:n});return c.A.get({endpoint:`/api/v1/report/related/chart?q=${a}`}).then((e=>{const t=e.json.result.map((e=>({value:e.value,label:e.text})));return Ie(t),{data:t,totalCount:e.json.count}}))}),[]),Rt=()=>{var e,t;const n=null==pe||null==(e=pe.chart)?void 0:e.label,a=null==pe||null==(t=pe.dashboard)?void 0:t.label;if(null!=pe&&pe.name)switch(be){case N.cM.Chart:Ke(`${null==pe?void 0:pe.name}: ${n||""}`);break;case N.cM.Dashboard:Ke(`${null==pe?void 0:pe.name}: ${a||""}`);break;default:Ke("")}else Ke("")},Ot=e=>{const{target:{type:t,value:n,name:a}}=e,l="number"===t?parseInt(n,10)||null:n;bt(a,l),"name"===a&&Rt()},At=e=>{const{target:t}=e,n=+t.value;bt(t.name,0===n?void 0:n?Math.max(n,1):n)},xt=()=>{(()=>{var e,t;const n=[];null!=pe&&null!=(e=pe.name)&&e.length||n.push(ie.NAME_ERROR_TEXT),null!=pe&&null!=(t=pe.owners)&&t.length||n.push(ie.OWNERS_ERROR_TEXT),Ue(N.Z_.General,n)})(),(()=>{const e=[];be===N.cM.Dashboard&&null!=pe&&pe.dashboard||be===N.cM.Chart&&null!=pe&&pe.chart||e.push(ie.CONTENT_ERROR_TEXT),Ue(N.Z_.Content,e)})(),d||(()=>{var e,t,n;const a=[];null!=pe&&pe.database||a.push(ie.DATABASE_ERROR_TEXT),null!=pe&&null!=(e=pe.sql)&&e.length||a.push(ie.SQL_ERROR_TEXT),(Ce||null!=pe&&null!=(t=pe.validator_config_json)&&t.op)&&(Ce||void 0!==(null==pe||null==(n=pe.validator_config_json)?void 0:n.threshold))||a.push(ie.ALERT_CONDITION_ERROR_TEXT),Ue(N.Z_.Alert,a)})(),(()=>{var e;const t=[];null!=pe&&null!=(e=pe.crontab)&&e.length||t.push(ie.CRONTAB_ERROR_TEXT),null!=pe&&pe.working_timeout||t.push(ie.WORKING_TIMEOUT_ERROR_TEXT),Ue(N.Z_.Schedule,t)})(),(()=>{const e=[];(()=>{if(!Ze.length)return!1;let e=!1;return Ze.forEach((t=>{var n;t.method&&null!=(n=t.recipients)&&n.length&&(e=!0)})),e})()?!(()=>{if(!Ze.length)return!0;const e=e=>!e||e.split(/[,;]/).every((e=>V.test(e.trim())));return Ze.every((t=>{var n;return!t.method||"Email"!==t.method||(!(null!=(n=t.recipients)&&n.length)||e(t.recipients))&&(!t.cc||e(t.cc))&&(!t.bcc||e(t.bcc))}))})()&&e.push(ie.EMAIL_VALIDATION_ERROR_TEXT):e.push(ie.RECIPIENTS_ERROR_TEXT),Je&&e.push(ie.EMAIL_SUBJECT_ERROR_TEXT),Ue(N.Z_.Notification,e)})()};(0,a.useEffect)((()=>{if(ze&&(null==pe||!pe.id||(null==o?void 0:o.id)!==pe.id||ve&&l)){if(null!==(null==o?void 0:o.id)&&!ot&&!ct){const e=o.id||0;dt(e)}}else!ze&&(!pe||pe.id||ve&&l)&&(me({...at,owners:se?[{value:se.userId,label:`${se.firstName} ${se.lastName}`}]:[]}),We([{recipients:"",cc:"",bcc:"",options:de,method:N.yV.Email}]),Be("active"))}),[o]),(0,a.useEffect)((()=>{if(st){const e=(st.recipients||[]).map((e=>{const t="string"==typeof e.recipient_config_json?JSON.parse(e.recipient_config_json):{};return{method:e.type,recipients:t.target||e.recipient_config_json,options:de,cc:t.ccTarget||"",bcc:t.bccTarget||""}}));We(e),Be(e.length===de.length?"hidden":"active"),fe(st.chart?N.cM.Chart:N.cM.Dashboard),Ee(st.report_format||q);const t="string"==typeof st.validator_config_json?JSON.parse(st.validator_config_json):st.validator_config_json;Re("not null"===st.validator_type),st.chart&&Pe(st.chart.viz_type),ye(st.force_screenshot),me({...st,chart:st.chart?St(st.chart)||{value:st.chart.id,label:st.chart.slice_name}:void 0,dashboard:st.dashboard?yt(st.dashboard)||{value:st.dashboard.id,label:st.dashboard.dashboard_title}:void 0,database:st.database?gt(st.database)||{value:st.database.id,label:st.database.database_name}:void 0,owners:((null==o?void 0:o.owners)||[]).map((e=>({value:e.value||e.id,label:e.label||`${e.first_name} ${e.last_name}`}))),validator_config_json:"not null"===st.validator_type?{op:"not null"}:t})}}),[st]);const Dt=pe||{};(0,a.useEffect)((()=>{xt(),Rt()}),[Dt.name,Dt.owners,Dt.database,Dt.sql,Dt.validator_config_json,Dt.crontab,Dt.working_timeout,Dt.dashboard,Dt.chart,be,Ze,Ce,Je]),(0,a.useEffect)((()=>{(()=>{const e=[N.Z_.General,N.Z_.Content,d?void 0:N.Z_.Alert,N.Z_.Schedule,N.Z_.Notification].some((e=>e&&Le[e].hasErrors)),t=e?(e=>{const t=[];return Object.values(e).forEach((e=>{if(e.hasErrors){const n=`${e.name}: `;t.push(n+e.errors.join(", "))}})),(0,O.FD)("div",{children:[ie.ERROR_TOOLTIP_MESSAGE,(0,O.Y)(j,{children:t.map((e=>(0,O.Y)("li",{children:e},e)))})]})})(Le):"";$e(t),he(e)})()}),[Le]);const Yt=(0,a.useMemo)((()=>de.reduce(((e,t)=>e.some((e=>e.includes("slack")))&&t.toLowerCase().includes("slack")?e:[...e,t.toLowerCase()]),[]).length),[de]);ve&&l&&ge(!1);const It=e=>{Qe(e)};return(0,O.Y)(K,{className:"no-content-padding",responsive:!0,disablePrimaryButton:ue,primaryTooltipMessage:Me,onHandledPrimaryAction:()=>{var e,n,a;const l=[];Ze.forEach((e=>{e.method&&e.recipients.length&&l.push({recipient_config_json:{target:e.recipients,ccTarget:e.cc,bccTarget:e.bcc},type:e.method})}));const i=be===N.cM.Chart&&!d,o={...pe,type:d?"Report":"Alert",force_screenshot:i||Te,validator_type:Ce?"not null":"operator",validator_config_json:Ce?{}:null==pe?void 0:pe.validator_config_json,chart:be===N.cM.Chart?null==pe||null==(e=pe.chart)?void 0:e.value:null,dashboard:be===N.cM.Dashboard?null==pe||null==(n=pe.dashboard)?void 0:n.value:null,custom_width:Se?null==pe?void 0:pe.custom_width:void 0,database:null==pe||null==(a=pe.database)?void 0:a.value,owners:((null==pe?void 0:pe.owners)||[]).map((e=>e.value||e.id)),recipients:l,report_format:_e||q,extra:be===N.cM.Dashboard?null==pe?void 0:pe.extra:{}};if(o.recipients&&!o.recipients.length&&delete o.recipients,o.context_markdown="string",ze){if(null!=pe&&pe.id){const e=pe.id;delete o.id,delete o.created_by,delete o.last_eval_dttm,delete o.last_state,delete o.last_value,delete o.last_value_row_json,ht(e,o).then((e=>{e&&(v((0,r.t)("%s updated",o.type)),t&&t(),mt())}))}}else pe&&ut(o).then((e=>{e&&(v((0,r.t)("%s updated",o.type)),t&&t(e),mt())}))},onHide:mt,primaryButtonName:ze?(0,r.t)("Save"):(0,r.t)("Add"),show:l,width:"500px",centered:!0,title:(0,O.Y)("h4",{"data-test":"alert-report-modal-title",children:(()=>{let e;switch(!0){case ze&&d:e=(0,r.t)("Edit Report");break;case ze:e=(0,r.t)("Edit Alert");break;case d:e=(0,r.t)("Add Report");break;default:e=(0,r.t)("Add Alert")}return e})()}),openerRef:ae,children:(0,O.FD)(g.A,{expandIconPosition:"right",defaultActiveKey:"general",accordion:!0,css:i.AH`
          border: 'none';
        `,children:[(0,O.Y)(U,{header:(0,O.Y)(M,{title:ie.GENERAL_TITLE,subtitle:(0,r.t)("Set up basic details, such as name and description."),validateCheckStatus:!Le[N.Z_.General].hasErrors,testId:"general-information-panel"}),children:(0,O.FD)("div",{className:"header-section",children:[(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[d?(0,r.t)("Report name"):(0,r.t)("Alert name"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("input",{type:"text",name:"name",value:pe?pe.name:"",placeholder:d?(0,r.t)("Enter report name"):(0,r.t)("Enter alert name"),onChange:Ot,"aria-required":"true"})})]}),(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Owners"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{"data-test":"owners-select",className:"input-container",children:(0,O.Y)(E.DW,{ariaLabel:(0,r.t)("Owners"),"aria-required":"true",allowClear:!0,name:"owners",mode:"multiple",placeholder:(0,r.t)("Select owners"),value:(null==pe?void 0:pe.owners)||[],options:vt,onChange:e=>{bt("owners",e||[])}})})]}),(0,O.FD)(ee,{children:[(0,O.Y)("div",{className:"control-label",children:(0,r.t)("Description")}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("input",{type:"text",name:"description",value:pe&&pe.description||"",placeholder:(0,r.t)("Include description to be sent with %s",Ve),onChange:Ot})})]}),(0,O.FD)(Q,{children:[(0,O.Y)(m.d,{checked:!!pe&&pe.active,defaultChecked:!0,onChange:e=>{bt("active",e)}}),(0,O.Y)("div",{className:"switch-label",children:d?(0,r.t)("Report is active"):(0,r.t)("Alert is active")})]})]})},"general"),!d&&(0,O.FD)(U,{header:(0,O.Y)(M,{title:ie.ALERT_CONDITION_TITLE,subtitle:(0,r.t)("Define the database, SQL query, and triggering conditions for alert."),validateCheckStatus:!Le[N.Z_.Alert].hasErrors,testId:"alert-condition-panel"}),children:[(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Database"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(E.DW,{ariaLabel:(0,r.t)("Database"),"aria-required":"true",name:"source",placeholder:(0,r.t)("Select database"),value:null!=pe&&null!=(_=pe.database)&&_.label&&null!=pe&&null!=(S=pe.database)&&S.value?{value:pe.database.value,label:pe.database.label}:void 0,options:ft,onChange:e=>{bt("database",e||[])}})})]}),(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("SQL Query"),(0,O.Y)(ne,{tooltip:(0,r.t)('The result of this query must be a value capable of numeric interpretation e.g. 1, 1.0, or "1" (compatible with Python\'s float() function).')}),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(T.A,{name:"sql",language:"sql",offerEditInModal:!1,minLines:15,maxLines:15,onChange:e=>{bt("sql",e||"")},readOnly:!1,initialValue:null==st?void 0:st.sql,"aria-required":"true"},null==pe?void 0:pe.id)]}),(0,O.FD)("div",{className:"inline-container wrap",children:[(0,O.FD)(ee,{css:H,children:[(0,O.FD)("div",{className:"control-label",css:re,children:[(0,r.t)("Trigger Alert If..."),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Condition"),"aria-required":"true",onChange:e=>{var t;Re("not null"===e);const n={op:e,threshold:pe?null==(t=pe.validator_config_json)?void 0:t.threshold:void 0};bt("validator_config_json",n)},placeholder:(0,r.t)("Condition"),value:(null==pe||null==(R=pe.validator_config_json)?void 0:R.op)||void 0,options:X,css:re})})]}),(0,O.FD)(ee,{css:H,children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Value")," ",!Ce&&(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)("input",{type:"number",name:"threshold",disabled:Ce,value:void 0===(null==pe||null==(x=pe.validator_config_json)?void 0:x.threshold)||Ce?"":pe.validator_config_json.threshold,placeholder:(0,r.t)("Value"),onChange:e=>{var t;const{target:n}=e,a={op:pe?null==(t=pe.validator_config_json)?void 0:t.op:void 0,threshold:n.value};bt("validator_config_json",a)},"aria-required":"true"})})]})]})]},"condition"),(0,O.FD)(U,{header:(0,O.Y)(M,{title:d?ie.REPORT_CONTENTS_TITLE:ie.ALERT_CONTENTS_TITLE,subtitle:(0,r.t)("Customize data source, filters, and layout."),validateCheckStatus:!Le[N.Z_.Content].hasErrors,testId:"contents-panel"}),children:[(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Content type"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Select content type"),onChange:e=>{ye(!1),fe(e)},value:be,options:Z,placeholder:(0,r.t)("Select content type"),"aria-required":"true"})]}),(0,O.Y)(ee,{children:be===N.cM.Chart?(0,O.FD)(O.FK,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Select chart"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(E.DW,{ariaLabel:(0,r.t)("Chart"),"aria-required":"true",name:"chart",value:null!=pe&&null!=(D=pe.chart)&&D.label&&null!=pe&&null!=(Y=pe.chart)&&Y.value?{value:pe.chart.value,label:pe.chart.label}:void 0,options:Ct,onChange:e=>{(e=>{c.A.get({endpoint:`/api/v1/chart/${e.value}`}).then((e=>Pe(e.json.result.viz_type)))})(e),bt("chart",e||void 0),bt("dashboard",null)},placeholder:(0,r.t)("Select chart to use")})]}):(0,O.FD)(O.FK,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Select dashboard"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(E.DW,{ariaLabel:(0,r.t)("Dashboard"),"aria-required":"true",name:"dashboard",value:null!=pe&&null!=(k=pe.dashboard)&&k.label&&null!=pe&&null!=(F=pe.dashboard)&&F.value?{value:pe.dashboard.value,label:pe.dashboard.label}:void 0,options:Tt,onChange:e=>{bt("dashboard",e||void 0),bt("chart",null),Ge&&(Fe([]),it(""))},placeholder:(0,r.t)("Select dashboard to use")})]})}),(0,O.Y)(ee,{css:["PDF","TEXT","CSV"].includes(_e)&&H,children:qe&&(0,O.FD)(O.FK,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Content format"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Select format"),"aria-required":"true",onChange:e=>{Ee(e)},value:_e,options:be===N.cM.Dashboard?["pdf","png"].map((e=>W[e])):P.includes(je)?Object.values(W):["pdf","png","csv"].map((e=>W[e])),placeholder:(0,r.t)("Select format")})]})}),Ge&&be===N.cM.Dashboard&&(0,O.Y)(ee,{children:(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"control-label",children:(0,r.t)("Select tab")}),(0,O.Y)(J,{disabled:0===(null==ke?void 0:ke.length),treeData:ke,value:null==pe||null==(L=pe.extra)||null==($=L.dashboard)?void 0:$.anchor,onSelect:it,placeholder:(0,r.t)("Select a tab")})]})}),Se&&(0,O.FD)(ee,{css:!d&&be===N.cM.Chart&&H,children:[(0,O.Y)("div",{className:"control-label",children:(0,r.t)("Screenshot width")}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(p.YI,{type:"number",name:"custom_width",value:(null==pe?void 0:pe.custom_width)||void 0,min:600,max:2400,placeholder:(0,r.t)("Input custom width in pixels"),onChange:e=>{const t=null==e||"string"==typeof e&&Number.isNaN(Number(e))?null:Number(e);bt("custom_width",t)}})})]}),(d||be===N.cM.Dashboard)&&(0,O.Y)("div",{className:"inline-container",children:(0,O.Y)(te,{"data-test":"bypass-cache",className:"checkbox",checked:Te,onChange:e=>{ye(e.target.checked)},children:(0,r.t)("Ignore cache when generating report")})})]},"contents"),(0,O.FD)(U,{header:(0,O.Y)(M,{title:ie.SCHEDULE_TITLE,subtitle:(0,r.t)("Define delivery schedule, timezone, and frequency settings."),validateCheckStatus:!Le[N.Z_.Schedule].hasErrors,testId:"schedule-panel"}),children:[(0,O.Y)(I,{value:(null==pe?void 0:pe.crontab)||"",onChange:e=>bt("crontab",e)}),(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Timezone")," ",(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)(b.A,{onTimezoneChange:e=>{bt("timezone",e)},timezone:null==pe?void 0:pe.timezone,minWidth:"100%","aria-required":"true"})]}),(0,O.FD)(ee,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Log retention"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(E.l6,{ariaLabel:(0,r.t)("Log retention"),"aria-required":"true",placeholder:(0,r.t)("Log retention"),onChange:e=>{bt("log_retention",e)},value:null==pe?void 0:pe.log_retention,options:B,sortComparator:(0,f.qw)("value")})})]}),(0,O.Y)(ee,{css:H,children:d?(0,O.FD)(O.FK,{children:[(0,O.FD)("div",{className:"control-label",children:[(0,r.t)("Working timeout"),(0,O.Y)("span",{className:"required",children:"*"})]}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(A,{min:1,name:"working_timeout",value:(null==pe?void 0:pe.working_timeout)||"",placeholder:(0,r.t)("Time in seconds"),onChange:At,timeUnit:(0,r.t)("seconds"),"aria-required":"true"})})]}):(0,O.FD)(O.FK,{children:[(0,O.Y)("div",{className:"control-label",children:(0,r.t)("Grace period")}),(0,O.Y)("div",{className:"input-container",children:(0,O.Y)(A,{min:1,name:"grace_period",value:(null==pe?void 0:pe.grace_period)||"",placeholder:(0,r.t)("Time in seconds"),onChange:At,timeUnit:(0,r.t)("seconds")})})]})})]},"schedule"),(0,O.FD)(U,{header:(0,O.Y)(M,{title:ie.NOTIFICATION_TITLE,subtitle:(0,r.t)("Choose notification method and recipients."),validateCheckStatus:!Le[N.Z_.Notification].hasErrors,testId:"notification-method-panel"}),children:[Ze.map(((e,t)=>(0,O.Y)(le,{children:(0,O.Y)(w,{setting:e,index:t,onUpdate:lt,onRemove:rt,onInputChange:Ot,email_subject:(null==pe?void 0:pe.email_subject)||"",defaultSubject:He||"",setErrorSubject:It},`NotificationMethod-${t}`)}))),Yt>Ze.length&&(0,O.Y)(oe,{"data-test":"notification-add",status:Xe,onClick:()=>{We([...Ze,{recipients:"",options:de.filter((e=>!Ze.reduce(((t,n)=>t||e===n.method),!1)))}]),Be(Ze.length===Yt?"hidden":"disabled")}})]},"notification")]})})}))},47815:(e,t,n)=>{var a,l,r,i,o;n.d(t,{Or:()=>l,Z_:()=>i,cM:()=>o,yV:()=>a}),function(e){e.Email="Email",e.Slack="Slack",e.SlackV2="SlackV2"}(a||(a={})),function(e){e.Success="Success",e.Working="Working",e.Error="Error",e.Noop="Not triggered",e.Grace="On Grace"}(l||(l={})),function(e){e.Email="Email",e.Slack="Slack",e.SlackV2="SlackV2"}(r||(r={})),function(e){e.General="generalSection",e.Content="contentSection",e.Alert="alertConditionSection",e.Schedule="scheduleSection",e.Notification="notificationSection"}(i||(i={})),function(e){e.Dashboard="dashboard",e.Chart="chart"}(o||(o={}))},51647:(e,t,n)=>{n.d(t,{l5:()=>c});var a=n(10339),l=n(78518),r=n(96453),i=n(98348),o=n(2445);const s={everyText:(0,l.t)("every"),emptyMonths:(0,l.t)("every month"),emptyMonthDays:(0,l.t)("every day of the month"),emptyMonthDaysShort:(0,l.t)("day of the month"),emptyWeekDays:(0,l.t)("every day of the week"),emptyWeekDaysShort:(0,l.t)("day of the week"),emptyHours:(0,l.t)("every hour"),emptyMinutes:(0,l.t)("every minute"),emptyMinutesForHourPeriod:(0,l.t)("every"),yearOption:(0,l.t)("year"),monthOption:(0,l.t)("month"),weekOption:(0,l.t)("week"),dayOption:(0,l.t)("day"),hourOption:(0,l.t)("hour"),minuteOption:(0,l.t)("minute"),rebootOption:(0,l.t)("reboot"),prefixPeriod:(0,l.t)("Every"),prefixMonths:(0,l.t)("in"),prefixMonthDays:(0,l.t)("on"),prefixWeekDays:(0,l.t)("on"),prefixWeekDaysForMonthAndYearPeriod:(0,l.t)("or"),prefixHours:(0,l.t)("at"),prefixMinutes:(0,l.t)(":"),prefixMinutesForHourPeriod:(0,l.t)("at"),suffixMinutesForHourPeriod:(0,l.t)("minute(s)"),errorInvalidCron:(0,l.t)("Invalid cron expression"),clearButtonText:(0,l.t)("Clear"),weekDays:[(0,l.t)("Sunday"),(0,l.t)("Monday"),(0,l.t)("Tuesday"),(0,l.t)("Wednesday"),(0,l.t)("Thursday"),(0,l.t)("Friday"),(0,l.t)("Saturday")],months:[(0,l.t)("January"),(0,l.t)("February"),(0,l.t)("March"),(0,l.t)("April"),(0,l.t)("May"),(0,l.t)("June"),(0,l.t)("July"),(0,l.t)("August"),(0,l.t)("September"),(0,l.t)("October"),(0,l.t)("November"),(0,l.t)("December")],altWeekDays:[(0,l.t)("SUN"),(0,l.t)("MON"),(0,l.t)("TUE"),(0,l.t)("WED"),(0,l.t)("THU"),(0,l.t)("FRI"),(0,l.t)("SAT")],altMonths:[(0,l.t)("JAN"),(0,l.t)("FEB"),(0,l.t)("MAR"),(0,l.t)("APR"),(0,l.t)("MAY"),(0,l.t)("JUN"),(0,l.t)("JUL"),(0,l.t)("AUG"),(0,l.t)("SEP"),(0,l.t)("OCT"),(0,l.t)("NOV"),(0,l.t)("DEC")]},c=(0,r.I4)((e=>(0,o.Y)(a.Ay,{getPopupContainer:e=>e.parentElement,children:(0,o.Y)(i.A,{locale:s,...e})})))`
  ${({theme:e})=>`\n\n    /* Boilerplate styling for ReactCronPicker imported explicitly in GlobalStyles.tsx */\n\n    /* When year period is selected */\n\n    :has(.react-js-cron-months) {\n      display: grid !important;\n      grid-template-columns: repeat(2, 50%);\n      column-gap: ${e.gridUnit}px;\n      row-gap: ${2*e.gridUnit}px;\n      div:has(.react-js-cron-hours) {\n        grid-column: span 2;\n        display: flex;\n        justify-content: space-between;\n        .react-js-cron-field {\n          width: 50%;\n        }\n      }\n    }\n\n    /* When month period is selected */\n\n    :not(:has(.react-js-cron-months)) {\n      display: grid;\n      grid-template-columns: repeat(2, 50%);\n      column-gap: ${e.gridUnit}px;\n      row-gap: ${2*e.gridUnit}px;\n      .react-js-cron-period {\n        grid-column: span 2;\n      }\n      div:has(.react-js-cron-hours) {\n        grid-column: span 2;\n        display: flex;\n        justify-content: space-between;\n        .react-js-cron-field {\n          width: 50%;\n        }\n      }\n    }\n\n    /* When week period is selected */\n\n    :not(:has(.react-js-cron-month-days)) {\n      .react-js-cron-week-days {\n        grid-column: span 2;\n      }\n    }\n\n    /* For proper alignment of inputs and span elements */\n\n    :not(div:has(.react-js-cron-hours)) {\n      display: flex;\n      flex-wrap: nowrap;\n    }\n\n    div:has(.react-js-cron-hours) {\n      width: 100%;\n    }\n\n    .react-js-cron-minutes > span {\n      padding-left: ${e.gridUnit}px;\n    }\n\n    /* Sizing of select container */\n\n    .react-js-cron-select.ant-select {\n      width: 100%;\n      .ant-select-selector {\n        flex-wrap: nowrap;\n      }\n    }\n\n    .react-js-cron-field {\n      width: 100%;\n      margin-bottom: 0px;\n      > span {\n        margin-left: 0px;\n      }\n    }\n\n    .react-js-cron-custom-select .ant-select-selection-placeholder {\n      flex: auto;\n      border-radius: ${e.gridUnit}px;\n    }\n\n    .react-js-cron-custom-select .ant-select-selection-overflow-item {\n      align-self: center;\n    }\n\n    .react-js-cron-select > div:first-of-type,\n    .react-js-cron-custom-select {\n      border-radius: ${e.gridUnit}px;\n    }\n  `}
`},83329:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),l=n(19129),r=n(67073),i=n(2445);const o=({onClick:e,tooltipContent:t,disabled:n})=>{const o=(0,a.forwardRef)(((e,t)=>(0,i.Y)(r.F.SyncOutlined,{iconSize:"l",...e})));return(0,i.Y)(l.m_,{title:t,children:(0,i.Y)(o,{role:"button",onClick:n?void 0:e,css:e=>({cursor:"pointer",color:e.colors.grayscale.base,"&:hover":{color:e.colors.primary.base}})})})}}}]);