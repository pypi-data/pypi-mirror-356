"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4113],{562:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(85861),r=t(46920),i=t(40563),s=t(96540),o=t(78518),l=t(2445);const d=function({show:e,onHide:a,title:t,onSave:d,children:u,initialValues:c={},formSubmitHandler:g,bodyStyle:m={},requiredFields:p=[]}){const[h]=i.lV.useForm(),[P,E]=(0,s.useState)(!1),b=(0,s.useCallback)((()=>{h.resetFields(),E(!1)}),[h]),[_,y]=(0,s.useState)(!0),v=(0,s.useCallback)((()=>{b(),a()}),[a,b]),f=(0,s.useCallback)((()=>{b(),d()}),[d,b]),S=(0,s.useCallback)((async e=>{try{E(!0),await g(e),f()}catch(e){console.error(e)}finally{E(!1)}}),[g,f]),w=()=>{const e=h.getFieldsError().some((({errors:e})=>e.length)),a=h.getFieldsValue(),t=p.some((e=>!a[e]));y(e||t)};return(0,l.Y)(n.Ay,{show:e,title:t,onHide:v,bodyStyle:m,footer:(0,l.FD)(l.FK,{children:[(0,l.Y)(r.A,{buttonStyle:"secondary","data-test":"modal-cancel-button",onClick:v,children:(0,o.t)("Cancel")}),(0,l.Y)(r.A,{buttonStyle:"primary",htmlType:"submit",onClick:()=>h.submit(),"data-test":"form-modal-save-button",disabled:P||_,children:P?(0,o.t)("Saving..."):(0,o.t)("Save")})]}),children:(0,l.Y)(i.lV,{form:h,layout:"vertical",onFinish:S,initialValues:c,onValuesChange:w,onFieldsChange:w,children:"function"==typeof u?u(h):u})})}},8960:(e,a,t)=>{var n=t(30327);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},11447:(e,a,t)=>{var n=t(17991),r=t(8960);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var i=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(i))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(i<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var s=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(s))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(s<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var o=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),d=Boolean(e.hideEllipsis),u=d?0:1,c=[],g=r.createPageFunctionFactory(e);if(l||c.push(r.createFirstPageLink(e)),o||c.push(r.createPreviousPageLink(e)),1+2*u+2*s+2*i>=a){var m=n.createRange(1,a).map(g);c.push.apply(c,m)}else{var p=i,h=n.createRange(1,p).map(g),P=a+1-i,E=a,b=n.createRange(P,E).map(g),_=Math.min(Math.max(t-s,p+u+1),P-u-2*s-1),y=_+2*s,v=n.createRange(_,y).map(g);if(c.push.apply(c,h),!d){var f=_-1,S=(f===p+1?g:r.createFirstEllipsis)(f);c.push(S)}if(c.push.apply(c,v),!d){var w=y+1,I=(w===P-1?g:r.createSecondEllipsis)(w);c.push(I)}c.push.apply(c,b)}return o||c.push(r.createNextPageLink(e)),l||c.push(r.createLastPageLink(e)),c};var i=t(30327);a.ITEM_TYPES=i.ITEM_TYPES,a.ITEM_KEYS=i.ITEM_KEYS},17991:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},18575:(e,a,t)=>{a.w$=a.uv=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=o(t(96540)),i=o(t(5556)),s=t(11447);function o(e){return e&&e.__esModule?e:{default:e}}a.uv=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,o=void 0===t?"div":t,l=function(e){var t=e.currentPage,i=e.totalPages,l=e.boundaryPagesRange,d=e.siblingPagesRange,u=e.hideEllipsis,c=e.hidePreviousAndNextPageLinks,g=e.hideFirstAndLastPageLinks,m=e.onChange,p=e.disabled,h=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),P=(0,s.getPaginationModel)({currentPage:t,totalPages:i,boundaryPagesRange:l,siblingPagesRange:d,hideEllipsis:u,hidePreviousAndNextPageLinks:c,hideFirstAndLastPageLinks:g}),E=function(e,a,t){return function(i){var s,o,l,d=e[i.type],u=(o=(s=i).value,l=s.isDisabled,function(){!l&&t&&a!==o&&t(o)});return r.default.createElement(d,n({onClick:u},i))}}(a,t,m);return r.default.createElement(o,h,P.map((function(e){return E(n({},e,{isDisabled:!!p}))})))};return l.propTypes={currentPage:i.default.number.isRequired,totalPages:i.default.number.isRequired,boundaryPagesRange:i.default.number,siblingPagesRange:i.default.number,hideEllipsis:i.default.bool,hidePreviousAndNextPageLinks:i.default.bool,hideFirstAndLastPageLinks:i.default.bool,onChange:i.default.func,disabled:i.default.bool},l},a.w$=s.ITEM_TYPES},30327:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},38736:(e,a,t)=>{t.d(a,{I:()=>o});var n=t(35742),r=t(78518),i=t(58561),s=t.n(i);const o=async({endpoint:e,pageSize:a=100,setData:t,filters:i,setLoadingState:o,loadingKey:l,addDangerToast:d,errorMessage:u="Error while fetching data",mapResult:c=e=>e})=>{try{const r=async t=>{const r={page_size:a,page:t};i&&(r.filters=i);const o=s().encode(r),l=await n.A.get({endpoint:`${e}?q=${o}`});return{count:l.json.count,results:l.json.result.map(c)}},o=await r(0),l=o.count,d=o.results;if(a>=l)return void t(d);const u=Math.ceil(l/a),g=Array.from({length:u-1},((e,a)=>r(a+1))),m=await Promise.all(g);t([...d,...m.flatMap((e=>e.results))])}catch(e){d((0,r.t)(u))}finally{o((e=>"boolean"!=typeof e&&{...e,[l]:!1}))}}},50068:(e,a,t)=>{t.d(a,{Dj:()=>o.Dj,cp:()=>o.cp,Ay:()=>s});var n=t(96453),r=t(2445);const i=n.I4.span`
  &,
  & svg {
    vertical-align: top;
  }
`;function s({checked:e=!1,onChange:a,style:t,className:n}){return(0,r.Y)(i,{style:t,onClick:()=>{a(!e)},role:"checkbox",tabIndex:0,"aria-checked":e,"aria-label":"Checkbox",className:n||"",children:e?(0,r.Y)(o.Dj,{}):(0,r.Y)(o.cp,{})})}var o=t(75264)},73856:(e,a,t)=>{t.r(a),t.d(a,{default:()=>M});var n=t(96540),r=t(96453),i=t(78518),s=t(17437),o=t(50500),l=t(51713),d=t(83691),u=t(43849),c=t(37020),g=t(63358),m=t(65256),p=t(67073),h=t(5261),P=t(562),E=t(40563),b=t(90868),_=t(50068),y=t(28990),v=t(27023),f=t(35742);const S=async e=>f.A.delete({endpoint:`/api/v1/security/users/${e}`}),w=e=>({getFieldValue:a})=>({validator(t,n){const r=n||[],s=a(e)||[];return 0===r.length&&0===s.length?Promise.reject(new Error((0,i.t)("Please select at least one role or group"))):Promise.resolve()}});var I=t(2445);function A({show:e,onHide:a,onSave:t,roles:n,isEditMode:r=!1,user:s,groups:o}){var l,d;const{addDangerToast:u,addSuccessToast:c}=(0,h.Yf)(),g=r?["first_name","last_name","username","email"]:["first_name","last_name","username","email","password","confirmPassword"],m={...s,roles:(null==s||null==(l=s.roles)?void 0:l.map((e=>e.id)))||[],groups:(null==s||null==(d=s.groups)?void 0:d.map((e=>e.id)))||[]};return(0,I.Y)(P.A,{show:e,onHide:a,title:r?(0,i.t)("Edit User"):(0,i.t)("Add User"),onSave:t,formSubmitHandler:async e=>{const a=async(e,a)=>{let t=a===v.En.CREATE?(0,i.t)("There was an error creating the user. Please, try again."):(0,i.t)("There was an error updating the user. Please, try again.");if(422===e.status){const a=await e.json(),n=(null==a?void 0:a.message)||"";n.includes("duplicate key value")&&(n.includes("ab_user_username_key")?t=(0,i.t)("This username is already taken. Please choose another one."):n.includes("ab_user_email_key")&&(t=(0,i.t)("This email is already associated with an account. Please choose another one.")))}throw u(t),e};if(r){if(!s)throw new Error("User is required in edit mode");try{await(async(e,a)=>{await f.A.put({endpoint:`/api/v1/security/users/${e}`,jsonPayload:{...a}})})(s.id,e),c((0,i.t)("The user has been updated successfully."))}catch(e){await a(e,v.En.UPDATE)}}else try{await(async e=>{const{confirmPassword:a,...t}=e;null==t.active&&(t.active=!1),await f.A.post({endpoint:"/api/v1/security/users/",jsonPayload:{...t}})})(e),c((0,i.t)("The group has been created successfully."))}catch(e){await a(e,v.En.CREATE)}},requiredFields:g,initialValues:m,children:e=>(0,I.FD)(I.FK,{children:[(0,I.Y)(E.eI,{name:"first_name",label:(0,i.t)("First name"),rules:[{required:!0,message:(0,i.t)("First name is required")}],children:(0,I.Y)(b.pd,{name:"first_name",placeholder:(0,i.t)("Enter the user's first name")})}),(0,I.Y)(E.eI,{name:"last_name",label:(0,i.t)("Last name"),rules:[{required:!0,message:(0,i.t)("Last name is required")}],children:(0,I.Y)(b.pd,{name:"last_name",placeholder:(0,i.t)("Enter the user's last name")})}),(0,I.Y)(E.eI,{name:"username",label:(0,i.t)("Username"),rules:[{required:!0,message:(0,i.t)("Username is required")}],children:(0,I.Y)(b.pd,{name:"username",placeholder:(0,i.t)("Enter the user's username")})}),(0,I.Y)(E.eI,{name:"active",label:(0,i.t)("Is active?"),valuePropName:"checked",children:(0,I.Y)(_.Ay,{onChange:a=>{e.setFieldsValue({isActive:a})}})}),(0,I.Y)(E.eI,{name:"email",label:(0,i.t)("Email"),rules:[{required:!0,message:(0,i.t)("Email is required")},{type:"email",message:(0,i.t)("Please enter a valid email address")}],children:(0,I.Y)(b.pd,{name:"email",placeholder:(0,i.t)("Enter the user's email")})}),(0,I.Y)(E.eI,{name:"roles",label:(0,i.t)("Roles"),dependencies:["groups"],rules:[w("groups")],children:(0,I.Y)(y.A,{name:"roles",mode:"multiple",placeholder:(0,i.t)("Select roles"),options:n.map((e=>({value:e.id,label:e.name}))),getPopupContainer:e=>e.closest(".antd5-modal-content")})}),(0,I.Y)(E.eI,{name:"groups",label:(0,i.t)("Groups"),dependencies:["roles"],rules:[w("roles")],children:(0,I.Y)(y.A,{name:"groups",mode:"multiple",placeholder:(0,i.t)("Select groups"),options:o.map((e=>({value:e.id,label:e.name}))),getPopupContainer:e=>e.closest(".antd5-modal-content")})}),!r&&(0,I.FD)(I.FK,{children:[(0,I.Y)(E.eI,{name:"password",label:(0,i.t)("Password"),rules:[{required:!0,message:(0,i.t)("Password is required")}],children:(0,I.Y)(b.pd.Password,{name:"password",placeholder:"Enter the user's password"})}),(0,I.Y)(E.eI,{name:"confirmPassword",label:(0,i.t)("Confirm Password"),dependencies:["password"],rules:[{required:!0,message:(0,i.t)("Please confirm your password")},({getFieldValue:e})=>({validator:(a,t)=>t&&e("password")!==t?Promise.reject(new Error((0,i.t)("Passwords do not match!"))):Promise.resolve()})],children:(0,I.Y)(b.pd.Password,{name:"confirmPassword",placeholder:(0,i.t)("Confirm the user's password")})})]})]})})}const T=e=>(0,I.Y)(A,{...e,isEditMode:!1}),L=e=>(0,I.Y)(A,{...e,isEditMode:!0});var Y,k=t(38736),C=t(19129);!function(e){e.ADD="add",e.EDIT="edit"}(Y||(Y={}));const N=[{label:"Yes",value:!0},{label:"No",value:!1}],M=function({user:e}){const a=(0,r.DP)(),{addDangerToast:t,addSuccessToast:P}=(0,h.Yf)(),{state:{loading:E,resourceCount:b,resourceCollection:_,bulkSelectEnabled:y},fetchData:v,refreshData:f,toggleBulkSelect:w}=(0,o.RU)("security/users",(0,i.t)("User"),t),[A,M]=(0,n.useState)({edit:!1,add:!1}),F=e=>M((a=>({...a,[e]:!0}))),D=e=>M((a=>({...a,[e]:!1}))),[R,K]=(0,n.useState)(null),[H,x]=(0,n.useState)(null),[G,U]=(0,n.useState)({roles:!0,groups:!0}),[j,q]=(0,n.useState)([]),[V,O]=(0,n.useState)([]),B=(0,n.useMemo)((()=>{if(!_||0===_.length)return{min:0,max:0};const e=_.map((e=>e.login_count));return{min:Math.min(...e),max:Math.max(...e)}}),[_]),$=(0,n.useMemo)((()=>{if(!_||0===_.length)return{min:0,max:0};const e=_.map((e=>e.fail_login_count));return{min:Math.min(...e),max:Math.max(...e)}}),[_]),z=(0,n.useMemo)((()=>(0,m.N6)(e)),[e]),X=(0,n.useCallback)((()=>{(0,k.I)({endpoint:"/api/v1/security/roles/",setData:q,setLoadingState:U,loadingKey:"roles",addDangerToast:t,errorMessage:(0,i.t)("Error while fetching roles")})}),[t]),W=(0,n.useCallback)((()=>{(0,k.I)({endpoint:"/api/v1/security/groups/",setData:O,setLoadingState:U,loadingKey:"groups",addDangerToast:t,errorMessage:(0,i.t)("Error while fetching groups")})}),[t]);(0,n.useEffect)((()=>{X()}),[X]),(0,n.useEffect)((()=>{W()}),[W]);const J=[{id:"username",desc:!0}],Q=(0,n.useMemo)((()=>[{accessor:"first_name",Header:(0,i.t)("First name"),id:"first_name",Cell:({row:{original:{first_name:e}}})=>(0,I.Y)("span",{children:e})},{accessor:"last_name",Header:(0,i.t)("Last name"),id:"last_name",Cell:({row:{original:{last_name:e}}})=>(0,I.Y)("span",{children:e})},{accessor:"username",Header:(0,i.t)("Username"),id:"username",Cell:({row:{original:{username:e}}})=>(0,I.Y)("span",{children:e})},{accessor:"email",Header:(0,i.t)("Email"),id:"email",Cell:({row:{original:{email:e}}})=>(0,I.Y)("span",{children:e})},{accessor:"active",Header:(0,i.t)("Is active?"),id:"active",Cell:({row:{original:{active:e}}})=>(0,I.Y)("span",{children:e?"Yes":"No"})},{accessor:"roles",Header:(0,i.t)("Roles"),id:"roles",Cell:({row:{original:{roles:e}}})=>(0,I.Y)(C.m_,{title:(null==e?void 0:e.map((e=>e.name)).join(", "))||(0,i.t)("No roles"),children:(0,I.Y)("span",{children:null==e?void 0:e.map((e=>e.name)).join(", ")})}),disableSortBy:!0},{accessor:"groups",Header:(0,i.t)("Groups"),id:"groups",Cell:({row:{original:{groups:e}}})=>(0,I.Y)(C.m_,{title:(null==e?void 0:e.map((e=>e.name)).join(", "))||(0,i.t)("No groups"),children:(0,I.Y)("span",{children:null==e?void 0:e.map((e=>e.name)).join(", ")})}),disableSortBy:!0},{accessor:"login_count",Header:(0,i.t)("Login count"),id:"login_count",hidden:!0,Cell:({row:{original:e}})=>e.login_count},{accessor:"fail_login_count",Header:(0,i.t)("Fail login count"),id:"fail_login_count",hidden:!0,Cell:({row:{original:e}})=>e.fail_login_count},{accessor:"created_on",Header:(0,i.t)("Created on"),id:"created_on",hidden:!0,Cell:({row:{original:{created_on:e}}})=>e},{accessor:"changed_on",id:"changed_on",Header:(0,i.t)("Changed on"),hidden:!0,Cell:({row:{original:{changed_on:e}}})=>e},{accessor:"last_login",Header:(0,i.t)("Last login"),id:"last_login",hidden:!0,Cell:({row:{original:{last_login:e}}})=>e},{Cell:({row:{original:e}})=>{const a=z?[{label:"user-list-edit-action",tooltip:(0,i.t)("Edit user"),placement:"bottom",icon:"EditOutlined",onClick:()=>{K(e),F(Y.EDIT)}},{label:"role-list-delete-action",tooltip:(0,i.t)("Delete user"),placement:"bottom",icon:"DeleteOutlined",onClick:()=>x(e)}]:[];return(0,I.Y)(d.A,{actions:a})},Header:(0,i.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!z,size:"xl"}]),[z]),Z=[];z&&Z.push({name:(0,I.FD)(I.FK,{children:[(0,I.Y)(p.F.PlusOutlined,{iconColor:a.colors.primary.light5,iconSize:"m",css:s.AH`
                margin: auto ${2*a.gridUnit}px auto 0;
                vertical-align: text-top;
              `}),(0,i.t)("User")]}),buttonStyle:"primary",onClick:()=>{F(Y.ADD)},loading:G.roles||G.groups,"data-test":"add-user-button"},{name:(0,i.t)("Bulk select"),onClick:w,buttonStyle:"secondary"});const ee=(0,n.useMemo)((()=>[{Header:(0,i.t)("First name"),key:"first_name",id:"first_name",input:"search",operator:u.t.Contains},{Header:(0,i.t)("Last name"),key:"last_name",id:"last_name",input:"search",operator:u.t.Contains},{Header:(0,i.t)("Username"),key:"username",id:"username",input:"search",operator:u.t.Contains},{Header:(0,i.t)("Email"),key:"email",id:"email",input:"search",operator:u.t.Contains},{Header:(0,i.t)("Is active?"),key:"active",id:"active",input:"select",operator:u.t.Equals,unfilteredLabel:(0,i.t)("All"),selects:null==N?void 0:N.map((e=>({label:e.label,value:e.value})))},{Header:(0,i.t)("Roles"),key:"roles",id:"roles",input:"select",operator:u.t.RelationManyMany,unfilteredLabel:(0,i.t)("All"),selects:null==j?void 0:j.map((e=>({label:e.name,value:e.id}))),loading:G.roles},{Header:(0,i.t)("Groups"),key:"groups",id:"groups",input:"select",operator:u.t.RelationManyMany,unfilteredLabel:(0,i.t)("All"),selects:null==V?void 0:V.map((e=>({label:e.name,value:e.id}))),loading:G.groups},{Header:(0,i.t)("Created on"),key:"created_on",id:"created_on",input:"datetime_range",operator:u.t.Between,dateFilterValueType:"iso"},{Header:(0,i.t)("Changed on"),key:"changed_on",id:"changed_on",input:"datetime_range",operator:u.t.Between,dateFilterValueType:"iso"},{Header:(0,i.t)("Last login"),key:"last_login",id:"last_login",input:"datetime_range",operator:u.t.Between,dateFilterValueType:"iso"},{Header:(0,i.t)("Login count"),key:"login_count",id:"login_count",input:"numerical_range",operator:u.t.Between,min:B.min,max:B.max},{Header:(0,i.t)("Fail login count"),key:"fail_login_count",id:"fail_login_count",input:"numerical_range",operator:u.t.Between}]),[G.roles,j,V,G.groups,B,$]),ae={title:(0,i.t)("No users yet"),image:"filter-results.svg",...z&&{buttonAction:()=>{F(Y.ADD)},buttonText:(0,I.FD)(I.FK,{children:[(0,I.Y)(p.F.PlusOutlined,{iconColor:a.colors.primary.light5,iconSize:"m",css:s.AH`
              margin: auto ${2*a.gridUnit}px auto 0;
              vertical-align: text-top;
            `}),(0,i.t)("User")]})}};return(0,I.FD)(I.FK,{children:[(0,I.Y)(l.A,{name:(0,i.t)("List Users"),buttons:Z}),(0,I.Y)(T,{onHide:()=>D(Y.ADD),show:A.add,onSave:()=>{f(),D(Y.ADD)},roles:j,groups:V}),A.edit&&R&&(0,I.Y)(L,{user:R,show:A.edit,onHide:()=>D(Y.EDIT),onSave:()=>{f(),D(Y.EDIT)},roles:j,groups:V}),H&&(0,I.Y)(c.A,{description:(0,i.t)("This action will permanently delete the user."),onConfirm:()=>{H&&(async({id:e,username:a})=>{try{await S(e),f(),x(null),P((0,i.t)("Deleted user: %s",a))}catch(e){t((0,i.t)("There was an issue deleting %s",a))}})(H)},onHide:()=>x(null),open:!0,title:(0,i.t)("Delete User?")}),(0,I.Y)(g.A,{title:(0,i.t)("Please confirm"),description:(0,i.t)("Are you sure you want to delete the selected users?"),onConfirm:e=>{const a=[];Promise.all(e.map((e=>S(e.id).then((()=>{a.push(e.username)})).catch((a=>{t((0,i.t)("Error deleting %s",e.username))}))))).then((()=>{a.length>0&&P((0,i.t)("Deleted users: %s",a.join(", ")))})).finally((()=>{f()}))},children:e=>{const a=z?[{key:"delete",name:(0,i.t)("Delete"),onSelect:e,type:"danger"}]:[];return(0,I.Y)(u.A,{className:"user-list-view",columns:Q,count:b,data:_,fetchData:v,filters:ee,initialSort:J,loading:E,pageSize:25,bulkActions:a,bulkSelectEnabled:y,disableBulkSelect:w,addDangerToast:t,addSuccessToast:P,emptyState:ae,refreshData:f})}})]})}},83691:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(96453),r=t(19129),i=t(67073),s=t(2445);const o=n.I4.span`
  white-space: nowrap;
  min-width: 100px;
  svg,
  i {
    margin-right: 8px;

    &:hover {
      path {
        fill: ${({theme:e})=>e.colors.primary.base};
      }
    }
  }
`,l=n.I4.span`
  color: ${({theme:e})=>e.colors.grayscale.base};
`;function d({actions:e}){return(0,s.Y)(o,{className:"actions",children:e.map(((e,a)=>{const t=i.F[e.icon];return e.tooltip?(0,s.Y)(r.m_,{id:`${e.label}-tooltip`,title:e.tooltip,placement:e.placement,children:(0,s.Y)(l,{role:"button",tabIndex:0,className:"action-button","data-test":e.label,onClick:e.onClick,children:(0,s.Y)(t,{iconSize:"l"})})},a):(0,s.Y)(l,{role:"button",tabIndex:0,className:"action-button",onClick:e.onClick,"data-test":e.label,children:(0,s.Y)(t,{})},a)}))})}}}]);