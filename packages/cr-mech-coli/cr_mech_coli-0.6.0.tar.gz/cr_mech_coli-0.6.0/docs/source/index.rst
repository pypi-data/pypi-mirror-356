.. cr_mech_coli documentation master file, created by
   sphinx-quickstart on Tue Jul 30 00:53:55 2024.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

cr_mech_coli
############

.. image:: https://img.shields.io/github/license/jonaspleyer/cr_mech_coli\?style=flat-square
   :alt: GPLv2 License
.. image:: https://img.shields.io/github/actions/workflow/status/jonaspleyer/cr_mech_coli/CI.yml?style=flat-square&label=CI
   :alt: Test Status
.. image:: https://img.shields.io/github/actions/workflow/status/jonaspleyer/cr_mech_coli/sphinx_doc.yml?style=flat-square&label=Docs
   :alt: Build Status

This package is centered around a mechanical model for rod-shaped bacteria such as `E.Coli`.

:ref:`Model <model>`
--------------------

The model is mechanistic and coarse-grained enough such that we can estimate its parameters from
even a small dataset.
Its low computational cost mean that it can be readily applied in the construction of other
Agent-Based Simulations within :code:`cellular_raza` :cite:`Pleyer_cellular_raza_2023`.

:ref:`Fitting Methods <fitting-methods>`
----------------------------------------

To quantify if calculated results from our model match with given experimental data, we need to
extract agent information from masks and compare them with calculated results.
To capture the spatial effects and make our methods applicable in a wider context, we focus on the
masks instead of other possible approaches.
We use methods from :code:`sciki-image` :cite:`vanderWalt2014`.

:ref:`Image Generation <image-generation>`
------------------------------------------

We use :code:`pyvista` :cite:`Sullivan2019` to create a 3D image which contains
complex lighting and occlusion effects which would be harder to reproduce in a 2D plot.
Afterwards, defects are inserted with :code:`opencv`:cite:`opencv_library` to mimick effects such as
optical aberration, sensor noise or other imperfections which can be introduced by the measurement
device.

:ref:`Cell Segmentation <cell-segmentation>`
--------------------------------------------

The data generated by such simulations can be used to create labelled images which can then be used
to train deep-learning image-segmentation algorithms.
The quality of training data is dependent on our ability to reverse-engineer realistic microscopy
images from the generated simulation data.
We are planning to use `pytorch <https://pytorch.org>`_'s 'Faster R-CNN'
:cite:`https://doi.org/10.48550/arxiv.1506.01497` to tackle this task.

The images below show the steps outlined above.

.. subfigure:: ABC
    :layout-sm: A|B|C
    :gap: 8px
    :subcaptions: below
    :class-grid: outline

    .. image:: _static/09395645494836445480/raw_pv/000000200.png
    .. image:: _static/09395645494836445480/images/000000200.png
    .. image:: _static/09395645494836445480/masks/000000200.png

    Snapshots at `t=20min`.

.. subfigure:: ABC
    :layout-sm: A|B|C
    :gap: 8px
    :subcaptions: below
    :class-grid: outline

    .. image:: _static/09395645494836445480/raw_pv/000000400.png
    .. image:: _static/09395645494836445480/images/000000400.png
    .. image:: _static/09395645494836445480/masks/000000400.png

    Snapshots at `t=40min`.

.. subfigure:: ABC
    :layout-sm: A|B|C
    :gap: 8px
    :subcaptions: below
    :class-grid: outline

    .. image:: _static/09395645494836445480/raw_pv/000000600.png
    .. image:: _static/09395645494836445480/images/000000600.png
    .. image:: _static/09395645494836445480/masks/000000600.png

    Snapshots at `t=60min`.

.. toctree::
   :maxdepth: 4
   :caption: Contents:
   :titlesonly:
   :hidden:

    Documentation <documentation/index>
    Scripts <scripts/index>
    Model <model>
    Fitting Methods <fitting-methods>
    Image Generation <image-generation>
    Cell Segmentation <cell-segmentation>
    Performance <performance>
    References <references>
    Changelog <changelog>
    Todo <todo>

Indices and tables
##################

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`

