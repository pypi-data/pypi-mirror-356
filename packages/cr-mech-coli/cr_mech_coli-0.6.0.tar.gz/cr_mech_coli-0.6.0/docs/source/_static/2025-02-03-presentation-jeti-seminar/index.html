<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>A Mechanical Model of Rod-Shaped Bacteria</title>

        <link rel="stylesheet" href="reveal.js/dist/reset.css">
        <link rel="stylesheet" href="reveal.js/dist/reveal.css">
        <link rel="stylesheet" href="black.css">

        <!-- Theme used for syntax highlighted code -->
        <!-- <link rel="stylesheet" href="plugin/highlight/pojoaque.css"> -->
        <!-- <link rel="stylesheet" href="plugin/highlight/shadows-of-purple.css"> -->
        <link rel="stylesheet" href="stackoverflow-dark.css">

        <style>
        .n-slides {
            display: inline;
            color: #555;
        }
        </style>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
                    <textarea data-template>
                        ## A Mechanical Model of
                        ## Rod-Shaped Bacteria
                        #### Jonas Pleyer
                        ##### 03.02.2025

                        ---

                        ## Overview

                        <!-- TODO this could be the right spot for a nice image
                        - Biology: Rod-Shaped Bacteria
                        - Physics: Mechanical Properties of Rods
                        - Numerics: Agent-Based Modeling: Constructing a Model
                        - Optimization & Parameter Estimation
                        - Future Endeavours
                        -->

                        | | |
                        |:---|---|
                        | 1. Rod-Shaped Bacteria | <div class="n-slides"> (3 slides)</div> |
                        | 2. Mathematical Model | <div class="n-slides"> (9 slides)</div>|
                        | 3. Computational Algorithms | <div class="n-slides"> (5 slides)</div>|
                        | 4. Parameter Estimation | <div class="n-slides"> (3 slides)</div>|
                        | 5. Outlook | <div class="n-slides"> (2 slide)</div>|

                    </textarea>
                </section>
                <section>
                <section data-markdown data-auto-animate data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
                    <textarea data-template>

                        ## Rod-Shaped Bacteria

                        <div style="display: grid; grid-template-columns: 50% 40%; grid-column-gap:
                            5%; margin-left: 2.5%;"><div>

                        - One of many bacterial
                          shapes<!-- .element: class="fragment" data-fragment-index="1" -->
                            - We do not consider coccobacillus (elliptical shape)
                              for now<!-- .element: class="fragment" -->
                            - Main interest: bacillus<!-- .element: class="fragment" -->
                        - Length $\approx 1-10µm$, Diameter$\approx0.5-2µm$
                          <!-- .element: class="fragment" -->
                        - Elongated shape (not simply point-particle) but flexible
                          <!-- .element: class="fragment" -->
                          [(Amir et al., 2014)](https://doi.org/10.1073/pnas.1317497111)
                        - Asymmetric growth in direction of long axis
                          <!-- .element: class="fragment" -->
                        - <!-- .element: class="fragment" -->Why are we interested in this?<br>
                          <div style="color: orange;">$\Rightarrow$ We will get to that later</div>
                          

                        </div><div class="fragment" data-fragment-index="1">
                        <img src="./Bacterial_morphology_diagram.svg" />
                        <div style="font-size: 0.6em">wikimedia.org/wiki/File:Bacterial_morphology_diagram.svg</div>
                        </div>
                        </div>

                    </textarea>
                </section>
                <section data-markdown data-auto-animate data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
                    <textarea data-template>

                        ## Rod-Shaped Bacteria

                        [(Amir et al., 2014)](https://doi.org/10.1073/pnas.1317497111)

                        ![](amir-et-al-2014.webp)

                        $\Rightarrow$ Anisotropic Mechanical Stress-Driven Differential Growth of Cell Walls

                    </textarea>
                </section>
                </section>
                <section data-auto-animate>
                    <h2>Rod-Shaped Bacteria</h2>
                    <h4>Growth of <em>E.Coli</em></h4>
                    <video height=800px controls preload src="growth-2.mp4"></video>
                    <div style="font-size: 0.6em;">Institut für den Wissenschaftlichen Film - Göttingen 1981</div>
                </section>
                <section data-markdown data-auto-animate data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
                    <textarea data-template>

                        ## Rod-Shaped Bacteria

                        #### State of current models

                        | ABM/Paper | State |
                        |:---|:---|
                        | Biocellion | Only cylindrical potentials |
                        | BSim | Supports Rod-Shaped Bacteria; No parameters estimated. |
                        | `gro` | <div style="width: 100%; text-align: center;">⎯⎯⎯ \" ⎯⎯⎯<div> |
                        | [(Martins et al., 2015)](https://doi.org/10.1109/ENBENG.2015.7088854) | Constructed model but no parameter estimations. |
                        | [(Winkle et al., 2017)](https://doi.org/10.1088/1478-3975/aa7bae) | Authors used game engine `Chipmunk3D` to simulate<br>rods but only studied global phenomena. |
                        | [(Doumic et al, 2020)](https://doi.org/10.3934/mbe.2020356) | Estimated distribution of some parameters (growth rate,<br>length) but no bending and not on individual level. |

                        <div class="fragment" style="color: orange;">

                        $\Rightarrow$ No literature on measuring properties of individual cells!

                        </div>

                    </textarea>
                </section>
                <section data-markdown data-auto-animate>
                    <textarea data-template>

                        ## Mechanics

                        <div style="display: grid; grid-template-columns: 1fr 1fr;"><div class="fragment" data-fragment-index="2">

                        - Vertices $\vec{x}_i$ connected by springs
                        - Exert force between two adjacent vertices

                        $$
                            \vec{c}\_i = \vec{x}\_{i}-\vec{x}\_{i-1}
                        $$
                        $$\\begin{align}
                            \vec{F}\_{i,\text{springs}} =
                                &-\gamma\left(1 - \\frac{l}{\left|\vec{c}\_i\right|}\right)
                                \vec{c}\_i\\\\
                                &+ \gamma\left(1 - \\frac{l}{\left|\vec{c}\_{i+1}\right|}\right)
                                \vec{c}\_{i+1}
                        \\end{align}$$

                        </div><img src="../mechanics.png"></div>
                    </textarea>
                </section>
                <section data-markdown data-auto-animate>
                    <textarea data-template>
                        <h2>Mechanics</h2>
                        <div style="display: grid; grid-template-columns: 45% 55%;">
                            <img src="../mechanics.png">
                            <div class="fragment" data-fragment-index="1">


                        - Bending force acts on vertices
                          $\vec{x}\_{i-1},\vec{x}\_i,\vec{x}\_{i+1}$
                          <!-- .element: class="fragment" -->
                        - Proportional to curvature $\kappa\_i$ at vertex $\vec{x}\_i$
                          <!-- .element: class="fragment" -->

                        $$\\begin{align}
                            \kappa\_i &= 2\tan\left(\frac{\alpha\_i}{2}\right)\\\\
                            \vec{F}\_{i,\text{curvature}} &= \eta\kappa_i
                                \frac{\vec{c}\_i - \vec{c}\_{i+1}}{|\vec{c}\_i-\vec{c}\_{i+1}|}\\\\
                            \vec{F}\_{i-1,\text{curvature}} &= -\frac{1}{2}\vec{F}\_{i,\text{curvature}}\\\\
                            \vec{F}\_{i+1,\text{curvature}} &= -\frac{1}{2}\vec{F}\_{i,\text{curvature}}
                        \\end{align}$$
                        <!-- .element: class="fragment" -->

                        ---

                        ## Mechanics

                        1. Sum all forces
                           <!-- .element: class="fragment" -->

                        $$\begin{equation}
                            \vec{F}\_{i,\text{total}} = \vec{F}\_{i,\text{springs}}+ \vec{F}\_{i,\text{curvature}}
                            + \vec{F}\_{i,\text{external}}
                        \end{equation}$$
                        <!-- .element: class="fragment" -->

                        2. Integrate equations of motion
                           <!-- .element: class="fragment" -->

                        $$\begin{align}
                            \partial\_t^2 \vec{x} &= \partial_t\vec{x} + \sqrt{2D}\vec{\xi}\\\\
                            \partial\_t\vec{x} &= \vec{F}\_\text{total} - \lambda \partial_t\vec{x}
                        \end{align}$$
                        <!-- .element: class="fragment" -->

                        </div>
                    </textarea>
                </section>
                <section data-auto-animate data-markdown data-separator="^\n---\n$" data-separator-vertical="^\n--\n$">
                    <textarea data-template>

                        <div style="display: grid; grid-template-columns: 1fr 1fr;">
                        <div>

                        ## Growth

                        - Elongation is constant in length growth<br>
                          <!-- .element: class="fragment" -->
                          [(Grover et al., 1977](https://doi.org/10.1016/0022-5193(77)90192-8)
                          [Rosenberger et al., 1978)](https://doi.org/10.1016/0022-5193(78)90132-7)
                        - Model as linear growth
                          <!-- .element: class="fragment" -->

                        $$\\begin{equation}
                            \partial\_t l = \mu
                        \\end{equation}$$
                        <!-- .element: class="fragment" -->

                        - For larger collections: introduce phenomenological saturation term
                          depending on number of neighbors $n$
                          <!-- .element: class="fragment" -->

                        $$\\begin{equation}
                            \partial\_t l = \mu\left(1 - \frac{\text{min}(n, N)}{N}\right)
                        \\end{equation}$$
                        <!-- .element: class="fragment" -->

                        </div><div>

                        ## Cell Cycle

                        1. Cell divides in the middle when reaching threshold length
                           $l\_\text{max}$
                           <!-- .element: class="fragment" -->
                        2. Calculate new spring lengths
                           <!-- .element: class="fragment" -->
                        3. Calculate new positions of vertices for both cells
                           (interpolate new vertices between vertices of mother-cell)
                           <!-- .element: class="fragment" -->
                        4. (Optional) Pick new growth rate (or other parameters)
                           <!-- .element: class="fragment" -->

                        </div>

                        ---

                        ## Interaction

                        <div style="display: grid; grid-template-columns: 1fr 2fr;">
                        <img src="../mechanics.png"><div>

                        - Calculate interaction for each vertex $\vec{x}\_i$
                          <!-- .element: class="fragment" -->
                        - Pointwise to nearest point on ther cells polygon
                          <!-- .element: class="fragment" -->

                        $$\vec{p} = h\vec{w}\_j + (1-h)\vec{w}\_{j+1}$$
                        <!-- .element: class="fragment" -->

                        ```rust
                        for (i, vi) in vertices_cell_1.iter().enumerate() {
                            // Calculate nearest point, index and segment as above
                            let (p, j, h) = get_nearest_point_index_segment(&vi, &cell2)?;

                            // Calculate force between these two points
                            let calculated_force = cell1.calculate_force_between(&p)?;

                            // Store calculated force for cell1 and cell2
                            forces_cell_1[i] +=         calculated_force;
                            forces_cell_2[j] -=    h  * calculated_force;
                            forces_cell_2[j] -= (1-h) * calculated_force;
                        }
                        ```
                        <!-- .element: class="fragment" -->

                        </div>
                        </div>

                        ---

                        ## Interaction
                        #### Morse-Potential

                        \\begin{equation}
                            V(r) = V_0\left(1 - e^{-\lambda(r-R)}\right)^2
                        \\end{equation}

                        <div style="display: grid; grid-template-columns: 1fr 1fr; width: 100%;">
                        <div class="fragment" data-fragment-index="1">

                        <img src="morse_potential.png">

                        </div>
                        <div class="fragment" data-fragment-index="2">

                        | | Name | Type | |
                        |---:|:---|:---:|:---:|
                        | $R$ | Radius | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\lambda$ | Stiffness | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\zeta$ | Cutoff | `f32`$\in\mathbb{R}^+$ | Assumption |
                        | $V_0$ | Strength | `f32`$\in\mathbb{R}^+$ | Fit |

                        </div>
                        </div>

                        ---

                        ## Interaction
                        #### Mie-Potential

                        <div style="display: grid; grid-template-columns: 47% 53%; width: 100%;">
                        <div clas="fragment" data-fragment-index="3">

                        \\begin{equation}
                            U(r) = C\epsilon\left[ \left(\frac{\sigma}{r}\right)^n -
                                \left(\frac{\sigma}{r}\right)^m\right]
                        \\end{equation}

                        </div>
                        <div clas="fragment" data-fragment-index="3">

                        \\[
                            C = \frac{n}{n-m}\left(\frac{n}{m}\right)^{\frac{n}{n-m}}
                        \\]

                        </div>
                        <div class="fragment" data-fragment-index="1">

                        <img src="mie_potential.png">

                        </div>
                        <div class="fragment" data-fragment-index="2">

                        | | Name | Type | |
                        |---:|:---|:---:|:---:|
                        | $R$ | Radius | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\epsilon$ | Strength | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\beta$ | Bound | `f32`$\in\mathbb{R}^+$ | Assumption |
                        | $\zeta$ | Cutoff | `f32`$\in\mathbb{R}^+$ | Assumption |
                        | $n,m$ | Exponents | `f32`$\in\mathbb{R}^+$ | Fit |

                        </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 50% 50%; width: 100%;">

                        </div>

                        ---

                        ## Comparison of Interaction Potentials

                        <div style="display: grid; grid-template-columns: 50% 50%; width: 100%;">
                        <!-- <img src="morse_potential.png">
                        <img src="mie_potential.png"> -->

                        ### Morse
                        ### Mie

                        <div>

                        - Less steep for $r\rightarrow0$
                        - Width of the well affects range and steepness
                        - Less parameters

                        </div>
                        <div>

                        - Can represent more types of interactions
                        - Needs an upper bound for $r\rightarrow0$

                        </div>
                        </div>

                        ---

                        <div style="display: grid; grid-template-columns: 45% 55%; width: 100%;">
                        <img
                            src="https://cellular-raza.com/logos/cellular_raza_dark_mode.svg"
                            style="margin: auto;"
                        />
                        <h2 style="margin: auto;">Variables/Parameters</h2>
                        <div>


                        <div class="fragment">

                        ```rust [1-2|3-5|6-8|9-13|1-13]
                        #[derive(CellAgent, Clone, Debug, Deserialize, Serialize)]
                        pub struct RodAgent {
                            /// Determines mechanical properties of the agent
                            #[Mechanics]
                            pub mechanics: RodMechanics&lt;f32, 3&gt;,
                            /// Determines interaction between agents
                            #[Interaction]
                            pub interaction: RodInteraction&lt;PhysicalInteraction&gt;,
                            /// Rate with which the cell grows
                            pub growth_rate: f32,
                            /// Threshold at which the cell will divide
                            pub division_length: f32,
                        }
                        ```
                        </div>
                        <div class="fragment">

                        ```rust [1-2|3-6|7-16|1-17]
                        #[derive(Clone, Debug, PartialEq)]
                        pub struct RodMechanics&lt;f32, 3&gt; {
                            /// The current position
                            pub pos: Matrix&lt;f32, Dyn, Const&lt;3&gt;, _&gt;,
                            /// The current velocity
                            pub vel: Matrix&lt;f32, Dyn, Const&lt;3&gt;, _&gt;,
                            /// Controls stochastic motion
                            pub diffusion_constant: f32,
                            /// Spring tension between vertices
                            pub spring_tension: f32,
                            /// Stiffness between two edges
                            pub rigidity: f32,
                            /// Target spring length
                            pub spring_length: f32,
                            /// Daming constant
                            pub damping: f32,
                        }
                        ```

                        </div>
                        </div>
                        <div>
                        <div class="fragment">

                        | | Property | Type | |
                        |---:|:---|:---:|:---:|
                        | $\mu$ | Growth Rate | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $l_\text{max}$ | Division Length | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\vec{x}_i$ | Position | `Matrix`$\in\mathbb{R}^{d\times 3}$ | I.V. |
                        | $\vec{v}_i$ | Velocity | `Matrix`$\in\mathbb{R}^{d\times 3}$ | I.V. |
                        | - | Diffusion | `f32`$\in\mathbb{R}^+$ | $0$ |
                        | $l$ | Spr. Length | `f32`$\in\mathbb{R}^+$ | I.V. |
                        | $\gamma$ | Spr. Tension | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\eta$ | Rigidity | `f32`$\in\mathbb{R}^+$ | Fit |
                        | $\lambda$ | Damping | `f32`$\in\mathbb{R}^+$ | Fit |

                        </div>
                        </div>

                        ---

                        ## Numerical Simulation Example

                        <video
                            height=800px
                            preload controls
                            src="https://cellular-raza.com/showcase/bacterial-rods/movie.mp4"
                        />

                        ---

                        ## Image Analysis


                        <div style="display: grid; grid-template-columns: 1fr 1fr;column-gap: 2em;">
                            <h4>Time Series of Microscopic Images</h4>
                            <h4></h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr">
                                <img width=100% src="growth-2/image001042.png"/>
                                <img width=100% src="growth-2/image001062.png"/>
                                <img width=100% src="growth-2/image001082.png"/>
                                <img width=100% src="growth-2/image001102.png"/>
                                <img width=100% src="growth-2/image001122.png"/>
                                <img width=100% src="growth-2/image001142.png"/>
                                <img
                                    width=100%
                                    src="growth-2-marked/image001042-marked.png"
                                    class="fragment"
                                    data-fragment-index="2"
                                />
                                <img
                                    width=100%
                                    src="growth-2-marked/image001062-marked.png"
                                    class="fragment"
                                    data-fragment-index="2"
                                />
                                <img
                                    width=100%
                                    src="growth-2-marked/image001082-marked.png"
                                    class="fragment"
                                    data-fragment-index="2"
                                />
                            </div>
                        <div>

                        <p style="color: orange;" class="fragment" data-fragment-index="1">
                            We need methods to map between images<br>
                            and our numerical simulation
                        </p>

                        1. Extract individual cells from image<br>
                           <!-- .element: class="fragment" data-fragment-index="2" -->
                           ✅ (_Cell-Segmentation_)
                        2. Extract positions from individual cell<br>
                           <!-- .element: class="fragment" -->
                           ❌ (_No existing algorithm_)
                        3. Advance simulation<br>
                           <!-- .element: class="fragment" -->
                           ✅ (_see implementation of our model_)
                        4. Compare numerical and real-world results<br>
                           <!-- .element: class="fragment" -->
                           ❓ (_what is the cost function?_)

                        </div>
                        </div>

                        ---

                        ## Image Analysis
                        #### Extracting Positions

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr;">
                            <p class="fragment" data-fragment-index="1">Microscopic Image</p>
                            <p class="fragment" data-fragment-index="2">Cell Masks</p>
                            <p class="fragment" data-fragment-index="3">Skeletonization</p>
                            <img
                                width=100%
                                src="../fitting-methods/algorithm/image001042.png"
                                class="fragment"
                                data-fragment-index="1"
                            >
                            <img
                                width=100%
                                src="growth-2-marked/image001042-marked.png"
                                class="fragment"
                                data-fragment-index="2"
                            >
                            <img
                                width=100%
                                src="../fitting-methods/algorithm/mask-zoom.png"
                                class="fragment"
                                data-fragment-index="3"
                            >
                        </div>

                        - Take skeleton of cell-mask and interpolate to polygon with $N$ vertices
                          <!-- .element: class="fragment" -->

                        ---

                        ## Image Analysis
                        #### Generating Images

                        - We can use the numerical simulation to generate<br>
                          <!-- .element: class="fragment" data-fragment-index="1"-->
                          artificial data & images
                        - Create masks by projecting 3D image &<br>
                          <!-- .element: class="fragment" data-fragment-index="2" -->
                          assigning unique color to each cell
                        - Use this data to test our position extraction algorithm<br>
                          <!-- .element: class="fragment" -->
                          Advantage: known input positions

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr;">
                            <img
                                width=100%
                                src="../09395645494836445480/raw_pv/000000200.png"
                                class="fragment"
                                data-fragment-index="1"
                            >
                            <img
                                width=100%
                                src="../09395645494836445480/raw_pv/000000400.png"
                                class="fragment"
                                data-fragment-index="1"
                            >
                            <img
                                width=100%
                                src="../09395645494836445480/masks/000000200.png"
                                class="fragment"
                                data-fragment-index="2"
                            >
                            <img
                                width=100%
                                src="../09395645494836445480/masks/000000400.png"
                                class="fragment"
                                data-fragment-index="2"
                            >
                        </div>

                        --

                        ## Image Analysis
                        #### How to generate Near-Realistic Microscopic Images

                        <div style="display: grid; grid-template-columns: 2fr 1fr;"><div>

                        - Noise
                          <!-- .element: class="fragment" -->
                            - Camera Sensor Noise
                            - Statistic Noise from environmental influences
                        - Defects
                          <!-- .element: class="fragment" -->
                            - Lens Aberration
                            - Dirt on Glass
                            - etc.
                        - Lighting (backlight most of the time)
                          <!-- .element: class="fragment" -->
                        - Cellular properties: reflectivity, luminosity, tranlucency
                          <!-- .element: class="fragment" -->
                        - Overlapping of bacteria
                          <!-- .element: class="fragment" -->
                        - Dirt/Other material floating around
                          <!-- .element: class="fragment" -->

                        <p class="fragment" style="color: orange;">
                        $\Rightarrow$ Physically-Based Rendering!
                        </p>

                        </div><img width=100% src="../09395645494836445480/images/000000800.png">
                        </div>

                        ---

                        ## Image Analysis
                        #### Extracting Positions

                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr;">
                            <img
                                class="fragment"
                                data-fragment-index="1"
                                width=100%
                                src="../fitting-methods/extract_positions-000400.png"
                            >
                            <img
                                class="fragment"
                                data-fragment-index="1"
                                width=100%
                                src="../fitting-methods/extract_positions-000800.png"
                            >
                            <img
                                class="fragment"
                                data-fragment-index="1"
                                width=100%
                                src="../fitting-methods/extract_positions-001200.png"
                            >
                        </div>
                        <div class="fragment">

                        - Crosses show extracted positions
                        - Lines show actual polygon
                        - Seems to match quite well

                        </div>

                        ---

                        ## Image Analysis
                        #### Extracting Positions

                        <div style="display: grid; grid-template-columns: 1fr 1fr;">

                        ![](../fitting-methods/displacement-calculations.png)

                        <div class="fragment">

                        - Measure difference between rod lengths
                        - Calculate average vertex difference from extracted to known position
                        - Good agreement with given positions
                        - In the beginning small underestimation
                        - In the end small overestimation

                        </div>
                        </div>

                        ---

                        ## Parameter Estimation
                        #### Constructing a Cost Function

                        - Assumption: We have no cell-division
                        - $\Rightarrow$ compare euclidean distance between vertices
                        - If we have cell-division, we need to do something else

                        --

                        ## Parameter Estimation
                        #### Comparing Across Generations

                        <div style="display: grid; grid-template-columns: 1fr 1fr;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr;">
                            <img height=350px src="../fitting-methods/progressions-1.png"/>
                            <img height=350px src="../fitting-methods/progressions-2.png"/>
                            <img height=350px src="../fitting-methods/progressions-3.png"/>
                            <img height=350px src="../fitting-methods/progressions-4.png"/>
                        </div><div>

                        <img width=100% src="../fitting-methods/penalty-time-flow.png"/>

                        </div></div>

                        ---

                        ## Parameter Estimation
                        #### Results

                        <div style="width:100%; display: grid; grid-template-columns: 1fr 1fr 2fr;">
                            <img
                                width=100%
                                src="../fitting-methods/estimate-parameters1/microscopic-images-0.png"
                            >
                            <img
                                width=100%
                                src="../fitting-methods/estimate-parameters1/microscopic-images-1.png"
                            >
                        <div>

                        - 2 Pairs are matching well
                        - Left pair is not aligned very well

                        $\Rightarrow$ this could be due to the `MorsePotentialF32` interaction
                        potential

                        </div>
                            <img
                                width=100%
                                src="../fitting-methods/estimate-parameters1/microscopic-images-2.png"
                            >
                            <img
                                width=100%
                                src="../fitting-methods/estimate-parameters1/microscopic-images-3.png"
                            >
                        </div>


                        ---

                        ## Parameter Estimation
                        #### Results

                        <div style="
                            width:100%;
                            display: grid;
                            grid-template-columns: 1fr 1fr 1fr;
                        ">
                            <img height=350px src="../fitting-methods/estimate-parameters1/Growth Rate.png"/>
                            <img height=350px src="../fitting-methods/estimate-parameters1/Potential Stiffness.png"/>
                            <img height=350px src="../fitting-methods/estimate-parameters1/Radius.png"/>
                            <img height=350px src="../fitting-methods/estimate-parameters1/Rigidity.png"/>
                            <img height=350px src="../fitting-methods/estimate-parameters1/Strength.png"/>

                        - Only one parameter for all agents (not individual)
                        - Only one time-step is fitted
                        - Duration: $\approx 15\text{min}$ (depending on your hardware)

                        </div>

                        ---

                        ## Parameter Estimation
                        #### Optimization Strategies

                        1. Estimate parameters for each time-step
                        2. Run simulation over multiple time-steps and compare results
                            - option to rebase every $n$ time-steps and start with new initial
                                conditions
                        3. Global vs Local optimization
                            - unfortunately in general not possible to calculate Jacobian

                        ---

                        <div style="
                            width:100%;
                            display: grid;
                            grid-template-columns: 40% 60%;
                        ">
                        <div>

                        ### Python Package

                        ```bash
                        pip install cr_mech_coli
                        ```

                        ```python [1|3-5|7-11|13-19|1-19]
                        import cr_mech_coli as crm

                        # Configure inputs
                        config = crm.Configuration()
                        agent_settings = crm.AgentSettings()

                        # Run simulation
                        cell_container = crm.run_simulation(
                            config,
                            agent_settings,
                        )

                        # Render Images
                        render_settings = crm.RenderSettings()
                        crm.store_all_images(
                            cell_container,
                            config.domain_size,
                            render_settings
                        )
                        ```

                        <div style="display: grid; grid-template-columns: 1fr 1fr;">
                            <img style="margin:0;" src="out-simple-script/images/000000500.png" width=100%>
                            <img style="margin:0;" src="out-simple-script/masks/000000500.png" width=100%>
                        </div>

                        </div>
                        <div>
                        <h3>Documentation</h3>
                        <iframe
                            src="https://jonaspleyer.github.io/cr_mech_coli/"
                            style="width: 1100px; height: 980px; max-width: 100%; max-height: 100%;"
                        ></iframe></div>
                        </div>

                        ---

                        ## Outlook

                        1. Cell-Segmentation & Cell-Tracking
                          <!-- .element: class="fragment" -->
                            - Generate Dataset of near-realistic images with masks
                            - Asses if this can improve existing Cell-Segmentation tools
                            - This allows us to easily study Cell-Tracking solutions
                        2. Distribution of Parameters
                          <!-- .element: class="fragment" -->
                            - Can we fit enough cells individually simultanously?
                            - How are parameters of cells distributed?
                        3. Inheritance of Parameters
                          <!-- .element: class="fragment" -->
                            - Will our algorithms work over multiple bacteria generations?
                            - How are parameters inherited to daughter cells?

                        <p style="color: orange;" class="fragment">
                        We are meeting up with Alexander Rohrbach<br>
                        this week to discuss how to take things further.
                        </p>
                    </textarea>
                </section>
            </div>
        </div>

        <script src="reveal.js/dist/reveal.js"></script>
        <script src="reveal.js/plugin/notes/notes.js"></script>
        <script src="reveal.js/plugin/markdown/markdown.js"></script>
        <script src="reveal.js/plugin/highlight/highlight.js"></script>
        <script src="reveal.js/plugin/math/math.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
                hash: true,
                width: 1920,
                height: 1080,
                margin: 0.04,
                slideNumber: 'c/t',
                katex: {
                    version: 'latest',
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "\\(", right: "\\)", display: false},
                        {left: "\\begin{equation}", right: "\\end{equation}", display: true},
                        {left: "\\begin{align}", right: "\\end{align}", display: true},
                        {left: "\\begin{alignat}", right: "\\end{alignat}", display: true},
                        {left: "\\begin{gather}", right: "\\end{gather}", display: true},
                        {left: "\\begin{CD}", right: "\\end{CD}", display: true},
                        {left: "\\[", right: "\\]", display: true},
                        {left: "$", right: "$", display: false},
                    ],
                    ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre']
                },

                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX ]
            });
            Reveal.configure({
                keyboard: {
                    33: 'left',
                    34: 'right',
                }
            })
        </script>
    </body>
</html>
