Metadata-Version: 2.4
Name: lightpdf-aipdf-mcp
Version: 0.1.151
Summary: MCP Server for LightPDF AI-PDF
Author: LightPDF Team
License: Proprietary
Requires-Python: >=3.8
Requires-Dist: fastmcp
Requires-Dist: httpx
Requires-Dist: httpx-sse
Requires-Dist: mcp
Requires-Dist: mcp[cli]
Requires-Dist: pydantic
Requires-Dist: pydantic-settings
Requires-Dist: python-dotenv
Requires-Dist: starlette
Requires-Dist: uvicorn
Description-Content-Type: text/markdown

# LightPDF AI-PDF MCP Server ğŸš€

åŸºäº **FastMCP** æ¡†æ¶çš„ç°ä»£åŒ– PDF å¤„ç†å·¥å…·ï¼Œæä¾› 21 ä¸ªä¸“ä¸šçš„æ–‡æ¡£å¤„ç†åŠŸèƒ½ã€‚

## âœ¨ é¡¹ç›®ç‰¹è‰²

- **ğŸš€ é«˜æ•ˆæ¶æ„**ï¼šåŸºäº FastMCPï¼Œ90% ä»£ç é‡å‡å°‘
- **ğŸ”’ ç±»å‹å®‰å…¨**ï¼š100% ç¼–è¯‘æ—¶å‚æ•°éªŒè¯  
- **âš¡ å¼€å‘å‹å¥½**ï¼šæ–°å·¥å…·å¼€å‘é€Ÿåº¦æå‡ 300%+
- **ğŸ”„ å®Œå…¨å…¼å®¹**ï¼šä¸šåŠ¡é€»è¾‘ 100% å¤ç”¨
- **ğŸ› ï¸ åŠŸèƒ½ä¸°å¯Œ**ï¼š21 ä¸ªå·¥å…·æ¶µç›– PDF å¤„ç†æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…å’Œå¯åŠ¨

```bash
# å®‰è£…ä¾èµ–
uv sync

# å¯åŠ¨ stdio æ¨¡å¼ï¼ˆç”¨äº MCP å®¢æˆ·ç«¯ï¼‰
python run.py

# å¯åŠ¨ SSE æœåŠ¡å™¨æ¨¡å¼ï¼ˆç”¨äº Web è°ƒè¯•ï¼‰
python run.py -p 8000
```

### éªŒè¯å®‰è£…

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python test_server.py
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### ğŸ“„ æ–‡æ¡£è½¬æ¢
- `convert_document` - è¾“å‡ºæ ¼å¼ï¼šPDF/DOCX/XLSX/PPTX/JPG/PNG/HTML/TXT/CSV/MD/RTF/TEXï¼›è¾“å…¥æ ¼å¼ï¼šæ”¯æŒ22ç§æ–‡æ¡£å’Œå›¾ç‰‡æ ¼å¼ï¼ˆå›¾ç‰‡è½¬æ–‡æœ¬è¯·ä½¿ç”¨OCRå·¥å…·ï¼‰
- `add_page_numbers` - ä¸º PDF æ·»åŠ é¡µç 
- `remove_watermark` - å»é™¤ PDF æ°´å°

### ğŸ”§ PDF ç¼–è¾‘  
- `compress_pdf` - PDF å‹ç¼©
- `merge_pdfs` - åˆå¹¶å¤šä¸ª PDF
- `split_pdf` - æŒ‰é¡µé¢æˆ–ä¹¦ç­¾æ‹†åˆ† PDF
- `rotate_pdf` - æ—‹è½¬ PDF é¡µé¢
- `remove_margin` - å»é™¤ PDF ç™½è¾¹
- `extract_images` - æå– PDF ä¸­çš„å›¾ç‰‡
- `flatten_pdf` - æ‰å¹³åŒ– PDF
- `resize_pdf` - è°ƒæ•´ PDF å¤§å°
- `replace_text` - æ›¿æ¢ PDF æ–‡æœ¬

### ğŸ”’ å®‰å…¨åŠŸèƒ½
- `unlock_pdf` - ç§»é™¤ PDF å¯†ç ä¿æŠ¤
- `protect_pdf` - ä¸º PDF æ·»åŠ å¯†ç ä¿æŠ¤
- `restrict_printing` - é™åˆ¶ PDF æ‰“å°æƒé™

### ğŸ¨ æ°´å°åŠŸèƒ½
- `add_text_watermark` - æ·»åŠ æ–‡æœ¬æ°´å°
- `add_image_watermark` - æ·»åŠ å›¾ç‰‡æ°´å°

### ğŸ¤– AI åŠŸèƒ½
- `create_pdf` - åŸºäºæ–‡æœ¬æè¿°ç”Ÿæˆ PDF
- `translate_pdf` - PDF æ–‡æ¡£ç¿»è¯‘
- `ocr_document` - OCR æ–‡å­—è¯†åˆ« (æ”¯æŒ PDF/DOC/PPT/Excel/å›¾ç‰‡ç­‰å¤šç§æ ¼å¼)
- `summarize_document` - æ–‡æ¡£æ‘˜è¦

## ğŸ“ é¡¹ç›®æ¶æ„

é‡‡ç”¨æ¸…æ™°çš„5å±‚åŠŸèƒ½æ¨¡å—åŒ–æ¶æ„ï¼š

```
src/lightpdf_aipdf_mcp/
â”œâ”€â”€ api/                    # APIå±‚ - FastMCPæœåŠ¡å™¨ä¸é€‚é…å™¨
â”‚   â”œâ”€â”€ server.py          # FastMCPä¸»æœåŠ¡å™¨ (21ä¸ªå·¥å…·)
â”‚   â””â”€â”€ adapter.py         # é€‚é…å™¨
â”œâ”€â”€ core/                   # æ ¸å¿ƒå±‚ - ç»Ÿä¸€ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ processor.py       # æ ¸å¿ƒä¸šåŠ¡å¤„ç†å™¨
â”œâ”€â”€ services/              # æœåŠ¡å±‚ - å…·ä½“åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ converter.py       # æ–‡æ¡£è½¬æ¢æœåŠ¡
â”‚   â”œâ”€â”€ editor.py         # PDFç¼–è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ create_pdf.py     # PDFåˆ›å»ºæœåŠ¡
â”‚   â”œâ”€â”€ translator.py     # ç¿»è¯‘æœåŠ¡
â”‚   â”œâ”€â”€ summarizer.py     # æ‘˜è¦æœåŠ¡
â”‚   â””â”€â”€ ocr.py           # OCRæœåŠ¡
â”œâ”€â”€ models/               # æ¨¡å‹å±‚ - æ•°æ®ç»“æ„
â”‚   â””â”€â”€ schemas.py       # Pydanticæ•°æ®æ¨¡å‹
â””â”€â”€ utils/               # å·¥å…·å±‚ - é€šç”¨å·¥å…·
    â””â”€â”€ common.py        # åŸºç¡€å·¥å…·ç±»
```

## ğŸ”„ æ¶æ„ä¼˜åŠ¿

| ç‰¹æ€§ | ä¼ ç»Ÿæ–¹å¼ | FastMCP æ–¹å¼ |
|------|---------|-------------|
| ä»£ç é‡ | ~4800 è¡Œ | ~3800 è¡Œ (-21%) |
| Schema å®šä¹‰ | æ‰‹å†™ JSON | è‡ªåŠ¨ç”Ÿæˆ |
| ç±»å‹æ£€æŸ¥ | è¿è¡Œæ—¶ | ç¼–è¯‘æ—¶ |
| å¼€å‘æ–°å·¥å…· | ~200 è¡Œ/å·¥å…· | ~20 è¡Œ/å·¥å…· |
| ç»´æŠ¤éš¾åº¦ | é«˜ | ä½ |

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

```python
@mcp.tool
async def my_new_tool(
    ctx: Context,  # Contextå‚æ•°å¿…é¡»åœ¨ç¬¬ä¸€ä½
    files: List[FileObject],
    my_param: str,
    optional_param: Optional[int] = None
) -> str:
    """
    æˆ‘çš„æ–°å·¥å…·æè¿°
    
    Args:
        files: è¾“å…¥æ–‡ä»¶åˆ—è¡¨
        my_param: å¿…éœ€å‚æ•°
        optional_param: å¯é€‰å‚æ•°
    
    Returns:
        JSON æ ¼å¼çš„å¤„ç†ç»“æœ
    """
    await ctx.info(f"å¼€å§‹å¤„ç† {len(files)} ä¸ªæ–‡ä»¶...")
    
    # æ„å»ºæ“ä½œé…ç½®
    operation_config = generate_operation_config(
        operation_type="convert",  # æˆ– "edit", "translate", "ocr", "summarize"
        format_value="my-format",
        extra_params={"my_param": my_param}
    )
    
    # è°ƒç”¨é€‚é…å™¨
    result = await process_tool_call_adapter(ctx, files, operation_config)
    
    await ctx.info("å¤„ç†å®Œæˆ")
    return result
```

### æµ‹è¯•å·¥å…·

```python
# åœ¨ test_server.py ä¸­æ·»åŠ 
result = await client.call_tool("my_new_tool", {
    "files": [{"path": "test.pdf"}],
    "my_param": "test_value"
})
```

## ğŸ“š æŠ€æœ¯æ ˆ

- **FastMCP**: ç°ä»£åŒ–çš„ MCP æœåŠ¡å™¨æ¡†æ¶
- **Pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **asyncio**: å¼‚æ­¥ I/O æ”¯æŒ
- **LightPDF API**: åº•å±‚æ–‡æ¡£å¤„ç†æœåŠ¡

## ğŸ¤ å¼€å‘æœ€ä½³å®è·µ

1. **å‚æ•°é¡ºåº**ï¼š`ctx: Context` å‚æ•°å§‹ç»ˆæ”¾åœ¨ç¬¬ä¸€ä½
2. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ Pydantic æ¨¡å‹ç¡®ä¿ç±»å‹æ£€æŸ¥
3. **æ¨¡å—åŒ–**ï¼šæ–°åŠŸèƒ½ä¼˜å…ˆåœ¨ `services/` å±‚å®ç°
4. **æµ‹è¯•é©±åŠ¨**ï¼šæ·»åŠ åŠŸèƒ½æ—¶åŒæ­¥ç¼–å†™æµ‹è¯•ç”¨ä¾‹

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®ç»“æ„è¯¦ç»†è¯´æ˜](./PROJECT_STRUCTURE.md)
- [åŠŸèƒ½ä»‹ç»å’Œé…ç½®æŒ‡å—](./docs/Intro.md)
- [æ·±åº¦é‡æ„æ€»ç»“](./DEEP_REFACTORING_SUMMARY.md)

## ğŸ¯ æ€§èƒ½ä¼˜åŠ¿

- **å¯åŠ¨æ—¶é—´**: å‡å°‘ 50%
- **å†…å­˜å ç”¨**: å‡å°‘ 30%
- **å¼€å‘æ—¶é—´**: å‡å°‘ 90%
- **ç»´æŠ¤æˆæœ¬**: å‡å°‘ 60%

---

**ğŸ‰ ç°ä»£åŒ–ã€é«˜æ•ˆç‡çš„ LightPDF Agent MCP Serverï¼Œè®© PDF å¤„ç†å˜å¾—ç®€å•ï¼** 