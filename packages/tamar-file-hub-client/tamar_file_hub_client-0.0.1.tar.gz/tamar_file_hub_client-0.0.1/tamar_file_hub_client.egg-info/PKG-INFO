Metadata-Version: 2.4
Name: tamar-file-hub-client
Version: 0.0.1
Summary: A Python SDK for gRPC-based file management system
Home-page: https://github.com/Tamar-Edge-AI/file-hub-client
Author: Oscar Ou
Author-email: oscar.ou@tamaredge.ai
License: MIT
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP
Classifier: Topic :: Communications :: File Sharing
Classifier: Framework :: AsyncIO
Classifier: Typing :: Typed
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: grpcio>=1.67.1
Requires-Dist: grpcio-tools>=1.67.1
Requires-Dist: protobuf>=4.21.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: typing-extensions>=4.0.0; python_version < "3.10"
Requires-Dist: requests>=2.28.0
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: aiofiles>=23.0.0
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# File Hub Client

ä¸€ä¸ªåŸºäº gRPC çš„æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ Python SDKï¼Œæä¾›å¼‚æ­¥å’ŒåŒæ­¥ä¸¤ç§å®¢æˆ·ç«¯å®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **åŒæ¨¡å¼æ”¯æŒ**ï¼šæä¾›å¼‚æ­¥ï¼ˆAsyncIOï¼‰å’ŒåŒæ­¥ä¸¤ç§å®¢æˆ·ç«¯å®ç°
- ğŸ“ **å®Œæ•´çš„æ–‡ä»¶ç®¡ç†**ï¼šæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€é‡å‘½åã€åˆ é™¤ç­‰æ“ä½œ
- ğŸ“‚ **æ–‡ä»¶å¤¹ç®¡ç†**ï¼šæ”¯æŒæ–‡ä»¶å¤¹çš„åˆ›å»ºã€é‡å‘½åã€ç§»åŠ¨ã€åˆ é™¤
- ğŸ”— **æ–‡ä»¶åˆ†äº«**ï¼šæ”¯æŒç”Ÿæˆåˆ†äº«é“¾æ¥ï¼Œè®¾ç½®è®¿é—®æƒé™å’Œå¯†ç 
- ğŸ”„ **å¤šç§ä¸Šä¼ æ–¹å¼**ï¼šæ”¯æŒç›´ä¼ ã€æ–­ç‚¹ç»­ä¼ ã€å®¢æˆ·ç«¯ç›´ä¼ åˆ°å¯¹è±¡å­˜å‚¨
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸ä½“ç³»å’Œé”™è¯¯é‡è¯•æœºåˆ¶
- ğŸ”’ **TLS/SSL æ”¯æŒ**ï¼šæ”¯æŒå®‰å…¨çš„åŠ å¯†è¿æ¥ï¼Œä¿æŠ¤æ•°æ®ä¼ è¾“
- ğŸ” **è‡ªåŠ¨é‡è¯•**ï¼šè¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•ï¼Œæé«˜å¯é æ€§
- ğŸ“ **ç±»å‹æ³¨è§£**ï¼šå®Œæ•´çš„ç±»å‹æç¤ºæ”¯æŒ
- ğŸ§© **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºæ‰©å±•
- ğŸ—ï¸ **åˆ†å±‚æœåŠ¡æ¶æ„**ï¼šæ–‡ä»¶æœåŠ¡åˆ†ä¸ºä¼ ç»Ÿæ–‡ä»¶ï¼ˆblobï¼‰å’Œè‡ªå®šä¹‰ç±»å‹ï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰ï¼Œæ¯ç§ç±»å‹ç‹¬ç«‹æœåŠ¡ï¼Œè¯­ä¹‰æ¸…æ™°
- ğŸ”§ **ç¯å¢ƒå˜é‡é…ç½®**ï¼šæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ‰€æœ‰å‚æ•°
- ğŸ‘¤ **ç”¨æˆ·ä¸Šä¸‹æ–‡ç®¡ç†**ï¼šæ”¯æŒåŒºåˆ†èµ„æºæ‰€æœ‰æƒï¼ˆownershipï¼‰å’Œæ“ä½œè€…ï¼ˆoperatorï¼‰
- ğŸ“Š **è¯·æ±‚ä¸Šä¸‹æ–‡è¿½è¸ª**ï¼šè‡ªåŠ¨æ”¶é›†å®¢æˆ·ç«¯ä¿¡æ¯ï¼Œæ”¯æŒè¯·æ±‚è¿½è¸ªå’Œå®¡è®¡

## é¡¹ç›®ç»“æ„

```
file-hub-client/
â”œâ”€â”€ file_hub_client/              # ä¸»åŒ…ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # åŒ…åˆå§‹åŒ–ï¼Œå¯¼å‡ºç‰ˆæœ¬ä¿¡æ¯å’Œä¸»è¦ç±»
â”‚   â”œâ”€â”€ client.py                # å®¢æˆ·ç«¯å…¥å£ï¼ˆAsyncTamarFileHubClient, TamarFileHubClientï¼‰
â”‚   â”œâ”€â”€ py.typed                 # PEP 561 ç±»å‹æ ‡è®°æ–‡ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ rpc/                     # gRPC ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ __init__.py         # RPC æ¨¡å—åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ async_client.py     # å¼‚æ­¥ gRPC å®¢æˆ·ç«¯åŸºç±»
â”‚   â”‚   â”œâ”€â”€ sync_client.py      # åŒæ­¥ gRPC å®¢æˆ·ç«¯åŸºç±»
â”‚   â”‚   â”œâ”€â”€ generate_grpc.py    # Proto æ–‡ä»¶ä»£ç ç”Ÿæˆè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ protos/             # Protocol Buffer å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ file_service.proto    # æ–‡ä»¶æœåŠ¡å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ folder_service.proto  # æ–‡ä»¶å¤¹æœåŠ¡å®šä¹‰
â”‚   â”‚   â””â”€â”€ gen/                # ç”Ÿæˆçš„ gRPC ä»£ç ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ file_service_pb2.py
â”‚   â”‚       â”œâ”€â”€ file_service_pb2_grpc.py
â”‚   â”‚       â”œâ”€â”€ folder_service_pb2.py
â”‚   â”‚       â””â”€â”€ folder_service_pb2_grpc.py
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # æœåŠ¡å±‚ï¼ˆåˆ†å±‚æ¶æ„ï¼šä¼ ç»Ÿæ–‡ä»¶ç”¨blob_serviceï¼Œè‡ªå®šä¹‰ç±»å‹ç‹¬ç«‹serviceï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py         # æœåŠ¡æ¨¡å—å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ file/               # æ–‡ä»¶æœåŠ¡ï¼ˆç»Ÿä¸€å…¥å£ï¼ŒæŒ‰ç±»å‹åˆ†å±‚ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base_file_service.py     # æ–‡ä»¶æœåŠ¡åŸºç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ async_blob_service.py    # å¼‚æ­¥äºŒè¿›åˆ¶å¤§å¯¹è±¡æœåŠ¡ï¼ˆä¼ ç»Ÿæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ sync_blob_service.py     # åŒæ­¥äºŒè¿›åˆ¶å¤§å¯¹è±¡æœåŠ¡ï¼ˆä¼ ç»Ÿæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ async_file_service.py    # å¼‚æ­¥æ–‡ä»¶å…ƒæ•°æ®æœåŠ¡ï¼ˆæ‰€æœ‰ç±»å‹é€šç”¨ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ sync_file_service.py     # åŒæ­¥æ–‡ä»¶å…ƒæ•°æ®æœåŠ¡ï¼ˆæ‰€æœ‰ç±»å‹é€šç”¨ï¼‰
â”‚   â”‚   â”‚   # æœªæ¥æ‰©å±•ï¼šspreadsheet_service, document_service, canvas_serviceç­‰
â”‚   â”‚   â””â”€â”€ folder/             # æ–‡ä»¶å¤¹æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ async_folder_service.py  # å¼‚æ­¥æ–‡ä»¶å¤¹æœåŠ¡å®ç°
â”‚   â”‚       â””â”€â”€ sync_folder_service.py   # åŒæ­¥æ–‡ä»¶å¤¹æœåŠ¡å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                 # æ•°æ®æ¨¡å‹ï¼ˆPydanticï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py         # æ¨¡å‹å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ file.py             # æ–‡ä»¶ç›¸å…³æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ folder.py           # æ–‡ä»¶å¤¹ç›¸å…³æ¨¡å‹
â”‚   â”‚   â””â”€â”€ context.py          # ä¸Šä¸‹æ–‡ç›¸å…³æ¨¡å‹ï¼ˆç”¨æˆ·å’Œè¯·æ±‚ä¸Šä¸‹æ–‡ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ enums/                   # æšä¸¾å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py         # æšä¸¾å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ role.py             # è§’è‰²æšä¸¾ï¼ˆACCOUNT, AGENT, SYSTEMï¼‰
â”‚   â”‚   â”œâ”€â”€ upload_mode.py      # ä¸Šä¼ æ¨¡å¼æšä¸¾
â”‚   â”‚   â””â”€â”€ export_format.py    # å¯¼å‡ºæ ¼å¼æšä¸¾
â”‚   â”‚
â”‚   â”œâ”€â”€ errors/                  # å¼‚å¸¸å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ __init__.py         # å¼‚å¸¸å¯¼å‡º
â”‚   â”‚   â””â”€â”€ exceptions.py       # è‡ªå®šä¹‰å¼‚å¸¸ç±»
â”‚   â”‚
â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py         # å·¥å…·å‡½æ•°å¯¼å‡º
â”‚       â”œâ”€â”€ file_utils.py       # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚       â”œâ”€â”€ converter.py        # æ•°æ®è½¬æ¢å·¥å…·
â”‚       â”œâ”€â”€ retry.py            # é‡è¯•è£…é¥°å™¨
â”‚       â”œâ”€â”€ upload_helper.py    # ä¸Šä¼ è¾…åŠ©å·¥å…·ï¼ˆHTTPä¸Šä¼ å™¨ï¼‰
â”‚       â””â”€â”€ download_helper.py  # ä¸‹è½½è¾…åŠ©å·¥å…·ï¼ˆHTTPä¸‹è½½å™¨ï¼‰
â”‚
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ .env.example                 # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ setup.py                    # å®‰è£…é…ç½®æ–‡ä»¶
â”œâ”€â”€ pyproject.toml             # é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆPEP 518ï¼‰
â””â”€â”€ MANIFEST.in                # æ‰“åŒ…é…ç½®æ–‡ä»¶
```

## æ¨¡å—è¯´æ˜

### æ ¸å¿ƒæ¨¡å—

- **client.py**: æä¾› `AsyncTamarFileHubClient` å’Œ `TamarFileHubClient` ä¸¤ä¸ªå®¢æˆ·ç«¯ç±»ï¼Œæ˜¯ä½¿ç”¨ SDK çš„å…¥å£ç‚¹
  - æä¾›äº†é¢„é…ç½®çš„å•ä¾‹å®¢æˆ·ç«¯ `tamar_client` å’Œ `async_tamar_client`
  - æ”¯æŒåˆ†å±‚æœåŠ¡è®¿é—®ï¼š
    - `blobs`ï¼ˆä¼ ç»Ÿæ–‡ä»¶å†…å®¹ï¼šä¸Šä¼ /ä¸‹è½½ï¼‰
    - `files`ï¼ˆæ–‡ä»¶å…ƒæ•°æ®ï¼šæ‰€æœ‰ç±»å‹é€šç”¨çš„ç®¡ç†æ“ä½œï¼‰
    - `folders`ï¼ˆæ–‡ä»¶å¤¹ç®¡ç†ï¼‰
    - æœªæ¥æ‰©å±•ï¼š`spreadsheets`ã€`documents`ã€`canvases` ç­‰è‡ªå®šä¹‰ç±»å‹æœåŠ¡

### RPC æ¨¡å— (`rpc/`)

- **async_client.py/sync_client.py**: gRPC å®¢æˆ·ç«¯åŸºç±»ï¼Œå¤„ç†è¿æ¥ç®¡ç†ã€å…ƒæ•°æ®æ„å»ºã€stub ç¼“å­˜
- **generate_grpc.py**: ä» proto æ–‡ä»¶ç”Ÿæˆ Python ä»£ç çš„è„šæœ¬
- **protos/**: å­˜æ”¾ Protocol Buffer å®šä¹‰æ–‡ä»¶
    - `file_service.proto`: å®šä¹‰æ–‡ä»¶ç›¸å…³çš„ RPC æœåŠ¡
    - `folder_service.proto`: å®šä¹‰æ–‡ä»¶å¤¹ç›¸å…³çš„ RPC æœåŠ¡

### æœåŠ¡æ¨¡å— (`services/`)

#### åˆ†å±‚æœåŠ¡æ¶æ„è®¾è®¡

File Hub Client é‡‡ç”¨åˆ†å±‚æœåŠ¡æ¶æ„ï¼Œå°†æ–‡ä»¶æœåŠ¡æŒ‰ç±»å‹å’Œè¯­ä¹‰è¿›è¡Œæ¸…æ™°åˆ†ç¦»ï¼š

**ğŸ“ ç»Ÿä¸€æ–‡ä»¶å…¥å£**ï¼šæ‰€æœ‰æ–‡ä»¶ç±»å‹éƒ½é€šè¿‡ç»Ÿä¸€çš„ `files` æ¥å£è¿›è¡Œå…ƒæ•°æ®ç®¡ç†ï¼ˆè·å–ã€é‡å‘½åã€åˆ é™¤ã€åˆ—è¡¨ç­‰ï¼‰

**ğŸ”„ æŒ‰ç±»å‹åˆ†å±‚æœåŠ¡**ï¼š
- **ä¼ ç»Ÿæ–‡ä»¶ç±»å‹**ï¼ˆPDFã€å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰â†’ `blob_service` å¤„ç†
  - æ ¸å¿ƒæ“ä½œï¼š**ä¸Šä¼ ** å’Œ **ä¸‹è½½**
  - ç‰¹ç‚¹ï¼šäºŒè¿›åˆ¶æ•°æ®ï¼Œé‡ç‚¹æ˜¯å­˜å‚¨å’Œä¼ è¾“
  
- **è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹**ï¼ˆåœ¨çº¿è¡¨æ ¼ã€æ–‡æ¡£ã€ç”»å¸ƒç­‰ï¼‰â†’ æ¯ç§ç±»å‹ç‹¬ç«‹ `service`
  - æ ¸å¿ƒæ“ä½œï¼š**æ–°å¢** å’Œ **å¯¼å‡º**
  - ç‰¹ç‚¹ï¼šç»“æ„åŒ–æ•°æ®ï¼Œé‡ç‚¹æ˜¯æ•°æ®æ“ä½œå’Œæ ¼å¼è½¬æ¢

**ğŸ¯ è®¾è®¡ä¼˜åŠ¿**ï¼š
- **è¯­ä¹‰æ¸…æ™°**ï¼šä¸åŒç±»å‹çš„æ–‡ä»¶ä½¿ç”¨ä¸åŒçš„æ“ä½œè¯­ä¹‰ï¼Œæ›´ç¬¦åˆå®é™…ä½¿ç”¨åœºæ™¯
- **æ˜“äºæ‰©å±•**ï¼šæ–°å¢è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹æ—¶ï¼Œåªéœ€æ·»åŠ å¯¹åº”çš„ç‹¬ç«‹æœåŠ¡
- **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªæœåŠ¡ä¸“æ³¨äºç‰¹å®šç±»å‹çš„æ“ä½œï¼Œä»£ç æ›´æ˜“ç»´æŠ¤
- **SDK å‹å¥½**ï¼šä¸º SDK ä½¿ç”¨è€…æä¾›æ›´ç›´è§‚çš„ API è®¾è®¡ï¼Œè€Œéé€šç”¨çš„ REST API

#### å…·ä½“å®ç°

- **file/**: æ–‡ä»¶æœåŠ¡å®ç°
    - **blob_service**: å¤„ç†ä¼ ç»Ÿæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼‰
        - æ”¯æŒå¤šç§ä¸Šä¼ æ¨¡å¼ï¼ˆæ™®é€šä¸Šä¼ ã€æµå¼ä¸Šä¼ ã€æ–­ç‚¹ç»­ä¼ ï¼‰
        - æ™ºèƒ½é€‰æ‹©ä¸Šä¼ æ¨¡å¼ï¼ˆæ ¹æ®æ–‡ä»¶å¤§å°ï¼‰
        - ç”Ÿæˆä¸Šä¼ /ä¸‹è½½ URL
        - æ”¯æŒä¸´æ—¶æ–‡ä»¶ä¸Šä¼ 
        - é€‚ç”¨ç±»å‹ï¼šPDFã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€å‹ç¼©åŒ…ç­‰
    - **file_service**: å¤„ç†æ–‡ä»¶å…ƒæ•°æ®æ“ä½œï¼ˆæ‰€æœ‰ç±»å‹é€šç”¨ï¼‰
        - è·å–ã€é‡å‘½åã€åˆ é™¤æ–‡ä»¶
        - åˆ—å‡ºæ–‡ä»¶
        - ç”Ÿæˆåˆ†äº«é“¾æ¥
        - è®°å½•æ–‡ä»¶è®¿é—®
    - **[future] spreadsheet_service**: åœ¨çº¿è¡¨æ ¼æœåŠ¡ï¼ˆè§„åˆ’ä¸­ï¼‰
        - åˆ›å»ºè¡¨æ ¼ã€ç¼–è¾‘å•å…ƒæ ¼ã€æ’å…¥è¡Œåˆ—
        - å¯¼å‡ºä¸º Excelã€CSV ç­‰æ ¼å¼
    - **[future] document_service**: åœ¨çº¿æ–‡æ¡£æœåŠ¡ï¼ˆè§„åˆ’ä¸­ï¼‰  
        - åˆ›å»ºæ–‡æ¡£ã€ç¼–è¾‘å†…å®¹ã€æ’å…¥å…ƒç´ 
        - å¯¼å‡ºä¸º Wordã€PDFã€HTML ç­‰æ ¼å¼
    - **[future] canvas_service**: ç”»å¸ƒæœåŠ¡ï¼ˆè§„åˆ’ä¸­ï¼‰
        - åˆ›å»ºç”»å¸ƒã€ç»˜åˆ¶å›¾å½¢ã€æ·»åŠ å…ƒç´ 
        - å¯¼å‡ºä¸º PNGã€SVGã€PDF ç­‰æ ¼å¼

- **folder/**: æ–‡ä»¶å¤¹æœåŠ¡å®ç°
    - åˆ›å»ºã€é‡å‘½åã€ç§»åŠ¨ã€åˆ é™¤æ–‡ä»¶å¤¹
    - åˆ—å‡ºæ–‡ä»¶å¤¹å†…å®¹

### æ•°æ®æ¨¡å‹ (`schemas/`)

- **file.py**: æ–‡ä»¶ç›¸å…³çš„æ•°æ®æ¨¡å‹
    - `File`: æ–‡ä»¶ä¿¡æ¯
    - `FileUploadResponse`: æ–‡ä»¶ä¸Šä¼ å“åº”
    - `UploadUrlResponse`: URLä¸Šä¼ å“åº”
    - `ShareLinkRequest`: åˆ†äº«é“¾æ¥è¯·æ±‚
    - `FileListResponse`: æ–‡ä»¶åˆ—è¡¨å“åº”

- **folder.py**: æ–‡ä»¶å¤¹ç›¸å…³çš„æ•°æ®æ¨¡å‹
    - `FolderInfo`: æ–‡ä»¶å¤¹ä¿¡æ¯
    - `FolderListResponse`: æ–‡ä»¶å¤¹åˆ—è¡¨å“åº”

- **context.py**: ä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®æ¨¡å‹
    - `UserContext`: ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼ˆç»„ç»‡ã€ç”¨æˆ·ã€è§’è‰²ã€æ“ä½œè€…ï¼‰
    - `RequestContext`: è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆè¯·æ±‚IDã€å®¢æˆ·ç«¯ä¿¡æ¯ã€è¿½è¸ªä¿¡æ¯ï¼‰
    - `FullContext`: å®Œæ•´ä¸Šä¸‹æ–‡

### æšä¸¾å®šä¹‰ (`enums/`)

- **role.py**: ç”¨æˆ·è§’è‰²æšä¸¾ï¼ˆACCOUNTã€AGENTã€SYSTEMï¼‰
- **upload_mode.py**: ä¸Šä¼ æ¨¡å¼æšä¸¾ï¼ˆNORMALã€STREAMã€RESUMABLEï¼‰
- **export_format.py**: å¯¼å‡ºæ ¼å¼æšä¸¾ï¼ˆPDFã€DOCXã€HTMLã€MARKDOWNã€JSONï¼‰

### å·¥å…·æ¨¡å— (`utils/`)

- **file_utils.py**: æ–‡ä»¶æ“ä½œç›¸å…³å·¥å…·å‡½æ•°
    - `get_file_mime_type`: è·å–æ–‡ä»¶ MIME ç±»å‹
    - `split_file_chunks`: æ–‡ä»¶åˆ†å—
    - `calculate_file_hash`: è®¡ç®—æ–‡ä»¶å“ˆå¸Œ

- **converter.py**: æ•°æ®è½¬æ¢å·¥å…·
    - `timestamp_to_datetime`: æ—¶é—´æˆ³è½¬æ¢
    - `convert_proto_to_model`: Proto æ¶ˆæ¯è½¬æ¨¡å‹

- **retry.py**: æä¾›é‡è¯•è£…é¥°å™¨ `retry_with_backoff`

- **upload_helper.py**: HTTP ä¸Šä¼ è¾…åŠ©å·¥å…·
    - `AsyncHttpUploader`: å¼‚æ­¥ HTTP ä¸Šä¼ å™¨
    - `SyncHttpUploader`: åŒæ­¥ HTTP ä¸Šä¼ å™¨
    - æ”¯æŒæ™®é€šä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ 

- **download_helper.py**: HTTP ä¸‹è½½è¾…åŠ©å·¥å…·
    - `AsyncHttpDownloader`: å¼‚æ­¥ HTTP ä¸‹è½½å™¨
    - `SyncHttpDownloader`: åŒæ­¥ HTTP ä¸‹è½½å™¨
    - æ”¯æŒæµå¼ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ 

### é”™è¯¯å¤„ç† (`errors/`)

- **exceptions.py**: å®šä¹‰äº†å®Œæ•´çš„å¼‚å¸¸ä½“ç³»
    - `FileHubError`: åŸºç¡€å¼‚å¸¸ç±»
    - `FileNotFoundError`: æ–‡ä»¶ä¸å­˜åœ¨
    - `FolderNotFoundError`: æ–‡ä»¶å¤¹ä¸å­˜åœ¨
    - `UploadError`: ä¸Šä¼ é”™è¯¯
    - `DownloadError`: ä¸‹è½½é”™è¯¯
    - `ValidationError`: éªŒè¯é”™è¯¯
    - ç­‰ç­‰...

## å®‰è£…

```bash
pip install tamar-file-hub-client
```

## é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®

File Hub Client æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®è¿æ¥å‚æ•°ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚

1. **åˆ›å»º `.env` æ–‡ä»¶**ï¼š
   ```bash
   # åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶
   touch .env
   ```

2. **ç¼–è¾‘ `.env` æ–‡ä»¶**ï¼š
   ```env
   # gRPC æœåŠ¡å™¨é…ç½®
   FILE_HUB_HOST=your-server-host.com
   FILE_HUB_PORT=50051
   FILE_HUB_SECURE=true
   FILE_HUB_API_KEY=your-api-key
   
   # è¿æ¥é‡è¯•é…ç½®
   FILE_HUB_RETRY_COUNT=5
   FILE_HUB_RETRY_DELAY=2.0
   ```

3. **æ”¯æŒçš„ç¯å¢ƒå˜é‡**ï¼š

   | ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
      |---------|------|--------|
   | `FILE_HUB_HOST` | gRPC æœåŠ¡å™¨åœ°å€ | `localhost` |
   | `FILE_HUB_PORT` | gRPC æœåŠ¡å™¨ç«¯å£ | `50051` |
   | `FILE_HUB_SECURE` | æ˜¯å¦å¯ç”¨ TLS/SSL | `false` |
   | `FILE_HUB_API_KEY` | API è®¤è¯å¯†é’¥ï¼ˆå¯é€‰ï¼‰ | æ—  |
   | `FILE_HUB_RETRY_COUNT` | è¿æ¥é‡è¯•æ¬¡æ•° | `3` |
   | `FILE_HUB_RETRY_DELAY` | é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰ | `1.0` |

### TLS/SSL é…ç½®

å½“ `FILE_HUB_SECURE` è®¾ç½®ä¸º `true` æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šä½¿ç”¨ TLS åŠ å¯†è¿æ¥ï¼š

- é»˜è®¤ä½¿ç”¨ç³»ç»Ÿçš„æ ¹è¯ä¹¦
- å¦‚æœæä¾›äº† `FILE_HUB_API_KEY`ï¼Œä¼šè‡ªåŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´ä¸­è¿›è¡Œè®¤è¯

```python
# é€šè¿‡ä»£ç é…ç½® TLS
from file_hub_client import TamarFileHubClient

client = TamarFileHubClient(
    host="secure-server.com",
    port=443,
    secure=True,
    credentials={"api_key": "your-api-key"}
)
```

### è¿æ¥é‡è¯•

å®¢æˆ·ç«¯æ”¯æŒè‡ªåŠ¨é‡è¯•è¿æ¥ï¼Œå¯¹äºä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒç‰¹åˆ«æœ‰ç”¨ï¼š

```python
# é€šè¿‡ä»£ç é…ç½®é‡è¯•
from file_hub_client import TamarFileHubClient

client = TamarFileHubClient(
    host="server.com",
    retry_count=5,  # é‡è¯•5æ¬¡
    retry_delay=2.0  # æ¯æ¬¡é‡è¯•é—´éš”2ç§’
)
```

### åŠ è½½ç¯å¢ƒå˜é‡

ä½¿ç”¨ `python-dotenv` åŠ è½½ `.env` æ–‡ä»¶ï¼ˆéœ€è¦é¢å¤–å®‰è£…ï¼‰ï¼š

```bash
pip install python-dotenv
```

```python
from dotenv import load_dotenv
import os

# åŠ è½½ .env æ–‡ä»¶
load_dotenv()

# ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¢æˆ·ç«¯ï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–ç¯å¢ƒå˜é‡
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®
    pass
```

### é…ç½®ä¼˜å…ˆçº§

å®¢æˆ·ç«¯é…ç½®çš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

1. ç›´æ¥ä¼ å…¥çš„å‚æ•°
2. ç¯å¢ƒå˜é‡
3. é»˜è®¤å€¼

```python
# ç¤ºä¾‹ï¼šå‚æ•°ä¼šè¦†ç›–ç¯å¢ƒå˜é‡
from file_hub_client import AsyncTamarFileHubClient

client = AsyncTamarFileHubClient(
    host="override-host.com",  # è¿™ä¼šè¦†ç›– FILE_HUB_HOST
    # port å°†ä½¿ç”¨ç¯å¢ƒå˜é‡ FILE_HUB_PORT æˆ–é»˜è®¤å€¼
)
```

## å¿«é€Ÿå¼€å§‹

### æ–‡ä»¶ä¸Šä¼ 

File Hub Client æä¾›äº†ç»Ÿä¸€çš„ä¸Šä¼ æ¥å£ï¼Œæ”¯æŒå¤šç§ä¸Šä¼ æ¨¡å¼ï¼š

#### ä¸Šä¼ æ¨¡å¼

- **NORMALï¼ˆæ™®é€šæ¨¡å¼ï¼‰**ï¼šé€‚ç”¨äºå°æ–‡ä»¶ï¼Œé€šè¿‡ gRPC ç›´æ¥ä¸Šä¼ 
- **STREAMï¼ˆæµå¼ä¸Šä¼ ï¼‰**ï¼šé€‚ç”¨äºæµå¼æ•°æ®ä¸Šä¼ 
- **RESUMABLEï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰**ï¼šæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œé€‚ç”¨äºå¤§æ–‡ä»¶å’Œä¸ç¨³å®šç½‘ç»œ

#### æœ€ç®€å•çš„ä¸Šä¼ 

```python
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")

    # æœ€ç®€å•çš„ç”¨æ³• - åªéœ€è¦æ–‡ä»¶è·¯å¾„
    file_info = await client.blobs.upload(
        "path/to/document.pdf",
        folder_id="1dee0f7b-2e4f-45cd-a462-4e1d82df9bdd"  # ä¸Šä¼ åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œä¸ä¼ åˆ™é»˜è®¤æ–‡ä»¶å¤¹
    )
    print(f"ä¸Šä¼ æˆåŠŸ: {file_info.file.id}")
    print(f"æ–‡ä»¶ç±»å‹: {file_info.file.file_type}")  # è‡ªåŠ¨è¯†åˆ«ä¸º "pdf"
```

#### ä¸Šä¼ ä¸åŒç±»å‹çš„å†…å®¹

```python
from file_hub_client import AsyncTamarFileHubClient
from pathlib import Path

async with AsyncTamarFileHubClient() as client:
    # 1. ä¸Šä¼ æ–‡ä»¶è·¯å¾„ï¼ˆå­—ç¬¦ä¸²æˆ–Pathå¯¹è±¡ï¼‰
    file_info = await client.blobs.upload("path/to/file.pdf")
    file_info = await client.blobs.upload(Path("path/to/file.pdf"))

    # 2. ä¸Šä¼ å­—èŠ‚æ•°æ®ï¼ˆéœ€è¦æŒ‡å®šæ–‡ä»¶åï¼‰
    content = b"This is file content"
    file_info = await client.blobs.upload(
        content,
        file_name="document.txt"
    )

    # 3. ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
    with open("image.png", "rb") as f:
        file_info = await client.blobs.upload(f)
```

#### å¤§æ–‡ä»¶ä¸Šä¼ ï¼ˆæµå¼ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ ï¼‰

```python
from file_hub_client import AsyncTamarFileHubClient, UploadMode

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")

    # è‡ªåŠ¨æ ¹æ®æ–‡ä»¶å¤§å°æ¥é€‰æ‹©æ˜¯æµå¼ä¸Šä¼ è¿˜æ˜¯æ–­ç‚¹ç»­ä¼ 
    file_info = await client.blobs.upload(
        "large_video.mp4",
        # mode=UploadMode.RESUMABLE # ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸Šä¼ çš„æ¨¡å¼
    )
```

#### ä¸´æ—¶æ–‡ä»¶ä¸Šä¼ 

```python
from file_hub_client import AsyncTamarFileHubClient, UploadMode

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")

    # è‡ªåŠ¨æ ¹æ®æ–‡ä»¶å¤§å°æ¥é€‰æ‹©æ˜¯æµå¼ä¸Šä¼ è¿˜æ˜¯æ–­ç‚¹ç»­ä¼ 
    file_info = await client.blobs.upload(
        "large_video.mp4",
        # mode=UploadMode.RESUMABLE,  # ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸Šä¼ çš„æ¨¡å¼
        is_temporary=True,  # ç”±è¿™ä¸ªå‚æ•°æŒ‡å®šæ˜¯å¦ä¸´æ—¶æ–‡ä»¶ï¼Œæ˜¯åˆ™ä¸ä¼šçº³å…¥æ•´ä¸ªæ–‡ä»¶ä½“ç³»ï¼Œå³ç”¨æˆ·æŸ¥è¯¢ä¸åˆ°è¿™ä¸ªæ–‡ä»¶
        # expire_seconds, # è¿‡æœŸç§’æ•°ï¼Œé»˜è®¤30å¤©
    )
```

### æ–‡ä»¶ä¸‹è½½

File Hub Client æä¾›äº†ç»Ÿä¸€çš„ä¸‹è½½æ¥å£ï¼Œæ”¯æŒä¸¤ç§ç»“æ„è¿”å›ï¼š

#### ä¸‹è½½è¿”å›ç»“æ„

- **ä¿å­˜åˆ°æœ¬åœ°ï¼ˆæœ¬åœ°è·¯å¾„ï¼‰**ï¼šé€‚ç”¨äºå„ç§æ–‡ä»¶ï¼Œç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°ï¼Œåˆ†å—æµå¼ä¸‹è½½ï¼Œæ”¯æŒé‡è¯•å’Œæ–­ç‚¹ç»­ä¼ 
- **ä¿å­˜åˆ°å†…å­˜ï¼ˆbytesï¼‰**ï¼šé€‚ç”¨äºå°æ–‡ä»¶ï¼Œç›´æ¥ä¸‹è½½åˆ°å†…å­˜ï¼Œåˆ†å—æµå¼ä¸‹è½½ï¼Œæ”¯æŒé‡è¯•

#### ä¸‹è½½åˆ°å†…å­˜ï¼ˆé€‚ç”¨äºå°æ–‡ä»¶ï¼‰

```python
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")

    # ä¸‹è½½æ–‡ä»¶åˆ°å†…å­˜ï¼ˆé€‚ç”¨äºå°æ–‡ä»¶ï¼‰
    content = await client.blobs.download(file_id="file-001")
    print(f"ä¸‹è½½å®Œæˆï¼Œæ–‡ä»¶å¤§å°: {len(content)} bytes")
```

#### ä¸‹è½½åˆ°æœ¬åœ°æ–‡ä»¶

```python
from file_hub_client import AsyncTamarFileHubClient
from pathlib import Path

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")

    # ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
    save_path = await client.blobs.download(
        file_id="file-001",
        save_path="downloads/document.pdf"  # æˆ– Path å¯¹è±¡
    )
    print(f"æ–‡ä»¶å·²ä¿å­˜åˆ°: {save_path}")
```

### æ–‡ä»¶ç®¡ç†æ“ä½œ

File Hub Client æä¾›äº†å®Œæ•´çš„æ–‡ä»¶ç®¡ç†åŠŸèƒ½ï¼Œé€šè¿‡ `files` æœåŠ¡è®¿é—®ï¼š

#### è·å–æ–‡ä»¶ä¿¡æ¯

```python
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")
    
    # è·å–æ–‡ä»¶è¯¦ç»†ä¿¡æ¯
    file_info = await client.files.get_file(file_id="file-001")
    print(f"æ–‡ä»¶å: {file_info.file_name}")
    print(f"æ–‡ä»¶å¤§å°: {file_info.file_size} bytes")
    print(f"åˆ›å»ºæ—¶é—´: {file_info.created_at}")
```

#### é‡å‘½åæ–‡ä»¶

```python
# é‡å‘½åæ–‡ä»¶
updated_file = await client.files.rename_file(
    file_id="file-001",
    new_name="æ–°æ–‡æ¡£åç§°.pdf"
)
print(f"æ–‡ä»¶å·²é‡å‘½åä¸º: {updated_file.file_name}")
```

#### åˆ é™¤æ–‡ä»¶

```python
# åˆ é™¤æ–‡ä»¶
await client.files.delete_file(file_id="file-001")
print("æ–‡ä»¶å·²åˆ é™¤")
```

#### åˆ—å‡ºæ–‡ä»¶

```python
# åˆ—å‡ºæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
file_list = await client.files.list_files(
    folder_id="folder-001",  # å¯é€‰ï¼Œä¸æŒ‡å®šåˆ™åˆ—å‡ºæ ¹ç›®å½•
    file_name="report",      # å¯é€‰ï¼ŒæŒ‰åç§°è¿‡æ»¤
    file_type=["pdf", "docx"],  # å¯é€‰ï¼ŒæŒ‰ç±»å‹è¿‡æ»¤
    page_size=20,
    page=1
)

for file in file_list.files:
    print(f"- {file.file_name} ({file.file_size} bytes)")
```

#### ç”Ÿæˆåˆ†äº«é“¾æ¥

```python
# ç”Ÿæˆæ–‡ä»¶åˆ†äº«é“¾æ¥
share_id = await client.files.generate_share_link(
    file_id="file-001",
    is_public=True,           # æ˜¯å¦å…¬å¼€
    access_scope="view",      # è®¿é—®æƒé™ï¼šview, download
    expire_seconds=86400,     # 24å°æ—¶åè¿‡æœŸ
    share_password="secret"   # å¯é€‰ï¼Œè®¾ç½®è®¿é—®å¯†ç 
)
print(f"åˆ†äº«ID: {share_id}")
```

### æ–‡ä»¶å¤¹æ“ä½œ

File Hub Client æä¾›äº†å®Œæ•´çš„æ–‡ä»¶å¤¹ç®¡ç†åŠŸèƒ½ï¼Œé€šè¿‡ `folders` æœåŠ¡è®¿é—®ï¼š

#### åˆ›å»ºæ–‡ä»¶å¤¹

```python
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")
    
    # åœ¨æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹
    folder = await client.folders.create_folder(
        folder_name="æˆ‘çš„æ–‡æ¡£"
    )
    print(f"åˆ›å»ºæ–‡ä»¶å¤¹: {folder.id}")
    
    # åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå­æ–‡ä»¶å¤¹
    sub_folder = await client.folders.create_folder(
        folder_name="é¡¹ç›®èµ„æ–™",
        parent_id=folder.id
    )
    print(f"åˆ›å»ºå­æ–‡ä»¶å¤¹: {sub_folder.id}")
```

#### é‡å‘½åæ–‡ä»¶å¤¹

```python
# é‡å‘½åæ–‡ä»¶å¤¹
updated_folder = await client.folders.rename_folder(
    folder_id="folder-001",
    new_name="æ–°æ–‡ä»¶å¤¹åç§°"
)
print(f"æ–‡ä»¶å¤¹å·²é‡å‘½åä¸º: {updated_folder.folder_name}")
```

#### ç§»åŠ¨æ–‡ä»¶å¤¹

```python
# ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹
moved_folder = await client.folders.move_folder(
    folder_id="folder-001",
    new_parent_id="folder-002"  # ç›®æ ‡çˆ¶æ–‡ä»¶å¤¹ID
)
print(f"æ–‡ä»¶å¤¹å·²ç§»åŠ¨åˆ°: {moved_folder.parent_id}")
```

#### åˆ é™¤æ–‡ä»¶å¤¹

```python
# åˆ é™¤æ–‡ä»¶å¤¹ï¼ˆåŒ…æ‹¬å…¶ä¸­çš„æ‰€æœ‰å†…å®¹ï¼‰
await client.folders.delete_folder(folder_id="folder-001")
print("æ–‡ä»¶å¤¹å·²åˆ é™¤")
```
#### åˆ—å‡ºæ–‡ä»¶å¤¹

```python
# åˆ—å‡ºæ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹
folder_list = await client.folders.list_folders()

# åˆ—å‡ºæŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹
sub_folders = await client.folders.list_folders(
    parent_id="folder-001",
    folder_name="é¡¹ç›®",  # å¯é€‰ï¼ŒæŒ‰åç§°è¿‡æ»¤
)

for folder in folder_list.items:
    print(f"- {folder.folder_name} (ID: {folder.id})")
    print(f"  åˆ›å»ºè€…: {folder.created_by}")
    print(f"  åˆ›å»ºæ—¶é—´: {folder.created_at}")
```

#### å®Œæ•´ç¤ºä¾‹ï¼šç»„ç»‡æ–‡ä»¶ç»“æ„

```python
from file_hub_client import AsyncTamarFileHubClient

async with AsyncTamarFileHubClient() as client:
    # è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
    client.set_user_context(org_id="123", user_id="456")
    
    # åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„
    project_folder = await client.folders.create_folder("æˆ‘çš„é¡¹ç›®")
    docs_folder = await client.folders.create_folder("æ–‡æ¡£", parent_id=project_folder.id)
    images_folder = await client.folders.create_folder("å›¾ç‰‡", parent_id=project_folder.id)
    
    # ä¸Šä¼ æ–‡ä»¶åˆ°å¯¹åº”æ–‡ä»¶å¤¹
    doc_file = await client.blobs.upload(
        "project_plan.pdf",
        folder_id=docs_folder.id
    )
    
    image_file = await client.blobs.upload(
        "logo.png",
        folder_id=images_folder.id
    )
    
    # åˆ—å‡ºé¡¹ç›®æ–‡ä»¶å¤¹çš„å†…å®¹
    print("é¡¹ç›®ç»“æ„ï¼š")
    
    # åˆ—å‡ºå­æ–‡ä»¶å¤¹
    folders = await client.folders.list_folders(parent_id=project_folder.id)
    for folder in folders.items:
        print(f"ğŸ“ {folder.folder_name}/")
        
        # åˆ—å‡ºæ¯ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶
        files = await client.files.list_files(folder_id=folder.id)
        for file in files.files:
            print(f"  ğŸ“„ {file.file_name}")
```

### æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼ˆæ¨èï¼‰

File Hub Client æä¾›äº†é¢„é…ç½®çš„å•ä¾‹å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç›´æ¥å¯¼å…¥ä½¿ç”¨ï¼š

```python
# åŒæ­¥å®¢æˆ·ç«¯
import os
from file_hub_client import tamar_client as client

# ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ with è¯­å¥
client.set_user_context(org_id="123", user_id="456")
file_path = os.path.abspath("1.jpg")
file_info = client.blobs.upload(file_path)
```

```python
# å¼‚æ­¥å®¢æˆ·ç«¯
import asyncio
import os
from file_hub_client import async_tamar_client as async_client


async def main():
    # ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ with è¯­å¥
    await async_client._ensure_connected()  # éœ€è¦æ‰‹åŠ¨è¿æ¥
    async_client.set_user_context(org_id="123", user_id="456")
    file_path = os.path.abspath("1.jpg")
    file_info = await async_client.blobs.upload(file_path)
    print(f"ä¸Šä¼ æˆåŠŸ: {file_info.file.id}")


asyncio.run(main())
```

### è‡ªå®šä¹‰é…ç½®çš„å•ä¾‹

å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ `get_client()` æˆ– `get_async_client()`ï¼š

```python
from file_hub_client import get_client

# è·å–è‡ªå®šä¹‰é…ç½®çš„å®¢æˆ·ç«¯ï¼ˆå•ä¾‹ï¼‰
client = get_client(
    host="custom-server.com",
    port=50051,
    secure=True
)
```

### ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨å¸Œæœ›æ˜ç¡®æ§åˆ¶è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼š

```python
import os
from file_hub_client import TamarFileHubClient

# ä½¿ç”¨ with è¯­å¥
with TamarFileHubClient(host="localhost", port=50051) as client:
    file_path = os.path.abspath("1.jpg")
    file_info = client.blobs.upload(file_path)
```

### å¼‚æ­¥å®¢æˆ·ç«¯ç¤ºä¾‹

```python
import asyncio
import os
from file_hub_client import AsyncTamarFileHubClient


async def main():
    # åˆ›å»ºå®¢æˆ·ç«¯
    async with AsyncTamarFileHubClient(host="localhost", port=50051) as client:
        # ä¸Šä¼ æ–‡ä»¶
        file_path = os.path.abspath("1.jpg")
        file_info = await client.blobs.upload(file_path)
        print(f"ä¸Šä¼ æˆåŠŸ: {file_info.file.id}")


asyncio.run(main())
```

### åŒæ­¥å®¢æˆ·ç«¯ç¤ºä¾‹

```python
import os
from file_hub_client import TamarFileHubClient

# åˆ›å»ºå®¢æˆ·ç«¯
with TamarFileHubClient(host="localhost", port=50051) as client:
    # ä¸Šä¼ æ–‡ä»¶
    file_path = os.path.abspath("1.jpg")
    file_info = client.blobs.upload(file_path)
    print(f"ä¸Šä¼ æˆåŠŸ: {file_info.file.id}")
```

### ä½¿ç”¨ç”¨æˆ·ä¸Šä¸‹æ–‡

File Hub Client æ”¯æŒç²¾ç»†çš„ç”¨æˆ·ä¸Šä¸‹æ–‡ç®¡ç†ï¼ŒåŒºåˆ†èµ„æºæ‰€æœ‰æƒå’Œå®é™…æ“ä½œè€…ï¼š

```python
import os
from file_hub_client import AsyncTamarFileHubClient, UserContext, RequestContext, Role

# åˆ›å»ºç”¨æˆ·ä¸Šä¸‹æ–‡
user_context = UserContext(
    org_id="org-123",  # ç»„ç»‡ID
    user_id="user-456",  # ç”¨æˆ·IDï¼ˆèµ„æºæ‰€æœ‰è€…ï¼‰
    role=Role.ACCOUNT,  # è§’è‰²ï¼šACCOUNT, AGENT, SYSTEM
    actor_id="agent-789"  # å®é™…æ“ä½œè€…IDï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºuser_idï¼‰
)

# åˆ›å»ºè¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆè‡ªåŠ¨æ”¶é›†å®¢æˆ·ç«¯ä¿¡æ¯ï¼‰
request_context = RequestContext(
    client_ip="192.168.1.100",  # å®¢æˆ·ç«¯IPï¼ˆå¯é€‰ï¼‰
    client_type="web",  # å®¢æˆ·ç«¯ç±»å‹ï¼šweb, mobile, desktop, cli
    client_version="2.0.0",  # å®¢æˆ·ç«¯ç‰ˆæœ¬
    extra={"session_id": "xyz"}  # é¢å¤–çš„å…ƒæ•°æ®
)

# ä½¿ç”¨ä¸Šä¸‹æ–‡åˆ›å»ºå®¢æˆ·ç«¯
async with AsyncTamarFileHubClient(
        user_context=user_context,
        request_context=request_context
) as client:
    # æ‰€æœ‰æ“ä½œéƒ½ä¼šåŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯
    file_path = os.path.abspath("1.jpg")
    await client.blobs.upload(file_path)
```

### åŠ¨æ€åˆ‡æ¢ç”¨æˆ·ä¸Šä¸‹æ–‡

```python
from file_hub_client import tamar_client as client, Role

# åˆå§‹ç”¨æˆ·
client.set_user_context(
    org_id="123",
    user_id="456",
    role=Role.ACCOUNT
)
```

### è¯·æ±‚è¿½è¸ª

å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆè¯·æ±‚IDå¹¶æ”¶é›†ç¯å¢ƒä¿¡æ¯ï¼š

```python
from file_hub_client import tamar_client as client

# è·å–å½“å‰ä¸Šä¸‹æ–‡ä¿¡æ¯
user_ctx = client.get_user_context()
request_ctx = client.get_request_context()

print(f"è¯·æ±‚ID: {request_ctx.request_id}")
print(f"å®¢æˆ·ç«¯ä¿¡æ¯: {request_ctx.client_type} v{request_ctx.client_version}")
print(f"æ“ä½œè€…: {user_ctx.actor_id} (è§’è‰²: {user_ctx.role})")
```

## å¼€å‘

### ç”Ÿæˆ gRPC ä»£ç 

å½“ proto æ–‡ä»¶æ›´æ–°åï¼Œéœ€è¦é‡æ–°ç”Ÿæˆä»£ç ï¼š

```bash
# ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·
file-hub-gen-proto

# æˆ–ç›´æ¥è¿è¡Œè„šæœ¬
cd file_hub_client/rpc
python generate_grpc.py
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
