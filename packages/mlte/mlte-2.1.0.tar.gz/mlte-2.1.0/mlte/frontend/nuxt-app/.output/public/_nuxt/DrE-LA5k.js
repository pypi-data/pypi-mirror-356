import{_ as ae}from"./C7ppFzz8.js";import{j as le,k as P,r as c,l as z,m as ne,n as y,q as ie,o as m,w as n,a as o,b as i,s as a,d as p,c as w,v as K,F,x as J,t as k,y as Q,z as W,A as re}from"./DenydyMN.js";import{h as A,r as x,S as X,T as S}from"./Ch47lW9D.js";import{i as de,a as ue,b as ce,c as pe,d as me}from"./Ch7Mx1Yh.js";const _e=o("title",null,"Artifact Store",-1),he={style:{display:"flex"}},ve={class:"model-version-div"},be=o("br",null,null,-1),fe={class:"model-version-div"},ye=o("br",null,null,-1),we=o("div",null,null,-1),ge={class:"scrollable-table-div"},Ee=o("p",null," A negotiation card is a document with a series of discussion points to be documented during a negotiation between all project stakeholders at the project's outset. It is then used as a reference throughout development and is updated at prescribed negotiation points. ",-1),Te={class:"table usa-table usa-table--borderless"},Ve=o("thead",null,[o("tr",null,[o("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),o("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),o("th",{scope:"col"},"Actions")])],-1),Re={scope:"row"},ke={key:0,style:{float:"left",color:"red"}},Ae={class:"scrollable-table-div"},xe=o("p",null," A report is a human and machine-readable summary of all knowledge gained about a model during the MLTE process. ",-1),Se={class:"table usa-table usa-table--borderless"},Ie=o("thead",null,[o("tr",null,[o("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),o("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),o("th",{scope:"col"},"Actions")])],-1),Ue={scope:"row"},qe={key:0,style:{float:"left",color:"red"}},Me={class:"scrollable-table-div"},Ce=o("p",null," A test suite defines the model requirements that must be satisfied to ensure successful integration with the target system. ",-1),Le={class:"scrollable-table-div"},$e=o("p",null," Test Results are produced by combining a specification with its corresponding results; this artifact communicates how well a model performed against all of its requirements. ",-1),Be={class:"scrollable-table-div"},De=o("p",null," Evidences are the atomic unit of model evaluation in MLTE. A value is any artifact produced by a MLTE measurement for the purposes of model evaluation. ",-1),je=le({__name:"index",async setup(Pe){let _,h;const g=ne(),E=P("token"),v=c(""),b=c(""),T=c([]),f=c([]),U=c([]),d=P("selectedModel",{decode(s){return s}});d.value=d.value||"";const u=P("selectedVersion",{decode(s){return s}});u.value=u.value||"";const Y=c([{id:"id",label:"ID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),Z=c([{id:"id",label:"ID",sortable:!0},{id:"test_suite_id",label:"Test Suite ID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),ee=c([{id:"id",label:"ID",sortable:!0},{id:"measurement",label:"Measurement",sortable:!0},{id:"type",label:"Type",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),q=c([]),M=c([]),C=c([]),L=c([]),$=c([]);[_,h]=z(()=>N()),await _,h(),T.value!==null&&(T.value.map(e=>e.value).includes(d.value)||(d.value="",u.value=""),d.value!==""&&([_,h]=z(()=>B(d.value,!1)),await _,h(),f.value.map(r=>r.value).includes(u.value)||(u.value=""),u.value!==""&&([_,h]=z(()=>O(u.value)),await _,h())));async function N(){await $fetch(g.public.apiPath+"/user/me/models/",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){x()},onResponse({response:s}){s.ok&&(U.value=s._data)},onResponseError({response:s}){A(s.status,s._data.error_description)}}),T.value=[],U.value&&U.value.forEach(s=>{T.value.push(new X(s,s))})}async function B(s,e){if(d.value=s,e&&(u.value=""),s===""){f.value=[],I();return}await $fetch(g.public.apiPath+"/model/"+s+"/version",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){x()},onResponse({response:r}){r.ok&&r._data&&(I(),d.value=s,f.value=[],r._data.forEach(t=>{f.value.push(new X(t,t))}))},onResponseError({response:r}){A(r.status,r._data.error_description)}}),f.value.sort(function(r,t){return r.value<t.value?-1:r.value>t.value?1:0})}async function O(s){if(u.value=s,u.value===""){I();return}await $fetch(g.public.apiPath+"/model/"+d.value+"/version/"+u.value+"/artifact",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){x()},onResponse({response:e}){e.ok&&e._data&&te(d.value,u.value,e._data)},onResponseError({response:e}){A(e.status,e._data.error_description)}})}function te(s,e,r){I(),r.forEach(t=>{t.header.timestamp=new Date(t.header.timestamp*1e3).toLocaleString("en-US"),t.header.type==="negotiation_card"?de(t)&&q.value.push(new S(t.header.identifier,t.header.timestamp,s,e)):t.header.type==="report"?ue(t)&&C.value.push(new S(t.header.identifier,t.header.timestamp,s,e)):t.header.type==="test_suite"?ce(t)&&M.value.push(new S(t.header.identifier,t.header.timestamp,s,e)):t.body.artifact_type==="test_results"&&pe(t)&&L.value.push(new S(t.header.identifier,t.header.timestamp,s,e,t.body.test_suite_id)),t.body.artifact_type==="evidence"&&me(t)&&$.value.push(new S(t.header.identifier,t.header.timestamp,s,e,void 0,t.body.metadata.measurement.measurement_class,t.body.value.evidence_type))})}function I(){q.value=[],C.value=[],M.value=[],L.value=[],$.value=[]}async function H(s){try{await $fetch(g.public.apiPath+"/model/",{retry:0,method:"POST",headers:{Authorization:"Bearer "+E.value},body:{identifier:s},onRequestError(){x()},onResponse({response:e}){e.ok&&(N(),alert(`Model, ${s} has been created.`),v.value="")},onResponseError({response:e}){A(e.status,e._data.error_description)}})}catch(e){console.log(e)}}async function j(s,e){try{await $fetch(g.public.apiPath+"/model/"+s+"/version",{retry:0,method:"POST",headers:{Authorization:"Bearer "+E.value},body:{identifier:e},onRequestError(){x()},onResponse({response:r}){r.ok&&(B(s,!1),alert(`Version, ${e} for model, ${s} has been created`),b.value="")},onResponseError({response:r}){A(r.status,r._data.error_description)}})}catch(r){console.log(r)}}return(s,e)=>{const r=y("UsaTextInput"),t=y("UsaButton"),G=y("UsaSelect"),V=ae,R=y("UsaAccordionItem"),D=y("UsaTable"),oe=y("UsaAccordion"),se=re;return m(),ie(se,{name:"base-layout"},{"page-title":n(()=>[p("Artifact Store")]),"right-sidebar":n(()=>[o("div",null,[i(r,{modelValue:a(v),"onUpdate:modelValue":e[0]||(e[0]=l=>W(v)?v.value=l:null),onKeyup:e[1]||(e[1]=Q(l=>H(a(v)),["enter"]))},{label:n(()=>[p(" New Model ")]),_:1},8,["modelValue"]),i(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[2]||(e[2]=l=>H(a(v)))},{default:n(()=>[p(" Create Model ")]),_:1}),i(r,{modelValue:a(b),"onUpdate:modelValue":e[3]||(e[3]=l=>W(b)?b.value=l:null),disabled:a(d)==="",onKeyup:e[4]||(e[4]=Q(l=>j(a(d),a(b)),["enter"]))},{label:n(()=>[p(" New Version for: "+k(a(d)),1)]),_:1},8,["modelValue","disabled"]),i(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[5]||(e[5]=l=>j(a(d),a(b)))},{default:n(()=>[p(" Create Version ")]),_:1})])]),default:n(()=>[_e,o("div",he,[o("div",ve,[i(G,{options:a(T),"model-value":a(d),"onUpdate:modelValue":e[6]||(e[6]=l=>B(l,!0))},{label:n(()=>[p("Model")]),_:1},8,["options","model-value"]),be]),o("div",fe,[i(G,{options:a(f),"model-value":a(u),"onUpdate:modelValue":e[7]||(e[7]=l=>O(l))},{label:n(()=>[p("Version")]),_:1},8,["options","model-value"]),ye]),we]),i(oe,{multiselectable:"",bordered:""},{default:n(()=>[i(R,{label:"Negotiation Cards"},{default:n(()=>[o("div",ge,[Ee,o("table",Te,[Ve,o("tbody",null,[(m(!0),w(F,null,J(a(q),l=>(m(),w("tr",{key:l.id},[o("th",Re,k(l.id),1),o("td",null,k(l.timestamp),1),o("td",null,[i(V,{to:{path:"/negotiation-card",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(t,{class:"primary-button"},{default:n(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),i(V,{to:{path:"/negotiation-card",query:{model:a(d),version:a(u)}}},{default:n(()=>[i(t,{disabled:a(d)===""||a(u)==="",class:"primary-button",style:{float:"left"}},{default:n(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),a(d)===""||a(u)===""?(m(),w("p",ke," Select a model and version to start a new negotiation card here. ")):K("",!0)])]),_:1}),i(R,{label:"Reports"},{default:n(()=>[o("div",Ae,[xe,o("table",Se,[Ie,o("tbody",null,[(m(!0),w(F,null,J(a(C),l=>(m(),w("tr",{key:l.id},[o("th",Ue,k(l.id),1),o("td",null,k(l.timestamp),1),o("td",null,[i(V,{to:{path:"/report-form",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(t,{class:"primary-button"},{default:n(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"]),i(V,{target:"_blank",to:{path:"/report-export",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:n(()=>[i(t,{class:"primary-button"},{default:n(()=>[p(" Export ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),i(V,{to:{path:"/report-form",query:{model:a(d),version:a(u)}}},{default:n(()=>[i(t,{disabled:a(d)===""||a(u)==="",class:"primary-button",style:{float:"left"}},{default:n(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),a(d)===""||a(u)===""?(m(),w("p",qe," Select a model and version to start a new report. ")):K("",!0)])]),_:1}),i(R,{label:"Test Suites"},{default:n(()=>[o("div",Me,[Ce,i(D,{headers:a(Y),rows:a(M),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),i(R,{label:"Test Results"},{default:n(()=>[o("div",Le,[$e,i(D,{headers:a(Z),rows:a(L),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),i(R,{label:"Evidences"},{default:n(()=>[o("div",Be,[De,i(D,{headers:a(ee),rows:a($),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1})]),_:1})]),_:1})}}});export{je as default};
