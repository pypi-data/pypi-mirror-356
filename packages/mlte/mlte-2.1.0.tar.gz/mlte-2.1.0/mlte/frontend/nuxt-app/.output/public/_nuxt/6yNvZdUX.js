import{_ as P}from"./CpLLQA7_.js";import{_ as z,a as j,b as H,c as O}from"./CqaupeIj.js";import{_ as G}from"./C7ppFzz8.js";import{j as J,k as K,D as p,r as V,l as F,n as w,q as A,w as c,A as W,o as r,a as e,v as X,b as n,s,z as Y,d as m,c as i,F as D,x as R,t as l,m as Z}from"./DenydyMN.js";import{l as tt,a as et,c as ot,s as st}from"./0wQYiv8f.js";import{h as at,r as rt,Q as nt,M as lt,D as ut,a as dt}from"./Ch47lW9D.js";import{a as ct}from"./Ch7Mx1Yh.js";import"./hPHynIdq.js";const it=e("title",null,"Report",-1),mt=e("br",null,null,-1),_t=e("h2",{class:"section-header"},"Test Results (Quantitative Analysis)",-1),pt={class:"table usa-table usa-table--borderless"},yt=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"}," Quality Attribute Scenario "),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Test Case ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),ft={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},bt={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},vt={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},ht={key:3},kt=e("hr",null,null,-1),qt=e("h1",{class:"section-header"},"Additional Context",-1),Vt={style:{"text-align":"right","margin-top":"1em"}},gt=J({__name:"report-form",async setup(xt){let u,y;const S=Z(),k=K("token"),f=p().query.model,b=p().query.version,_=p().query.artifactId,C=_!==void 0,v=V(""),x=V([]),a=V({artifact_type:"report",nc_data:{system:new dt,data:[new ut],model:new lt,system_requirements:[new nt]},test_results_id:"",comments:[{content:""}],quantitative_analysis:{}});_!==void 0&&(a.value=([u,y]=F(()=>tt(k.value,f,b,_)),u=await u,y(),u),a.value.test_results_id&&(x.value=([u,y]=F(()=>et(k.value,f,b,a.value.test_results_id,a.value.nc_data.system_requirements)),u=await u,y(),u)));async function g(){const h=_||v.value,o={header:{identifier:h,type:"report",timestamp:-1,creator:""},body:a.value};if(ct(o))try{await $fetch(S.public.apiPath+"/model/"+f+"/version/"+b+"/artifact",{retry:0,method:"POST",headers:{Authorization:"Bearer "+k.value},body:{artifact:o,force:C,parents:!1},onRequestError(){rt()},onResponse({response:d}){d.ok&&(st("report",h),p().query.artifactId===void 0&&(window.location.href="/report-form?model="+p().query.model+"&version="+p().query.version+"&artifactId="+h))},onResponseError({response:d}){at(d.status,d._data.error_description)}})}catch(d){console.log(d)}else console.log("Invalid report.")}return(h,o)=>{const d=P,U=w("UsaTextInput"),$=z,T=j,B=H,E=O,q=w("UsaButton"),M=G,N=W;return r(),A(N,{name:"base-layout"},{"page-title":c(()=>[m("Report")]),default:c(()=>[it,s(_)===void 0?(r(),A(U,{key:0,modelValue:s(v),"onUpdate:modelValue":o[0]||(o[0]=t=>Y(v)?v.value=t:null)},{label:c(()=>[m(" Artifact ID "),n(d,null,{default:c(()=>[m(" The Artifact ID this negotiation card "),mt,m(" will be saved under upon submission. ")]),_:1})]),_:1},8,["modelValue"])):X("",!0),n($,{modelValue:s(a).nc_data.system,"onUpdate:modelValue":o[1]||(o[1]=t=>s(a).nc_data.system=t)},null,8,["modelValue"]),n(T,{modelValue:s(a).nc_data.system_requirements,"onUpdate:modelValue":o[2]||(o[2]=t=>s(a).nc_data.system_requirements=t)},null,8,["modelValue"]),_t,e("table",pt,[yt,e("tbody",null,[(r(!0),i(D,null,R(s(x),(t,Q)=>(r(),i("tr",{key:Q},[t.status=="Success"?(r(),i("td",ft,l(t.status),1)):t.status=="Info"?(r(),i("td",bt,l(t.status),1)):t.status=="Failure"?(r(),i("td",vt,l(t.status),1)):(r(),i("td",ht,l(t.status),1)),e("td",null,[(r(!0),i(D,null,R(t.qas_list,(I,L)=>(r(),i("div",{key:L},l(I.id)+" - "+l(I.qa),1))),128))]),e("td",null,l(t.measurement),1),e("td",null,l(t.test_case_id),1),e("td",null,l(t.message),1)]))),128))])]),kt,qt,n(B,{modelValue:s(a).nc_data.data,"onUpdate:modelValue":o[3]||(o[3]=t=>s(a).nc_data.data=t)},null,8,["modelValue"]),n(E,{modelValue:s(a).nc_data.model,"onUpdate:modelValue":o[4]||(o[4]=t=>s(a).nc_data.model=t)},null,8,["modelValue"]),e("div",Vt,[n(q,{class:"secondary-button",onClick:o[5]||(o[5]=t=>s(ot)("/"))},{default:c(()=>[m(" Cancel ")]),_:1}),n(M,{target:"_blank",to:{path:"/report-export",query:{model:s(f),version:s(b),artifactId:s(_)}}},{default:c(()=>[n(q,{class:"primary-button"},{default:c(()=>[m(" Export ")]),_:1})]),_:1},8,["to"]),n(q,{class:"primary-button",onClick:o[6]||(o[6]=t=>g())},{default:c(()=>[m(" Save ")]),_:1})])]),_:1})}}});export{gt as default};
