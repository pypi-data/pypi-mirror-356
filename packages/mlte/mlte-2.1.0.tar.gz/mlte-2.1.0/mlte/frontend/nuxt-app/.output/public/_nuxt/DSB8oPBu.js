import{j,n as w,c as V,o as h,a as i,F as M,x as G,t as A,v as B,b as n,w as a,d as l,_ as se,q as ee,k as te,r as _,l as Q,m as ae,s as f,A as re,y as Z,z as F}from"./DenydyMN.js";import{_ as ue}from"./CpLLQA7_.js";import{u as H,r as ie}from"./hPHynIdq.js";import{S as de,b as W,h as $,r as U,c as X}from"./Ch47lW9D.js";import{i as ce}from"./0wQYiv8f.js";import"./Ch7Mx1Yh.js";const me={class:"table usa-table usa-table--borderless"},pe=i("thead",null,[i("tr",null,[i("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Identifier"),i("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Catalog"),i("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Tags"),i("th",{"data-sortable":"",scope:"col",role:"columnheader"}," Quality Attribute Category "),i("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Code Type"),i("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Actions")])],-1),fe={key:0},ye=j({__name:"entry-list",props:{modelValue:{type:Array,required:!0}},emits:["addEntry","editEntry","deleteEntry"],setup(d,{emit:b}){const c=b;return(g,C)=>{const v=w("UsaButton");return h(),V("table",me,[pe,(h(!0),V(M,null,G(d.modelValue,(m,r)=>(h(),V("tr",{key:r},[i("td",null,A(m.header.identifier),1),i("td",null,A(m.header.catalog_id),1),i("td",null,[(h(!0),V(M,null,G(m.tags,(E,p)=>(h(),V("span",{key:p},[i("span",null,A(E),1),p+1<m.tags.length?(h(),V("span",fe,", ")):B("",!0)]))),128))]),i("td",null,A(m.qa_category),1),i("td",null,A(m.code_type),1),i("td",null,[n(v,{class:"secondary-button",onClick:E=>c("editEntry",m)},{default:a(()=>[l(" Edit ")]),_:2},1032,["onClick"]),n(v,{class:"usa-button usa-button--secondary",onClick:E=>c("deleteEntry",m.header.catalog_id,m.header.identifier)},{default:a(()=>[l(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),he="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%201H4c-1.1%200-2%20.9-2%202v14h2V3h12V1zm3%204H8c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h11c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2zm0%2016H8V7h11v14z'/%3e%3c/svg%3e",ge={},ve=i("img",{src:he,class:"inline-icon usa-icon"},null,-1);function _e(d,b){const c=w("UsaButton");return h(),ee(c,{variant:"unstyled",class:"inline-icon"},{default:a(()=>[ve]),_:1})}const Ve=se(ge,[["render",_e]]),be={key:0},Ee={class:"section-header"},Ce=i("h3",{style:{display:"inline"}},"Created by:",-1),xe={key:1},we={class:"multi-line-checkbox-div"},Ae={class:"usa-label"},ke={class:"submit-footer"},$e=j({__name:"entry-edit",props:{modelValue:{type:Object,required:!0},newEntryFlag:{type:Boolean,required:!0}},emits:["cancel","submit","updateEntry"],async setup(d,{emit:b}){let c,g;const C=ae(),v=te("token"),m=b,r=d,E=_("");E.value=new Date(r.modelValue.header.created*1e3).toLocaleString("en-US");const p=_({catalog:!1,identifier:!1,code_type:!1}),T=_([]),{data:q}=([c,g]=Q(()=>H(C.public.apiPath+"/catalogs",{method:"GET",headers:{Authorization:"Bearer "+v.value}},"$sxvAzaAMlm")),c=await c,g(),c);q.value&&q.value.forEach(s=>{s.read_only||T.value.push(new de(s.id,s.id+" ("+s.type.replaceAll("_"," ")+")"))});const R=_([]),{data:O}=([c,g]=Q(()=>H(C.public.apiPath+"/custom_list/qa_categories/",{method:"GET",headers:{Authorization:"Bearer "+v.value}},"$Akv34DHN4u")),c=await c,g(),c);O.value&&O.value.forEach(s=>{R.value.push(new W(s.name,s.name,s.description,s.parent))});const S=_([]),z=_([]),{data:P}=([c,g]=Q(()=>H(C.public.apiPath+"/custom_list/quality_attributes/",{method:"GET",headers:{Authorization:"Bearer "+v.value}},"$Y4CZaatCkL")),c=await c,g(),c);P.value&&P.value.forEach(s=>{z.value.push(new W(s.name,s.name,s.description,s.parent))});const t=_([{name:"Audio Analysis",selected:!1},{name:"Classification",selected:!1},{name:"Computer Vision",selected:!1},{name:"Decoder",selected:!1},{name:"Encoder",selected:!1},{name:"General",selected:!1},{name:"Generative Model",selected:!1},{name:"Infrared",selected:!1},{name:"NLP",selected:!1},{name:"Object Detection",selected:!1},{name:"Sentiment Analysis",selected:!1},{name:"Regression",selected:!1},{name:"Segmentation",selected:!1},{name:"Tabular",selected:!1},{name:"Time Series",selected:!1}]),o=_([{value:"measurement",text:"Measurement"},{value:"validation",text:"Validation "}]);t.value.forEach(s=>{r.modelValue.tags.find(e=>e===s.name)&&(s.selected=!0)}),D(r.modelValue.qa_category,r.modelValue.quality_attribute);async function x(){p.value=ie(p.value);let s=!1;if(r.modelValue.header.catalog_id===""&&(p.value.catalog=!0,s=!0),r.modelValue.header.identifier===""&&(p.value.identifier=!0,s=!0),r.modelValue.code_type===""&&(p.value.code_type=!0,s=!0),s){ce();return}m("submit",r.modelValue)}function N(s,e){if(s)r.modelValue.tags.push(e),r.modelValue.tags.sort();else{const y=r.modelValue.tags.find(k=>k===e);if(y){const k=r.modelValue.tags.indexOf(y);r.modelValue.tags.splice(k,1)}}}function D(s,e){S.value=[],z.value.forEach(y=>{y.parent==s&&S.value.push(y)}),typeof e>"u"?r.modelValue.quality_attribute="":r.modelValue.quality_attribute=e}function I(){navigator.clipboard.writeText(r.modelValue.code)}return(s,e)=>{const y=ue,k=w("UsaSelect"),L=w("UsaTextInput"),le=w("UsaCheckbox"),oe=Ve,K=w("UsaTextarea"),J=w("UsaButton");return h(),V("div",null,[d.newEntryFlag?B("",!0):(h(),V("div",be,[i("h1",Ee,A(d.modelValue.header.identifier),1),Ce,l(" "+A(d.modelValue.header.creator)+" - "+A(f(E)),1)])),d.newEntryFlag?(h(),V("div",xe,[n(k,{modelValue:d.modelValue.header.catalog_id,"onUpdate:modelValue":e[0]||(e[0]=u=>d.modelValue.header.catalog_id=u),options:f(T),error:f(p).catalog,onChange:e[1]||(e[1]=u=>f(p).catalog=!1)},{label:a(()=>[l(" Catalog "),n(y,null,{default:a(()=>[l(" Catalog where test example will be stored. ")]),_:1})]),"error-message":a(()=>[l("A catalog must be selected")]),_:1},8,["modelValue","options","error"]),n(L,{modelValue:r.modelValue.header.identifier,"onUpdate:modelValue":e[2]||(e[2]=u=>r.modelValue.header.identifier=u),error:f(p).identifier},{label:a(()=>[l(" Identifier "),n(y,null,{default:a(()=>[l(" User-defined identifier for the test example. ")]),_:1})]),"error-message":a(()=>[l("Identifier is required.")]),_:1},8,["modelValue","error"])])):B("",!0),i("div",we,[i("label",Ae,[l(" Tags "),n(y,null,{default:a(()=>[l(" System-defined tags that are used in catalog search. Select as many as are relevant to the test example. ")]),_:1})]),(h(!0),V(M,null,G(f(t),(u,ne)=>(h(),V("span",{key:ne,class:"multiple-per-line-checkbox"},[n(le,{modelValue:u.selected,"onUpdate:modelValue":[Y=>u.selected=Y,Y=>N(u.selected,u.name)]},{default:a(()=>[l(A(u.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),n(k,{modelValue:d.modelValue.qa_category,"onUpdate:modelValue":e[3]||(e[3]=u=>d.modelValue.qa_category=u),options:f(R),onChange:e[4]||(e[4]=u=>D(d.modelValue.qa_category))},{label:a(()=>[l(" Quality Attribute Category "),n(y,null,{default:a(()=>[l(" High-level quality attribute category that the test example is validating, e.g., functional correctness, performance, robustness. ")]),_:1})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue","options"]),n(k,{modelValue:d.modelValue.quality_attribute,"onUpdate:modelValue":e[5]||(e[5]=u=>d.modelValue.quality_attribute=u),options:f(S)},{label:a(()=>[l(" Quality Attribute "),n(y,null,{default:a(()=>[l(" More specific quality attribute that the test example is validating, e.g., accuracy, inference time, robustness to image blur. ")]),_:1})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue","options"]),n(k,{modelValue:d.modelValue.code_type,"onUpdate:modelValue":e[6]||(e[6]=u=>d.modelValue.code_type=u),error:f(p).code_type,options:f(o),onChange:e[7]||(e[7]=u=>f(p).code_type=!1)},{label:a(()=>[l("Code Type")]),"error-message":a(()=>[l("Code Type must be selected")]),_:1},8,["modelValue","error","options"]),n(K,{modelValue:d.modelValue.code,"onUpdate:modelValue":e[9]||(e[9]=u=>d.modelValue.code=u),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:a(()=>[l(" Code "),n(y,null,{default:a(()=>[l(" Code for the test example. ")]),_:1}),n(oe,{onClick:e[8]||(e[8]=u=>I())})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(K,{modelValue:d.modelValue.description,"onUpdate:modelValue":e[10]||(e[10]=u=>d.modelValue.description=u),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:a(()=>[l(" Description "),n(y,null,{default:a(()=>[l(" Description of the test example. ")]),_:1})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(L,{modelValue:d.modelValue.inputs,"onUpdate:modelValue":e[11]||(e[11]=u=>d.modelValue.inputs=u)},{label:a(()=>[l(" Inputs "),n(y,null,{default:a(()=>[l(" Inputs that are required to run the test example, e.g., data sets, parameters. ")]),_:1})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(L,{modelValue:d.modelValue.output,"onUpdate:modelValue":e[12]||(e[12]=u=>d.modelValue.output=u)},{label:a(()=>[l(" Output "),n(y,null,{default:a(()=>[l(" Output of the test example, e.g., value, log entry, database entry, alert. ")]),_:1})]),"error-message":a(()=>[l("Not defined")]),_:1},8,["modelValue"]),i("div",ke,[n(J,{class:"primary-button",onClick:e[13]||(e[13]=u=>m("cancel"))},{default:a(()=>[l(" Cancel ")]),_:1}),n(J,{class:"primary-button",onClick:x},{default:a(()=>[l(" Save ")]),_:1})])])}}}),Ue="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z'/%3e%3c/svg%3e",Te=i("title",null,"Test Catalog",-1),qe={key:0},Se={class:"inline-input-left"},Be=i("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Tag ",-1),Re={class:"inline-input-right"},Oe=i("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Quality Attribute Category ",-1),ze={class:"inline-button"},Pe=i("img",{src:Ue,class:"usa-icon"},null,-1),Ne={key:1},Me=j({__name:"test-catalog",setup(d){const b=ae(),c=te("token"),g=_(!1),C=_(!1),v=_(""),m=_(""),r=_([]),E=_(new X);p();async function p(){await $fetch(b.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"all"}},onRequestError(){U()},onResponse({response:t}){t.ok&&(r.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}})}async function T(){v.value===""&&m.value===""?p():m.value===""?await $fetch(b.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"tag",name:"tags",value:v.value}},onRequestError(){U()},onResponse({response:t}){t.ok&&(r.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}}):v.value===""?await $fetch(b.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"property",name:"qa_category",value:m.value}},onRequestError(){U()},onResponse({response:t}){t.ok&&(r.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}}):await $fetch(b.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"and",filters:[{type:"tag",name:"tags",value:v.value},{type:"property",name:"qa_category",value:m.value}]}},onRequestError(){U()},onResponse({response:t}){t.ok&&(r.value=t._data)},onResponseError({response:t}){$(t.status,t._data.error_description)}})}function q(){E.value=new X}function R(){q(),g.value=!0,C.value=!0}function O(t){E.value=t,g.value=!0,C.value=!1}async function S(t,o){confirm("Are you sure you want to delete the entry: "+o+" in the "+t+" catalog?")&&await $fetch(b.public.apiPath+"/catalog/"+t+"/entry/"+o,{retry:0,method:"DELETE",headers:{Authorization:"Bearer "+c.value},onRequestError(){U()},onResponse({response:x}){x.ok&&p()},onResponseError({response:x}){$(x.status,x._data.error_description)}})}function z(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(g.value=!1,q())}async function P(t){try{C.value?await $fetch(b.public.apiPath+"/catalog/"+t.header.catalog_id+"/entry",{retry:0,method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+c.value},onRequestError(){U()},onResponse({response:o}){o.ok&&p()},onResponseError({response:o}){$(o.status,o._data.error_description)}}):await $fetch(b.public.apiPath+"/catalog/"+t.header.catalog_id+"/entry",{retry:0,method:"PUT",body:JSON.stringify(t),headers:{Authorization:"Bearer "+c.value},onRequestError(){U()},onResponse({response:o}){o.ok&&p()},onResponseError({response:o}){$(o.status,o._data.error_description)}})}catch(o){console.log("Error in submit."),console.log(o);return}alert("Entry has been saved successfully."),q(),g.value=!1}return(t,o)=>{const x=w("UsaButton"),N=w("UsaTextInput"),D=ye,I=$e,s=re;return h(),ee(s,{name:"base-layout"},{"page-title":a(()=>[l("Test Catalog")]),default:a(()=>[Te,f(g)?B("",!0):(h(),V("div",qe,[n(x,{class:"secondary-button sub-header-float-button",onClick:R},{default:a(()=>[l(" Add Catalog Entry ")]),_:1}),i("div",Se,[Be,n(N,{modelValue:f(v),"onUpdate:modelValue":o[0]||(o[0]=e=>F(v)?v.value=e:null),onKeyup:o[1]||(o[1]=Z(e=>T(),["enter"]))},null,8,["modelValue"])]),i("div",Re,[Oe,n(N,{modelValue:f(m),"onUpdate:modelValue":o[2]||(o[2]=e=>F(m)?m.value=e:null),onKeyup:o[3]||(o[3]=Z(e=>T(),["enter"]))},null,8,["modelValue"])]),i("div",ze,[n(x,{class:"usa-button--unstyled",onClick:o[4]||(o[4]=e=>T())},{default:a(()=>[Pe]),_:1})]),n(D,{modelValue:f(r),"onUpdate:modelValue":o[5]||(o[5]=e=>F(r)?r.value=e:null),onEditEntry:O,onDeleteEntry:S},null,8,["modelValue"])])),f(g)?(h(),V("div",Ne,[n(I,{modelValue:f(E),"onUpdate:modelValue":o[6]||(o[6]=e=>F(E)?E.value=e:null),"new-entry-flag":f(C),onCancel:z,onSubmit:P},null,8,["modelValue","new-entry-flag"])])):B("",!0)]),_:1})}}});export{Me as default};
